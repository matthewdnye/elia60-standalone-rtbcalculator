var dI=Object.defineProperty;var fI=(t,e,n)=>e in t?dI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>fI(t,typeof e!="symbol"?e+"":e,n);function pI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Yw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xw={exports:{}},fh={},Jw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=Symbol.for("react.element"),gI=Symbol.for("react.portal"),mI=Symbol.for("react.fragment"),yI=Symbol.for("react.strict_mode"),_I=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),wI=Symbol.for("react.context"),xI=Symbol.for("react.forward_ref"),EI=Symbol.for("react.suspense"),TI=Symbol.for("react.memo"),SI=Symbol.for("react.lazy"),Hy=Symbol.iterator;function bI(t){return t===null||typeof t!="object"?null:(t=Hy&&t[Hy]||t["@@iterator"],typeof t=="function"?t:null)}var Zw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ex=Object.assign,tx={};function yo(t,e,n){this.props=t,this.context=e,this.refs=tx,this.updater=n||Zw}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nx(){}nx.prototype=yo.prototype;function qp(t,e,n){this.props=t,this.context=e,this.refs=tx,this.updater=n||Zw}var Kp=qp.prototype=new nx;Kp.constructor=qp;ex(Kp,yo.prototype);Kp.isPureReactComponent=!0;var Wy=Array.isArray,ix=Object.prototype.hasOwnProperty,Gp={current:null},rx={key:!0,ref:!0,__self:!0,__source:!0};function sx(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ix.call(e,i)&&!rx.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:vl,type:t,key:s,ref:o,props:r,_owner:Gp.current}}function II(t,e){return{$$typeof:vl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===vl}function kI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qy=/\/+/g;function dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kI(""+t.key):e.toString(36)}function Bu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vl:case gI:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+dd(o,0):i,Wy(r)?(n="",t!=null&&(n=t.replace(qy,"$&/")+"/"),Bu(r,e,n,"",function(c){return c})):r!=null&&(Qp(r)&&(r=II(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(qy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Wy(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+dd(s,a);o+=Bu(s,e,n,l,r)}else if(l=bI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+dd(s,a++),o+=Bu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function su(t,e,n){if(t==null)return t;var i=[],r=0;return Bu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function AI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},zu={transition:null},CI={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:zu,ReactCurrentOwner:Gp};function ox(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:su,forEach:function(t,e,n){su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return su(t,function(){e++}),e},toArray:function(t){return su(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=yo;de.Fragment=mI;de.Profiler=_I;de.PureComponent=qp;de.StrictMode=yI;de.Suspense=EI;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CI;de.act=ox;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ex({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ix.call(e,l)&&!rx.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:vl,type:t.type,key:r,ref:s,props:i,_owner:o}};de.createContext=function(t){return t={$$typeof:wI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vI,_context:t},t.Consumer=t};de.createElement=sx;de.createFactory=function(t){var e=sx.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:xI,render:t}};de.isValidElement=Qp;de.lazy=function(t){return{$$typeof:SI,_payload:{_status:-1,_result:t},_init:AI}};de.memo=function(t,e){return{$$typeof:TI,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=zu.transition;zu.transition={};try{t()}finally{zu.transition=e}};de.unstable_act=ox;de.useCallback=function(t,e){return Ut.current.useCallback(t,e)};de.useContext=function(t){return Ut.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};de.useEffect=function(t,e){return Ut.current.useEffect(t,e)};de.useId=function(){return Ut.current.useId()};de.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Ut.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};de.useRef=function(t){return Ut.current.useRef(t)};de.useState=function(t){return Ut.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Ut.current.useTransition()};de.version="18.3.1";Jw.exports=de;var B=Jw.exports;const be=Yw(B),PI=pI({__proto__:null,default:be},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=B,NI=Symbol.for("react.element"),DI=Symbol.for("react.fragment"),OI=Object.prototype.hasOwnProperty,MI=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VI={key:!0,ref:!0,__self:!0,__source:!0};function ax(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)OI.call(e,i)&&!VI.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:NI,type:t,key:s,ref:o,props:r,_owner:MI.current}}fh.Fragment=DI;fh.jsx=ax;fh.jsxs=ax;Xw.exports=fh;var C=Xw.exports,df={},lx={exports:{}},nn={},ux={exports:{}},cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,J){var ee=W.length;W.push(J);e:for(;0<ee;){var Ie=ee-1>>>1,he=W[Ie];if(0<r(he,J))W[Ie]=J,W[ee]=he,ee=Ie;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var J=W[0],ee=W.pop();if(ee!==J){W[0]=ee;e:for(var Ie=0,he=W.length,ke=he>>>1;Ie<ke;){var Ze=2*(Ie+1)-1,ft=W[Ze],Ge=Ze+1,sn=W[Ge];if(0>r(ft,ee))Ge<he&&0>r(sn,ft)?(W[Ie]=sn,W[Ge]=ee,Ie=Ge):(W[Ie]=ft,W[Ze]=ee,Ie=Ze);else if(Ge<he&&0>r(sn,ee))W[Ie]=sn,W[Ge]=ee,Ie=Ge;else break e}}return J}function r(W,J){var ee=W.sortIndex-J.sortIndex;return ee!==0?ee:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var J=n(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=W)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function D(W){if(x=!1,I(W),!y)if(n(l)!==null)y=!0,pe(O);else{var J=n(c);J!==null&&ge(D,J.startTime-W)}}function O(W,J){y=!1,x&&(x=!1,w(_),_=-1),m=!0;var ee=p;try{for(I(J),d=n(l);d!==null&&(!(d.expirationTime>J)||W&&!R());){var Ie=d.callback;if(typeof Ie=="function"){d.callback=null,p=d.priorityLevel;var he=Ie(d.expirationTime<=J);J=t.unstable_now(),typeof he=="function"?d.callback=he:d===n(l)&&i(l),I(J)}else i(l);d=n(l)}if(d!==null)var ke=!0;else{var Ze=n(c);Ze!==null&&ge(D,Ze.startTime-J),ke=!1}return ke}finally{d=null,p=ee,m=!1}}var L=!1,S=null,_=-1,b=5,A=-1;function R(){return!(t.unstable_now()-A<b)}function P(){if(S!==null){var W=t.unstable_now();A=W;var J=!0;try{J=S(!0,W)}finally{J?k():(L=!1,S=null)}}else L=!1}var k;if(typeof v=="function")k=function(){v(P)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ie=le.port2;le.port1.onmessage=P,k=function(){ie.postMessage(null)}}else k=function(){T(P,0)};function pe(W){S=W,L||(L=!0,k())}function ge(W,J){_=T(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,pe(O))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var ee=p;p=J;try{return W()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=p;p=W;try{return J()}finally{p=ee}},t.unstable_scheduleCallback=function(W,J,ee){var Ie=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Ie+ee:Ie):ee=Ie,W){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ee+he,W={id:h++,callback:J,priorityLevel:W,startTime:ee,expirationTime:he,sortIndex:-1},ee>Ie?(W.sortIndex=ee,e(c,W),n(l)===null&&W===n(c)&&(x?(w(_),_=-1):x=!0,ge(D,ee-Ie))):(W.sortIndex=he,e(l,W),y||m||(y=!0,pe(O))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var J=p;return function(){var ee=p;p=J;try{return W.apply(this,arguments)}finally{p=ee}}}})(cx);ux.exports=cx;var LI=ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=B,tn=LI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hx=new Set,Fa={};function is(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(Fa[t]=e,t=0;t<e.length;t++)hx.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=Object.prototype.hasOwnProperty,jI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ky={},Gy={};function UI(t){return ff.call(Gy,t)?!0:ff.call(Ky,t)?!1:jI.test(t)?Gy[t]=!0:(Ky[t]=!0,!1)}function BI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zI(t,e,n,i){if(e===null||typeof e>"u"||BI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yp=/[\-:]([a-z])/g;function Xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);wt[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);wt[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yp,Xp);wt[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jp(t,e,n,i){var r=wt.hasOwnProperty(e)?wt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zI(e,n,r,i)&&(n=null),i||r===null?UI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var bi=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ou=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),dx=Symbol.for("react.provider"),fx=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),gf=Symbol.for("react.suspense"),mf=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),Di=Symbol.for("react.lazy"),px=Symbol.for("react.offscreen"),Qy=Symbol.iterator;function Ho(t){return t===null||typeof t!="object"?null:(t=Qy&&t[Qy]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,fd;function oa(t){if(fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fd=e&&e[1]||""}return`
`+fd+t}var pd=!1;function gd(t,e){if(!t||pd)return"";pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oa(t):""}function $I(t){switch(t.tag){case 5:return oa(t.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function yf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case bs:return"Portal";case pf:return"Profiler";case Zp:return"StrictMode";case gf:return"Suspense";case mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fx:return(t.displayName||"Context")+".Consumer";case dx:return(t._context.displayName||"Context")+".Provider";case eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tg:return e=t.displayName||null,e!==null?e:yf(t.type)||"Memo";case Di:e=t._payload,t=t._init;try{return yf(t(e))}catch{}}return null}function HI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yf(e);case 8:return e===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WI(t){var e=gx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function au(t){t._valueTracker||(t._valueTracker=WI(t))}function mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=gx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function dc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _f(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yx(t,e){e=e.checked,e!=null&&Jp(t,"checked",e,!1)}function vf(t,e){yx(t,e);var n=ur(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&wf(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wf(t,e,n){(e!=="number"||dc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var aa=Array.isArray;function js(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(aa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function _x(t,e){var n=ur(e.value),i=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Zy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ef(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lu,wx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lu=lu||document.createElement("div"),lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qI=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){qI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function xx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function Ex(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=xx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var KI=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tf(t,e){if(e){if(KI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=null;function ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var If=null,Us=null,Bs=null;function e_(t){if(t=El(t)){if(typeof If!="function")throw Error($(280));var e=t.stateNode;e&&(e=_h(e),If(t.stateNode,t.type,e))}}function Tx(t){Us?Bs?Bs.push(t):Bs=[t]:Us=t}function Sx(){if(Us){var t=Us,e=Bs;if(Bs=Us=null,e_(t),e)for(t=0;t<e.length;t++)e_(e[t])}}function bx(t,e){return t(e)}function Ix(){}var md=!1;function kx(t,e,n){if(md)return t(e,n);md=!0;try{return bx(t,e,n)}finally{md=!1,(Us!==null||Bs!==null)&&(Ix(),Sx())}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var i=_h(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var kf=!1;if(gi)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){kf=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{kf=!1}function GI(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ya=!1,fc=null,pc=!1,Af=null,QI={onError:function(t){ya=!0,fc=t}};function YI(t,e,n,i,r,s,o,a,l){ya=!1,fc=null,GI.apply(QI,arguments)}function XI(t,e,n,i,r,s,o,a,l){if(YI.apply(this,arguments),ya){if(ya){var c=fc;ya=!1,fc=null}else throw Error($(198));pc||(pc=!0,Af=c)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ax(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t_(t){if(rs(t)!==t)throw Error($(188))}function JI(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return t_(r),t;if(s===i)return t_(r),e;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Cx(t){return t=JI(t),t!==null?Px(t):null}function Px(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Px(t);if(e!==null)return e;t=t.sibling}return null}var Rx=tn.unstable_scheduleCallback,n_=tn.unstable_cancelCallback,ZI=tn.unstable_shouldYield,ek=tn.unstable_requestPaint,Ye=tn.unstable_now,tk=tn.unstable_getCurrentPriorityLevel,ig=tn.unstable_ImmediatePriority,Nx=tn.unstable_UserBlockingPriority,gc=tn.unstable_NormalPriority,nk=tn.unstable_LowPriority,Dx=tn.unstable_IdlePriority,ph=null,$n=null;function ik(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(ph,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:ok,rk=Math.log,sk=Math.LN2;function ok(t){return t>>>=0,t===0?32:31-(rk(t)/sk|0)|0}var uu=64,cu=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=la(a):(s&=o,s!==0&&(i=la(s)))}else o=n&~r,o!==0?i=la(o):s!==0&&(i=la(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Cn(e),r=1<<n,i|=t[n],e&=~r;return i}function ak(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Cn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=ak(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ox(){var t=uu;return uu<<=1,!(uu&4194240)&&(uu=64),t}function yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function uk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Cn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function rg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Cn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ce=0;function Mx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vx,sg,Lx,Fx,jx,Pf=!1,hu=[],Qi=null,Yi=null,Xi=null,Ba=new Map,za=new Map,Mi=[],ck="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i_(t,e){switch(t){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(e.pointerId)}}function qo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=El(e),e!==null&&sg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function hk(t,e,n,i,r){switch(e){case"focusin":return Qi=qo(Qi,t,e,n,i,r),!0;case"dragenter":return Yi=qo(Yi,t,e,n,i,r),!0;case"mouseover":return Xi=qo(Xi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ba.set(s,qo(Ba.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,za.set(s,qo(za.get(s)||null,t,e,n,i,r)),!0}return!1}function Ux(t){var e=Or(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=Ax(n),e!==null){t.blockedOn=e,jx(t.priority,function(){Lx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bf=i,n.target.dispatchEvent(i),bf=null}else return e=El(n),e!==null&&sg(e),t.blockedOn=n,!1;e.shift()}return!0}function r_(t,e,n){$u(t)&&n.delete(e)}function dk(){Pf=!1,Qi!==null&&$u(Qi)&&(Qi=null),Yi!==null&&$u(Yi)&&(Yi=null),Xi!==null&&$u(Xi)&&(Xi=null),Ba.forEach(r_),za.forEach(r_)}function Ko(t,e){t.blockedOn===e&&(t.blockedOn=null,Pf||(Pf=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,dk)))}function $a(t){function e(r){return Ko(r,t)}if(0<hu.length){Ko(hu[0],t);for(var n=1;n<hu.length;n++){var i=hu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Qi!==null&&Ko(Qi,t),Yi!==null&&Ko(Yi,t),Xi!==null&&Ko(Xi,t),Ba.forEach(e),za.forEach(e),n=0;n<Mi.length;n++)i=Mi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)Ux(n),n.blockedOn===null&&Mi.shift()}var zs=bi.ReactCurrentBatchConfig,yc=!0;function fk(t,e,n,i){var r=Ce,s=zs.transition;zs.transition=null;try{Ce=1,og(t,e,n,i)}finally{Ce=r,zs.transition=s}}function pk(t,e,n,i){var r=Ce,s=zs.transition;zs.transition=null;try{Ce=4,og(t,e,n,i)}finally{Ce=r,zs.transition=s}}function og(t,e,n,i){if(yc){var r=Rf(t,e,n,i);if(r===null)kd(t,e,i,_c,n),i_(t,i);else if(hk(r,t,e,n,i))i.stopPropagation();else if(i_(t,i),e&4&&-1<ck.indexOf(t)){for(;r!==null;){var s=El(r);if(s!==null&&Vx(s),s=Rf(t,e,n,i),s===null&&kd(t,e,i,_c,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else kd(t,e,i,null,n)}}var _c=null;function Rf(t,e,n,i){if(_c=null,t=ng(i),t=Or(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ax(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _c=t,null}function Bx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tk()){case ig:return 1;case Nx:return 4;case gc:case nk:return 16;case Dx:return 536870912;default:return 16}default:return 16}}var zi=null,ag=null,Hu=null;function zx(){if(Hu)return Hu;var t,e=ag,n=e.length,i,r="value"in zi?zi.value:zi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Hu=r.slice(t,1<i?1-i:void 0)}function Wu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function du(){return!0}function s_(){return!1}function rn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?du:s_,this.isPropagationStopped=s_,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=rn(_o),xl=Be({},_o,{view:0,detail:0}),gk=rn(xl),_d,vd,Go,gh=Be({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(_d=t.screenX-Go.screenX,vd=t.screenY-Go.screenY):vd=_d=0,Go=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:vd}}),o_=rn(gh),mk=Be({},gh,{dataTransfer:0}),yk=rn(mk),_k=Be({},xl,{relatedTarget:0}),wd=rn(_k),vk=Be({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),wk=rn(vk),xk=Be({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ek=rn(xk),Tk=Be({},_o,{data:0}),a_=rn(Tk),Sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ik[t])?!!e[t]:!1}function ug(){return kk}var Ak=Be({},xl,{key:function(t){if(t.key){var e=Sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(t){return t.type==="keypress"?Wu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ck=rn(Ak),Pk=Be({},gh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l_=rn(Pk),Rk=Be({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),Nk=rn(Rk),Dk=Be({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ok=rn(Dk),Mk=Be({},gh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vk=rn(Mk),Lk=[9,13,27,32],cg=gi&&"CompositionEvent"in window,_a=null;gi&&"documentMode"in document&&(_a=document.documentMode);var Fk=gi&&"TextEvent"in window&&!_a,$x=gi&&(!cg||_a&&8<_a&&11>=_a),u_=" ",c_=!1;function Hx(t,e){switch(t){case"keyup":return Lk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function jk(t,e){switch(t){case"compositionend":return Wx(e);case"keypress":return e.which!==32?null:(c_=!0,u_);case"textInput":return t=e.data,t===u_&&c_?null:t;default:return null}}function Uk(t,e){if(ks)return t==="compositionend"||!cg&&Hx(t,e)?(t=zx(),Hu=ag=zi=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $x&&e.locale!=="ko"?null:e.data;default:return null}}var Bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bk[t.type]:e==="textarea"}function qx(t,e,n,i){Tx(i),e=vc(e,"onChange"),0<e.length&&(n=new lg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var va=null,Ha=null;function zk(t){iE(t,0)}function mh(t){var e=Ps(t);if(mx(e))return t}function $k(t,e){if(t==="change")return e}var Kx=!1;if(gi){var xd;if(gi){var Ed="oninput"in document;if(!Ed){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),Ed=typeof d_.oninput=="function"}xd=Ed}else xd=!1;Kx=xd&&(!document.documentMode||9<document.documentMode)}function f_(){va&&(va.detachEvent("onpropertychange",Gx),Ha=va=null)}function Gx(t){if(t.propertyName==="value"&&mh(Ha)){var e=[];qx(e,Ha,t,ng(t)),kx(zk,e)}}function Hk(t,e,n){t==="focusin"?(f_(),va=e,Ha=n,va.attachEvent("onpropertychange",Gx)):t==="focusout"&&f_()}function Wk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mh(Ha)}function qk(t,e){if(t==="click")return mh(e)}function Kk(t,e){if(t==="input"||t==="change")return mh(e)}function Gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:Gk;function Wa(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ff.call(e,r)||!Nn(t[r],e[r]))return!1}return!0}function p_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g_(t,e){var n=p_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p_(n)}}function Qx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yx(){for(var t=window,e=dc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dc(t.document)}return e}function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qk(t){var e=Yx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qx(n.ownerDocument.documentElement,n)){if(i!==null&&hg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=g_(n,s);var o=g_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yk=gi&&"documentMode"in document&&11>=document.documentMode,As=null,Nf=null,wa=null,Df=!1;function m_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||As==null||As!==dc(i)||(i=As,"selectionStart"in i&&hg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wa&&Wa(wa,i)||(wa=i,i=vc(Nf,"onSelect"),0<i.length&&(e=new lg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=As)))}function fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cs={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Td={},Xx={};gi&&(Xx=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function yh(t){if(Td[t])return Td[t];if(!Cs[t])return t;var e=Cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xx)return Td[t]=e[n];return t}var Jx=yh("animationend"),Zx=yh("animationiteration"),eE=yh("animationstart"),tE=yh("transitionend"),nE=new Map,y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){nE.set(t,e),is(e,[t])}for(var Sd=0;Sd<y_.length;Sd++){var bd=y_[Sd],Xk=bd.toLowerCase(),Jk=bd[0].toUpperCase()+bd.slice(1);gr(Xk,"on"+Jk)}gr(Jx,"onAnimationEnd");gr(Zx,"onAnimationIteration");gr(eE,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(tE,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function __(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,XI(i,e,void 0,t),t.currentTarget=null}function iE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;__(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;__(r,a,c),s=l}}}if(pc)throw t=Af,pc=!1,Af=null,t}function Me(t,e){var n=e[Ff];n===void 0&&(n=e[Ff]=new Set);var i=t+"__bubble";n.has(i)||(rE(e,t,2,!1),n.add(i))}function Id(t,e,n){var i=0;e&&(i|=4),rE(n,t,i,e)}var pu="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[pu]){t[pu]=!0,hx.forEach(function(n){n!=="selectionchange"&&(Zk.has(n)||Id(n,!1,t),Id(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pu]||(e[pu]=!0,Id("selectionchange",!1,e))}}function rE(t,e,n,i){switch(Bx(e)){case 1:var r=fk;break;case 4:r=pk;break;default:r=og}n=r.bind(null,e,n,t),r=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function kd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Or(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}kx(function(){var c=s,h=ng(n),d=[];e:{var p=nE.get(t);if(p!==void 0){var m=lg,y=t;switch(t){case"keypress":if(Wu(n)===0)break e;case"keydown":case"keyup":m=Ck;break;case"focusin":y="focus",m=wd;break;case"focusout":y="blur",m=wd;break;case"beforeblur":case"afterblur":m=wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=o_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Nk;break;case Jx:case Zx:case eE:m=wk;break;case tE:m=Ok;break;case"scroll":m=gk;break;case"wheel":m=Vk;break;case"copy":case"cut":case"paste":m=Ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=l_}var x=(e&4)!==0,T=!x&&t==="scroll",w=x?p!==null?p+"Capture":null:p;x=[];for(var v=c,I;v!==null;){I=v;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,w!==null&&(D=Ua(v,w),D!=null&&x.push(Ka(v,D,I)))),T)break;v=v.return}0<x.length&&(p=new m(p,y,null,n,h),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==bf&&(y=n.relatedTarget||n.fromElement)&&(Or(y)||y[mi]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Or(y):null,y!==null&&(T=rs(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(x=o_,D="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=l_,D="onPointerLeave",w="onPointerEnter",v="pointer"),T=m==null?p:Ps(m),I=y==null?p:Ps(y),p=new x(D,v+"leave",m,n,h),p.target=T,p.relatedTarget=I,D=null,Or(h)===c&&(x=new x(w,v+"enter",y,n,h),x.target=I,x.relatedTarget=T,D=x),T=D,m&&y)t:{for(x=m,w=y,v=0,I=x;I;I=_s(I))v++;for(I=0,D=w;D;D=_s(D))I++;for(;0<v-I;)x=_s(x),v--;for(;0<I-v;)w=_s(w),I--;for(;v--;){if(x===w||w!==null&&x===w.alternate)break t;x=_s(x),w=_s(w)}x=null}else x=null;m!==null&&v_(d,p,m,x,!1),y!==null&&T!==null&&v_(d,T,y,x,!0)}}e:{if(p=c?Ps(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=$k;else if(h_(p))if(Kx)O=Kk;else{O=Wk;var L=Hk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=qk);if(O&&(O=O(t,c))){qx(d,O,n,h);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&wf(p,"number",p.value)}switch(L=c?Ps(c):window,t){case"focusin":(h_(L)||L.contentEditable==="true")&&(As=L,Nf=c,wa=null);break;case"focusout":wa=Nf=As=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,m_(d,n,h);break;case"selectionchange":if(Yk)break;case"keydown":case"keyup":m_(d,n,h)}var S;if(cg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ks?Hx(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&($x&&n.locale!=="ko"&&(ks||_!=="onCompositionStart"?_==="onCompositionEnd"&&ks&&(S=zx()):(zi=h,ag="value"in zi?zi.value:zi.textContent,ks=!0)),L=vc(c,_),0<L.length&&(_=new a_(_,t,null,n,h),d.push({event:_,listeners:L}),S?_.data=S:(S=Wx(n),S!==null&&(_.data=S)))),(S=Fk?jk(t,n):Uk(t,n))&&(c=vc(c,"onBeforeInput"),0<c.length&&(h=new a_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}iE(d,e)})}function Ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ua(t,n),s!=null&&i.unshift(Ka(t,s,r)),s=Ua(t,e),s!=null&&i.push(Ka(t,s,r))),t=t.return}return i}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function v_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Ua(n,s),l!=null&&o.unshift(Ka(n,l,a))):r||(l=Ua(n,s),l!=null&&o.push(Ka(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function w_(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function gu(t,e,n){if(e=w_(e),w_(t)!==e&&n)throw Error($(425))}function wc(){}var Of=null,Mf=null;function Vf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(t){return x_.resolve(null).then(t).catch(rA)}:Lf;function rA(t){setTimeout(function(){throw t})}function Ad(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),$a(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$a(e)}function Ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),Un="__reactFiber$"+vo,Ga="__reactProps$"+vo,mi="__reactContainer$"+vo,Ff="__reactEvents$"+vo,sA="__reactListeners$"+vo,oA="__reactHandles$"+vo;function Or(t){var e=t[Un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mi]||n[Un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E_(t);t!==null;){if(n=t[Un])return n;t=E_(t)}return e}t=n,n=t.parentNode}return null}function El(t){return t=t[Un]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function _h(t){return t[Ga]||null}var jf=[],Rs=-1;function mr(t){return{current:t}}function Le(t){0>Rs||(t.current=jf[Rs],jf[Rs]=null,Rs--)}function De(t,e){Rs++,jf[Rs]=t.current,t.current=e}var cr={},Nt=mr(cr),Gt=mr(!1),qr=cr;function Xs(t,e){var n=t.type.contextTypes;if(!n)return cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Qt(t){return t=t.childContextTypes,t!=null}function xc(){Le(Gt),Le(Nt)}function T_(t,e,n){if(Nt.current!==cr)throw Error($(168));De(Nt,e),De(Gt,n)}function sE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,HI(t)||"Unknown",r));return Be({},n,i)}function Ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cr,qr=Nt.current,De(Nt,t),De(Gt,Gt.current),!0}function S_(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=sE(t,e,qr),i.__reactInternalMemoizedMergedChildContext=t,Le(Gt),Le(Nt),De(Nt,t)):Le(Gt),De(Gt,n)}var oi=null,vh=!1,Cd=!1;function oE(t){oi===null?oi=[t]:oi.push(t)}function aA(t){vh=!0,oE(t)}function yr(){if(!Cd&&oi!==null){Cd=!0;var t=0,e=Ce;try{var n=oi;for(Ce=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}oi=null,vh=!1}catch(r){throw oi!==null&&(oi=oi.slice(t+1)),Rx(ig,yr),r}finally{Ce=e,Cd=!1}}return null}var Ns=[],Ds=0,Tc=null,Sc=0,cn=[],hn=0,Kr=null,li=1,ui="";function Cr(t,e){Ns[Ds++]=Sc,Ns[Ds++]=Tc,Tc=t,Sc=e}function aE(t,e,n){cn[hn++]=li,cn[hn++]=ui,cn[hn++]=Kr,Kr=t;var i=li;t=ui;var r=32-Cn(i)-1;i&=~(1<<r),n+=1;var s=32-Cn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,li=1<<32-Cn(e)+r|n<<r|i,ui=s+t}else li=1<<s|n<<r|i,ui=t}function dg(t){t.return!==null&&(Cr(t,1),aE(t,1,0))}function fg(t){for(;t===Tc;)Tc=Ns[--Ds],Ns[Ds]=null,Sc=Ns[--Ds],Ns[Ds]=null;for(;t===Kr;)Kr=cn[--hn],cn[hn]=null,ui=cn[--hn],cn[hn]=null,li=cn[--hn],cn[hn]=null}var en=null,Zt=null,Fe=!1,bn=null;function lE(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Zt=Ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:li,overflow:ui}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Zt=null,!0):!1;default:return!1}}function Uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bf(t){if(Fe){var e=Zt;if(e){var n=e;if(!b_(t,e)){if(Uf(t))throw Error($(418));e=Ji(n.nextSibling);var i=en;e&&b_(t,e)?lE(i,n):(t.flags=t.flags&-4097|2,Fe=!1,en=t)}}else{if(Uf(t))throw Error($(418));t.flags=t.flags&-4097|2,Fe=!1,en=t}}}function I_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function mu(t){if(t!==en)return!1;if(!Fe)return I_(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vf(t.type,t.memoizedProps)),e&&(e=Zt)){if(Uf(t))throw uE(),Error($(418));for(;e;)lE(t,e),e=Ji(e.nextSibling)}if(I_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=Ji(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=en?Ji(t.stateNode.nextSibling):null;return!0}function uE(){for(var t=Zt;t;)t=Ji(t.nextSibling)}function Js(){Zt=en=null,Fe=!1}function pg(t){bn===null?bn=[t]:bn.push(t)}var lA=bi.ReactCurrentBatchConfig;function Qo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function yu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function k_(t){var e=t._init;return e(t._payload)}function cE(t){function e(w,v){if(t){var I=w.deletions;I===null?(w.deletions=[v],w.flags|=16):I.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function i(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function r(w,v){return w=nr(w,v),w.index=0,w.sibling=null,w}function s(w,v,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<v?(w.flags|=2,v):I):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,I,D){return v===null||v.tag!==6?(v=Vd(I,w.mode,D),v.return=w,v):(v=r(v,I),v.return=w,v)}function l(w,v,I,D){var O=I.type;return O===Is?h(w,v,I.props.children,D,I.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Di&&k_(O)===v.type)?(D=r(v,I.props),D.ref=Qo(w,v,I),D.return=w,D):(D=Ju(I.type,I.key,I.props,null,w.mode,D),D.ref=Qo(w,v,I),D.return=w,D)}function c(w,v,I,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Ld(I,w.mode,D),v.return=w,v):(v=r(v,I.children||[]),v.return=w,v)}function h(w,v,I,D,O){return v===null||v.tag!==7?(v=zr(I,w.mode,D,O),v.return=w,v):(v=r(v,I),v.return=w,v)}function d(w,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Vd(""+v,w.mode,I),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ou:return I=Ju(v.type,v.key,v.props,null,w.mode,I),I.ref=Qo(w,null,v),I.return=w,I;case bs:return v=Ld(v,w.mode,I),v.return=w,v;case Di:var D=v._init;return d(w,D(v._payload),I)}if(aa(v)||Ho(v))return v=zr(v,w.mode,I,null),v.return=w,v;yu(w,v)}return null}function p(w,v,I,D){var O=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(w,v,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ou:return I.key===O?l(w,v,I,D):null;case bs:return I.key===O?c(w,v,I,D):null;case Di:return O=I._init,p(w,v,O(I._payload),D)}if(aa(I)||Ho(I))return O!==null?null:h(w,v,I,D,null);yu(w,I)}return null}function m(w,v,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(I)||null,a(v,w,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ou:return w=w.get(D.key===null?I:D.key)||null,l(v,w,D,O);case bs:return w=w.get(D.key===null?I:D.key)||null,c(v,w,D,O);case Di:var L=D._init;return m(w,v,I,L(D._payload),O)}if(aa(D)||Ho(D))return w=w.get(I)||null,h(v,w,D,O,null);yu(v,D)}return null}function y(w,v,I,D){for(var O=null,L=null,S=v,_=v=0,b=null;S!==null&&_<I.length;_++){S.index>_?(b=S,S=null):b=S.sibling;var A=p(w,S,I[_],D);if(A===null){S===null&&(S=b);break}t&&S&&A.alternate===null&&e(w,S),v=s(A,v,_),L===null?O=A:L.sibling=A,L=A,S=b}if(_===I.length)return n(w,S),Fe&&Cr(w,_),O;if(S===null){for(;_<I.length;_++)S=d(w,I[_],D),S!==null&&(v=s(S,v,_),L===null?O=S:L.sibling=S,L=S);return Fe&&Cr(w,_),O}for(S=i(w,S);_<I.length;_++)b=m(S,w,_,I[_],D),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?_:b.key),v=s(b,v,_),L===null?O=b:L.sibling=b,L=b);return t&&S.forEach(function(R){return e(w,R)}),Fe&&Cr(w,_),O}function x(w,v,I,D){var O=Ho(I);if(typeof O!="function")throw Error($(150));if(I=O.call(I),I==null)throw Error($(151));for(var L=O=null,S=v,_=v=0,b=null,A=I.next();S!==null&&!A.done;_++,A=I.next()){S.index>_?(b=S,S=null):b=S.sibling;var R=p(w,S,A.value,D);if(R===null){S===null&&(S=b);break}t&&S&&R.alternate===null&&e(w,S),v=s(R,v,_),L===null?O=R:L.sibling=R,L=R,S=b}if(A.done)return n(w,S),Fe&&Cr(w,_),O;if(S===null){for(;!A.done;_++,A=I.next())A=d(w,A.value,D),A!==null&&(v=s(A,v,_),L===null?O=A:L.sibling=A,L=A);return Fe&&Cr(w,_),O}for(S=i(w,S);!A.done;_++,A=I.next())A=m(S,w,_,A.value,D),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?_:A.key),v=s(A,v,_),L===null?O=A:L.sibling=A,L=A);return t&&S.forEach(function(P){return e(w,P)}),Fe&&Cr(w,_),O}function T(w,v,I,D){if(typeof I=="object"&&I!==null&&I.type===Is&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ou:e:{for(var O=I.key,L=v;L!==null;){if(L.key===O){if(O=I.type,O===Is){if(L.tag===7){n(w,L.sibling),v=r(L,I.props.children),v.return=w,w=v;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Di&&k_(O)===L.type){n(w,L.sibling),v=r(L,I.props),v.ref=Qo(w,L,I),v.return=w,w=v;break e}n(w,L);break}else e(w,L);L=L.sibling}I.type===Is?(v=zr(I.props.children,w.mode,D,I.key),v.return=w,w=v):(D=Ju(I.type,I.key,I.props,null,w.mode,D),D.ref=Qo(w,v,I),D.return=w,w=D)}return o(w);case bs:e:{for(L=I.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(w,v.sibling),v=r(v,I.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Ld(I,w.mode,D),v.return=w,w=v}return o(w);case Di:return L=I._init,T(w,v,L(I._payload),D)}if(aa(I))return y(w,v,I,D);if(Ho(I))return x(w,v,I,D);yu(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(w,v.sibling),v=r(v,I),v.return=w,w=v):(n(w,v),v=Vd(I,w.mode,D),v.return=w,w=v),o(w)):n(w,v)}return T}var Zs=cE(!0),hE=cE(!1),bc=mr(null),Ic=null,Os=null,gg=null;function mg(){gg=Os=Ic=null}function yg(t){var e=bc.current;Le(bc),t._currentValue=e}function zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function $s(t,e){Ic=t,gg=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(gg!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(Ic===null)throw Error($(308));Os=t,Ic.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Mr=null;function _g(t){Mr===null?Mr=[t]:Mr.push(t)}function dE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_g(e)):(n.next=r.next,r.next=n),e.interleaved=n,yi(t,i)}function yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oi=!1;function vg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,yi(t,n)}return r=i.interleaved,r===null?(e.next=e,_g(i)):(e.next=r.next,r.next=e),i.interleaved=e,yi(t,n)}function qu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}function A_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kc(t,e,n,i){var r=t.updateQueue;Oi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(p=e,m=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=Be({},d,p);break e;case 2:Oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Qr|=o,t.lanes=o,t.memoizedState=d}}function C_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var Tl={},Hn=mr(Tl),Qa=mr(Tl),Ya=mr(Tl);function Vr(t){if(t===Tl)throw Error($(174));return t}function wg(t,e){switch(De(Ya,e),De(Qa,t),De(Hn,Tl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ef(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ef(e,t)}Le(Hn),De(Hn,e)}function eo(){Le(Hn),Le(Qa),Le(Ya)}function pE(t){Vr(Ya.current);var e=Vr(Hn.current),n=Ef(e,t.type);e!==n&&(De(Qa,t),De(Hn,n))}function xg(t){Qa.current===t&&(Le(Hn),Le(Qa))}var je=mr(0);function Ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pd=[];function Eg(){for(var t=0;t<Pd.length;t++)Pd[t]._workInProgressVersionPrimary=null;Pd.length=0}var Ku=bi.ReactCurrentDispatcher,Rd=bi.ReactCurrentBatchConfig,Gr=0,Ue=null,rt=null,ct=null,Cc=!1,xa=!1,Xa=0,uA=0;function St(){throw Error($(321))}function Tg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function Sg(t,e,n,i,r,s){if(Gr=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ku.current=t===null||t.memoizedState===null?fA:pA,t=n(i,r),xa){s=0;do{if(xa=!1,Xa=0,25<=s)throw Error($(301));s+=1,ct=rt=null,e.updateQueue=null,Ku.current=gA,t=n(i,r)}while(xa)}if(Ku.current=Pc,e=rt!==null&&rt.next!==null,Gr=0,ct=rt=Ue=null,Cc=!1,e)throw Error($(300));return t}function bg(){var t=Xa!==0;return Xa=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ue.memoizedState=ct=t:ct=ct.next=t,ct}function vn(){if(rt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ct===null?Ue.memoizedState:ct.next;if(e!==null)ct=e,rt=t;else{if(t===null)throw Error($(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ct===null?Ue.memoizedState=ct=t:ct=ct.next=t}return ct}function Ja(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=vn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=rt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Gr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Ue.lanes|=h,Qr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Nn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ue.lanes|=s,Qr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dd(t){var e=vn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Nn(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function gE(){}function mE(t,e){var n=Ue,i=vn(),r=e(),s=!Nn(i.memoizedState,r);if(s&&(i.memoizedState=r,Kt=!0),i=i.queue,Ig(vE.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Za(9,_E.bind(null,n,i,r,e),void 0,null),ht===null)throw Error($(349));Gr&30||yE(n,e,r)}return r}function yE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _E(t,e,n,i){e.value=n,e.getSnapshot=i,wE(e)&&xE(t)}function vE(t,e,n){return n(function(){wE(e)&&xE(t)})}function wE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function xE(t){var e=yi(t,1);e!==null&&Pn(e,t,1,-1)}function P_(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},e.queue=t,t=t.dispatch=dA.bind(null,Ue,t),[e.memoizedState,t]}function Za(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function EE(){return vn().memoizedState}function Gu(t,e,n,i){var r=Ln();Ue.flags|=t,r.memoizedState=Za(1|e,n,void 0,i===void 0?null:i)}function wh(t,e,n,i){var r=vn();i=i===void 0?null:i;var s=void 0;if(rt!==null){var o=rt.memoizedState;if(s=o.destroy,i!==null&&Tg(i,o.deps)){r.memoizedState=Za(e,n,s,i);return}}Ue.flags|=t,r.memoizedState=Za(1|e,n,s,i)}function R_(t,e){return Gu(8390656,8,t,e)}function Ig(t,e){return wh(2048,8,t,e)}function TE(t,e){return wh(4,2,t,e)}function SE(t,e){return wh(4,4,t,e)}function bE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IE(t,e,n){return n=n!=null?n.concat([t]):null,wh(4,4,bE.bind(null,e,t),n)}function kg(){}function kE(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Tg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function AE(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Tg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function CE(t,e,n){return Gr&21?(Nn(n,e)||(n=Ox(),Ue.lanes|=n,Qr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function cA(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var i=Rd.transition;Rd.transition={};try{t(!1),e()}finally{Ce=n,Rd.transition=i}}function PE(){return vn().memoizedState}function hA(t,e,n){var i=tr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},RE(t))NE(e,n);else if(n=dE(t,e,n,i),n!==null){var r=jt();Pn(n,t,i,r),DE(n,e,i)}}function dA(t,e,n){var i=tr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(RE(t))NE(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Nn(a,o)){var l=e.interleaved;l===null?(r.next=r,_g(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=dE(t,e,r,i),n!==null&&(r=jt(),Pn(n,t,i,r),DE(n,e,i))}}function RE(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function NE(t,e){xa=Cc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function DE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}var Pc={readContext:_n,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},fA={readContext:_n,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:R_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gu(4194308,4,bE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gu(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ln();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=hA.bind(null,Ue,t),[i.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:P_,useDebugValue:kg,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=P_(!1),e=t[0];return t=cA.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ue,r=Ln();if(Fe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ht===null)throw Error($(349));Gr&30||yE(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,R_(vE.bind(null,i,s,t),[t]),i.flags|=2048,Za(9,_E.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=ht.identifierPrefix;if(Fe){var n=ui,i=li;n=(i&~(1<<32-Cn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pA={readContext:_n,useCallback:kE,useContext:_n,useEffect:Ig,useImperativeHandle:IE,useInsertionEffect:TE,useLayoutEffect:SE,useMemo:AE,useReducer:Nd,useRef:EE,useState:function(){return Nd(Ja)},useDebugValue:kg,useDeferredValue:function(t){var e=vn();return CE(e,rt.memoizedState,t)},useTransition:function(){var t=Nd(Ja)[0],e=vn().memoizedState;return[t,e]},useMutableSource:gE,useSyncExternalStore:mE,useId:PE,unstable_isNewReconciler:!1},gA={readContext:_n,useCallback:kE,useContext:_n,useEffect:Ig,useImperativeHandle:IE,useInsertionEffect:TE,useLayoutEffect:SE,useMemo:AE,useReducer:Dd,useRef:EE,useState:function(){return Dd(Ja)},useDebugValue:kg,useDeferredValue:function(t){var e=vn();return rt===null?e.memoizedState=t:CE(e,rt.memoizedState,t)},useTransition:function(){var t=Dd(Ja)[0],e=vn().memoizedState;return[t,e]},useMutableSource:gE,useSyncExternalStore:mE,useId:PE,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $f(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xh={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=jt(),r=tr(t),s=fi(i,r);s.payload=e,n!=null&&(s.callback=n),e=Zi(t,s,r),e!==null&&(Pn(e,t,r,i),qu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=jt(),r=tr(t),s=fi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zi(t,s,r),e!==null&&(Pn(e,t,r,i),qu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),i=tr(t),r=fi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Zi(t,r,i),e!==null&&(Pn(e,t,i,n),qu(e,t,i))}};function N_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wa(n,i)||!Wa(r,s):!0}function OE(t,e,n){var i=!1,r=cr,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(r=Qt(e)?qr:Nt.current,i=e.contextTypes,s=(i=i!=null)?Xs(t,r):cr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function D_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&xh.enqueueReplaceState(e,e.state,null)}function Hf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},vg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=_n(s):(s=Qt(e)?qr:Nt.current,r.context=Xs(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($f(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&xh.enqueueReplaceState(r,r.state,null),kc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",i=e;do n+=$I(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Od(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mA=typeof WeakMap=="function"?WeakMap:Map;function ME(t,e,n){n=fi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Nc||(Nc=!0,tp=i),Wf(t,e)},n}function VE(t,e,n){n=fi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Wf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wf(t,e),typeof i!="function"&&(er===null?er=new Set([this]):er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function O_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new mA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=PA.bind(null,t,e,n),e.then(t,t))}function M_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function V_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fi(-1,1),e.tag=2,Zi(n,e,1))),n.lanes|=1),t)}var yA=bi.ReactCurrentOwner,Kt=!1;function Lt(t,e,n,i){e.child=t===null?hE(e,null,n,i):Zs(e,t.child,n,i)}function L_(t,e,n,i,r){n=n.render;var s=e.ref;return $s(e,r),i=Sg(t,e,n,i,s,r),n=bg(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,_i(t,e,r)):(Fe&&n&&dg(e),e.flags|=1,Lt(t,e,i,r),e.child)}function F_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Mg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,LE(t,e,s,i,r)):(t=Ju(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wa,n(o,i)&&t.ref===e.ref)return _i(t,e,r)}return e.flags|=1,t=nr(s,i),t.ref=e.ref,t.return=e,e.child=t}function LE(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Wa(s,i)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,_i(t,e,r)}return qf(t,e,n,i,r)}function FE(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Vs,Jt),Jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Vs,Jt),Jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,De(Vs,Jt),Jt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,De(Vs,Jt),Jt|=i;return Lt(t,e,r,n),e.child}function jE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qf(t,e,n,i,r){var s=Qt(n)?qr:Nt.current;return s=Xs(e,s),$s(e,r),n=Sg(t,e,n,i,s,r),i=bg(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,_i(t,e,r)):(Fe&&i&&dg(e),e.flags|=1,Lt(t,e,n,r),e.child)}function j_(t,e,n,i,r){if(Qt(n)){var s=!0;Ec(e)}else s=!1;if($s(e,r),e.stateNode===null)Qu(t,e),OE(e,n,i),Hf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Qt(n)?qr:Nt.current,c=Xs(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&D_(e,o,i,c),Oi=!1;var p=e.memoizedState;o.state=p,kc(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Gt.current||Oi?(typeof h=="function"&&($f(e,n,h,i),l=e.memoizedState),(a=Oi||N_(e,n,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,fE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Qt(n)?qr:Nt.current,l=Xs(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&D_(e,o,i,l),Oi=!1,p=e.memoizedState,o.state=p,kc(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Gt.current||Oi?(typeof m=="function"&&($f(e,n,m,i),y=e.memoizedState),(c=Oi||N_(e,n,c,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Kf(t,e,n,i,s,r)}function Kf(t,e,n,i,r,s){jE(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&S_(e,n,!1),_i(t,e,s);i=e.stateNode,yA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Zs(e,t.child,null,s),e.child=Zs(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=i.state,r&&S_(e,n,!0),e.child}function UE(t){var e=t.stateNode;e.pendingContext?T_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T_(t,e.context,!1),wg(t,e.containerInfo)}function U_(t,e,n,i,r){return Js(),pg(r),e.flags|=256,Lt(t,e,n,i),e.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function Qf(t){return{baseLanes:t,cachePool:null,transitions:null}}function BE(t,e,n){var i=e.pendingProps,r=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),De(je,r&1),t===null)return Bf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sh(o,i,0,null),t=zr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qf(n),e.memoizedState=Gf,t):Ag(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return _A(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=nr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=nr(a,s):(s=zr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Qf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gf,i}return s=t.child,t=s.sibling,i=nr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ag(t,e){return e=Sh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _u(t,e,n,i){return i!==null&&pg(i),Zs(e,t.child,null,n),t=Ag(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _A(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Od(Error($(422))),_u(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Sh({mode:"visible",children:i.children},r,0,null),s=zr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Zs(e,t.child,null,o),e.child.memoizedState=Qf(o),e.memoizedState=Gf,s);if(!(e.mode&1))return _u(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error($(419)),i=Od(s,i,void 0),_u(t,e,o,i)}if(a=(o&t.childLanes)!==0,Kt||a){if(i=ht,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,yi(t,r),Pn(i,t,r,-1))}return Og(),i=Od(Error($(421))),_u(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=RA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Zt=Ji(r.nextSibling),en=e,Fe=!0,bn=null,t!==null&&(cn[hn++]=li,cn[hn++]=ui,cn[hn++]=Kr,li=t.id,ui=t.overflow,Kr=e),e=Ag(e,i.children),e.flags|=4096,e)}function B_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zf(t.return,e,n)}function Md(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function zE(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Lt(t,e,i.children,n),i=je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B_(t,n,e);else if(t.tag===19)B_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(De(je,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ac(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Md(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ac(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Md(e,!0,n,null,s);break;case"together":Md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vA(t,e,n){switch(e.tag){case 3:UE(e),Js();break;case 5:pE(e);break;case 1:Qt(e.type)&&Ec(e);break;case 4:wg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;De(bc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(De(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?BE(t,e,n):(De(je,je.current&1),t=_i(t,e,n),t!==null?t.sibling:null);De(je,je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return zE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),De(je,je.current),i)break;return null;case 22:case 23:return e.lanes=0,FE(t,e,n)}return _i(t,e,n)}var $E,Yf,HE,WE;$E=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yf=function(){};HE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Vr(Hn.current);var s=null;switch(n){case"input":r=_f(t,r),i=_f(t,i),s=[];break;case"select":r=Be({},r,{value:void 0}),i=Be({},i,{value:void 0}),s=[];break;case"textarea":r=xf(t,r),i=xf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=wc)}Tf(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};WE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Yo(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wA(t,e,n){var i=e.pendingProps;switch(fg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Qt(e.type)&&xc(),bt(e),null;case 3:return i=e.stateNode,eo(),Le(Gt),Le(Nt),Eg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(rp(bn),bn=null))),Yf(t,e),bt(e),null;case 5:xg(e);var r=Vr(Ya.current);if(n=e.type,t!==null&&e.stateNode!=null)HE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return bt(e),null}if(t=Vr(Hn.current),mu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Un]=e,i[Ga]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(r=0;r<ua.length;r++)Me(ua[r],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Yy(i,s),Me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Me("invalid",i);break;case"textarea":Jy(i,s),Me("invalid",i)}Tf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&gu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gu(i.textContent,a,t),r=["children",""+a]):Fa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",i)}switch(n){case"input":au(i),Xy(i,s,!0);break;case"textarea":au(i),Zy(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=wc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Un]=e,t[Ga]=i,$E(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sf(n,i),n){case"dialog":Me("cancel",t),Me("close",t),r=i;break;case"iframe":case"object":case"embed":Me("load",t),r=i;break;case"video":case"audio":for(r=0;r<ua.length;r++)Me(ua[r],t);r=i;break;case"source":Me("error",t),r=i;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=i;break;case"details":Me("toggle",t),r=i;break;case"input":Yy(t,i),r=_f(t,i),Me("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Be({},i,{value:void 0}),Me("invalid",t);break;case"textarea":Jy(t,i),r=xf(t,i),Me("invalid",t);break;default:r=i}Tf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ex(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ja(t,l):typeof l=="number"&&ja(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&Jp(t,s,l,o))}switch(n){case"input":au(t),Xy(t,i,!1);break;case"textarea":au(t),Zy(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ur(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?js(t,!!i.multiple,s,!1):i.defaultValue!=null&&js(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)WE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=Vr(Ya.current),Vr(Hn.current),mu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Un]=e,(s=i.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:gu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Un]=e,e.stateNode=i}return bt(e),null;case 13:if(Le(je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&Zt!==null&&e.mode&1&&!(e.flags&128))uE(),Js(),e.flags|=98560,s=!1;else if(s=mu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Un]=e}else Js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),s=!1}else bn!==null&&(rp(bn),bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?at===0&&(at=3):Og())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return eo(),Yf(t,e),t===null&&qa(e.stateNode.containerInfo),bt(e),null;case 10:return yg(e.type._context),bt(e),null;case 17:return Qt(e.type)&&xc(),bt(e),null;case 19:if(Le(je),s=e.memoizedState,s===null)return bt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Yo(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ac(t),o!==null){for(e.flags|=128,Yo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ye()>no&&(e.flags|=128,i=!0,Yo(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ac(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Fe)return bt(e),null}else 2*Ye()-s.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,i=!0,Yo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ye(),e.sibling=null,n=je.current,De(je,i?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Dg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Jt&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function xA(t,e){switch(fg(e),e.tag){case 1:return Qt(e.type)&&xc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),Le(Gt),Le(Nt),Eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xg(e),null;case 13:if(Le(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(je),null;case 4:return eo(),null;case 10:return yg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var vu=!1,Ct=!1,EA=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){He(t,e,i)}else n.current=null}function Xf(t,e,n){try{n()}catch(i){He(t,e,i)}}var z_=!1;function TA(t,e){if(Of=yc,t=Yx(),hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mf={focusedElem:t,selectionRange:n},yc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,T=y.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:Tn(e.type,x),T);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){He(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return y=z_,z_=!1,y}function Ea(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Xf(e,n,s)}r=r.next}while(r!==i)}}function Eh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qE(t){var e=t.alternate;e!==null&&(t.alternate=null,qE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Un],delete e[Ga],delete e[Ff],delete e[sA],delete e[oA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KE(t){return t.tag===5||t.tag===3||t.tag===4}function $_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wc));else if(i!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}function ep(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ep(t,e,n),t=t.sibling;t!==null;)ep(t,e,n),t=t.sibling}var gt=null,Sn=!1;function Pi(t,e,n){for(n=n.child;n!==null;)GE(t,e,n),n=n.sibling}function GE(t,e,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(ph,n)}catch{}switch(n.tag){case 5:Ct||Ms(n,e);case 6:var i=gt,r=Sn;gt=null,Pi(t,e,n),gt=i,Sn=r,gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?Ad(t.parentNode,n):t.nodeType===1&&Ad(t,n),$a(t)):Ad(gt,n.stateNode));break;case 4:i=gt,r=Sn,gt=n.stateNode.containerInfo,Sn=!0,Pi(t,e,n),gt=i,Sn=r;break;case 0:case 11:case 14:case 15:if(!Ct&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xf(n,e,o),r=r.next}while(r!==i)}Pi(t,e,n);break;case 1:if(!Ct&&(Ms(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){He(n,e,a)}Pi(t,e,n);break;case 21:Pi(t,e,n);break;case 22:n.mode&1?(Ct=(i=Ct)||n.memoizedState!==null,Pi(t,e,n),Ct=i):Pi(t,e,n);break;default:Pi(t,e,n)}}function H_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EA),e.forEach(function(i){var r=NA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Sn=!1;break e;case 3:gt=a.stateNode.containerInfo,Sn=!0;break e;case 4:gt=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(gt===null)throw Error($(160));GE(s,o,r),gt=null,Sn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){He(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QE(e,t),e=e.sibling}function QE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),On(t),i&4){try{Ea(3,t,t.return),Eh(3,t)}catch(x){He(t,t.return,x)}try{Ea(5,t,t.return)}catch(x){He(t,t.return,x)}}break;case 1:En(e,t),On(t),i&512&&n!==null&&Ms(n,n.return);break;case 5:if(En(e,t),On(t),i&512&&n!==null&&Ms(n,n.return),t.flags&32){var r=t.stateNode;try{ja(r,"")}catch(x){He(t,t.return,x)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yx(r,s),Sf(a,o);var c=Sf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Ex(r,d):h==="dangerouslySetInnerHTML"?wx(r,d):h==="children"?ja(r,d):Jp(r,h,d,c)}switch(a){case"input":vf(r,s);break;case"textarea":_x(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?js(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?js(r,!!s.multiple,s.defaultValue,!0):js(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ga]=s}catch(x){He(t,t.return,x)}}break;case 6:if(En(e,t),On(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(x){He(t,t.return,x)}}break;case 3:if(En(e,t),On(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(x){He(t,t.return,x)}break;case 4:En(e,t),On(t);break;case 13:En(e,t),On(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Rg=Ye())),i&4&&H_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(c=Ct)||h,En(e,t),Ct=c):En(e,t),On(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(d=Y=h;Y!==null;){switch(p=Y,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ea(4,p,p.return);break;case 1:Ms(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){He(i,n,x)}}break;case 5:Ms(p,p.return);break;case 22:if(p.memoizedState!==null){q_(d);continue}}m!==null?(m.return=p,Y=m):q_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xx("display",o))}catch(x){He(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){He(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:En(e,t),On(t),i&4&&H_(t);break;case 21:break;default:En(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KE(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ja(r,""),i.flags&=-33);var s=$_(t);ep(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=$_(t);Zf(t,a,o);break;default:throw Error($(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SA(t,e,n){Y=t,YE(t)}function YE(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||vu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=vu;var c=Ct;if(vu=o,(Ct=l)&&!c)for(Y=r;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?K_(r):l!==null?(l.return=o,Y=l):K_(r);for(;s!==null;)Y=s,YE(s),s=s.sibling;Y=r,vu=a,Ct=c}W_(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):W_(t)}}function W_(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Eh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ct)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&C_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}C_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&$a(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ct||e.flags&512&&Jf(e)}catch(p){He(e,e.return,p)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function q_(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function K_(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eh(4,e)}catch(l){He(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){He(e,r,l)}}var s=e.return;try{Jf(e)}catch(l){He(e,s,l)}break;case 5:var o=e.return;try{Jf(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var bA=Math.ceil,Rc=bi.ReactCurrentDispatcher,Cg=bi.ReactCurrentOwner,mn=bi.ReactCurrentBatchConfig,Ee=0,ht=null,tt=null,_t=0,Jt=0,Vs=mr(0),at=0,el=null,Qr=0,Th=0,Pg=0,Ta=null,Wt=null,Rg=0,no=1/0,si=null,Nc=!1,tp=null,er=null,wu=!1,$i=null,Dc=0,Sa=0,np=null,Yu=-1,Xu=0;function jt(){return Ee&6?Ye():Yu!==-1?Yu:Yu=Ye()}function tr(t){return t.mode&1?Ee&2&&_t!==0?_t&-_t:lA.transition!==null?(Xu===0&&(Xu=Ox()),Xu):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Bx(t.type)),t):1}function Pn(t,e,n,i){if(50<Sa)throw Sa=0,np=null,Error($(185));wl(t,n,i),(!(Ee&2)||t!==ht)&&(t===ht&&(!(Ee&2)&&(Th|=n),at===4&&Vi(t,_t)),Yt(t,i),n===1&&Ee===0&&!(e.mode&1)&&(no=Ye()+500,vh&&yr()))}function Yt(t,e){var n=t.callbackNode;lk(t,e);var i=mc(t,t===ht?_t:0);if(i===0)n!==null&&n_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&n_(n),e===1)t.tag===0?aA(G_.bind(null,t)):oE(G_.bind(null,t)),iA(function(){!(Ee&6)&&yr()}),n=null;else{switch(Mx(i)){case 1:n=ig;break;case 4:n=Nx;break;case 16:n=gc;break;case 536870912:n=Dx;break;default:n=gc}n=r1(n,XE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XE(t,e){if(Yu=-1,Xu=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var i=mc(t,t===ht?_t:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Oc(t,i);else{e=i;var r=Ee;Ee|=2;var s=ZE();(ht!==t||_t!==e)&&(si=null,no=Ye()+500,Br(t,e));do try{AA();break}catch(a){JE(t,a)}while(!0);mg(),Rc.current=s,Ee=r,tt!==null?e=0:(ht=null,_t=0,e=at)}if(e!==0){if(e===2&&(r=Cf(t),r!==0&&(i=r,e=ip(t,r))),e===1)throw n=el,Br(t,0),Vi(t,i),Yt(t,Ye()),n;if(e===6)Vi(t,i);else{if(r=t.current.alternate,!(i&30)&&!IA(r)&&(e=Oc(t,i),e===2&&(s=Cf(t),s!==0&&(i=s,e=ip(t,s))),e===1))throw n=el,Br(t,0),Vi(t,i),Yt(t,Ye()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:Pr(t,Wt,si);break;case 3:if(Vi(t,i),(i&130023424)===i&&(e=Rg+500-Ye(),10<e)){if(mc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Lf(Pr.bind(null,t,Wt,si),e);break}Pr(t,Wt,si);break;case 4:if(Vi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Cn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ye()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bA(i/1960))-i,10<i){t.timeoutHandle=Lf(Pr.bind(null,t,Wt,si),i);break}Pr(t,Wt,si);break;case 5:Pr(t,Wt,si);break;default:throw Error($(329))}}}return Yt(t,Ye()),t.callbackNode===n?XE.bind(null,t):null}function ip(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Oc(t,e),t!==2&&(e=Wt,Wt=n,e!==null&&rp(e)),t}function rp(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function IA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Nn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~Pg,e&=~Th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),i=1<<n;t[n]=-1,e&=~i}}function G_(t){if(Ee&6)throw Error($(327));Hs();var e=mc(t,0);if(!(e&1))return Yt(t,Ye()),null;var n=Oc(t,e);if(t.tag!==0&&n===2){var i=Cf(t);i!==0&&(e=i,n=ip(t,i))}if(n===1)throw n=el,Br(t,0),Vi(t,e),Yt(t,Ye()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pr(t,Wt,si),Yt(t,Ye()),null}function Ng(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(no=Ye()+500,vh&&yr())}}function Yr(t){$i!==null&&$i.tag===0&&!(Ee&6)&&Hs();var e=Ee;Ee|=1;var n=mn.transition,i=Ce;try{if(mn.transition=null,Ce=1,t)return t()}finally{Ce=i,mn.transition=n,Ee=e,!(Ee&6)&&yr()}}function Dg(){Jt=Vs.current,Le(Vs)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nA(n)),tt!==null)for(n=tt.return;n!==null;){var i=n;switch(fg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xc();break;case 3:eo(),Le(Gt),Le(Nt),Eg();break;case 5:xg(i);break;case 4:eo();break;case 13:Le(je);break;case 19:Le(je);break;case 10:yg(i.type._context);break;case 22:case 23:Dg()}n=n.return}if(ht=t,tt=t=nr(t.current,null),_t=Jt=e,at=0,el=null,Pg=Th=Qr=0,Wt=Ta=null,Mr!==null){for(e=0;e<Mr.length;e++)if(n=Mr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Mr=null}return t}function JE(t,e){do{var n=tt;try{if(mg(),Ku.current=Pc,Cc){for(var i=Ue.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Cc=!1}if(Gr=0,ct=rt=Ue=null,xa=!1,Xa=0,Cg.current=null,n===null||n.return===null){at=1,el=e,tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=M_(o);if(m!==null){m.flags&=-257,V_(m,o,a,s,e),m.mode&1&&O_(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){O_(s,c,e),Og();break e}l=Error($(426))}}else if(Fe&&a.mode&1){var T=M_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),V_(T,o,a,s,e),pg(to(l,a));break e}}s=l=to(l,a),at!==4&&(at=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=ME(s,l,e);A_(s,w);break e;case 1:a=l;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(er===null||!er.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=VE(s,a,e);A_(s,D);break e}}s=s.return}while(s!==null)}t1(n)}catch(O){e=O,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function ZE(){var t=Rc.current;return Rc.current=Pc,t===null?Pc:t}function Og(){(at===0||at===3||at===2)&&(at=4),ht===null||!(Qr&268435455)&&!(Th&268435455)||Vi(ht,_t)}function Oc(t,e){var n=Ee;Ee|=2;var i=ZE();(ht!==t||_t!==e)&&(si=null,Br(t,e));do try{kA();break}catch(r){JE(t,r)}while(!0);if(mg(),Ee=n,Rc.current=i,tt!==null)throw Error($(261));return ht=null,_t=0,at}function kA(){for(;tt!==null;)e1(tt)}function AA(){for(;tt!==null&&!ZI();)e1(tt)}function e1(t){var e=i1(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,e===null?t1(t):tt=e,Cg.current=null}function t1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xA(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,tt=null;return}}else if(n=wA(n,e,Jt),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);at===0&&(at=5)}function Pr(t,e,n){var i=Ce,r=mn.transition;try{mn.transition=null,Ce=1,CA(t,e,n,i)}finally{mn.transition=r,Ce=i}return null}function CA(t,e,n,i){do Hs();while($i!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(uk(t,s),t===ht&&(tt=ht=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wu||(wu=!0,r1(gc,function(){return Hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Ce;Ce=1;var a=Ee;Ee|=4,Cg.current=null,TA(t,n),QE(n,t),Qk(Mf),yc=!!Of,Mf=Of=null,t.current=n,SA(n),ek(),Ee=a,Ce=o,mn.transition=s}else t.current=n;if(wu&&(wu=!1,$i=t,Dc=r),s=t.pendingLanes,s===0&&(er=null),ik(n.stateNode),Yt(t,Ye()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Nc)throw Nc=!1,t=tp,tp=null,t;return Dc&1&&t.tag!==0&&Hs(),s=t.pendingLanes,s&1?t===np?Sa++:(Sa=0,np=t):Sa=0,yr(),null}function Hs(){if($i!==null){var t=Mx(Dc),e=mn.transition,n=Ce;try{if(mn.transition=null,Ce=16>t?16:t,$i===null)var i=!1;else{if(t=$i,$i=null,Dc=0,Ee&6)throw Error($(331));var r=Ee;for(Ee|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Ea(8,h,s)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var p=h.sibling,m=h.return;if(qE(h),h===c){Y=null;break}if(p!==null){p.return=m,Y=p;break}Y=m}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Y=w;break e}Y=s.return}}var v=t.current;for(Y=v;Y!==null;){o=Y;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Y=I;else e:for(o=v;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Eh(9,a)}}catch(O){He(a,a.return,O)}if(a===o){Y=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,Y=D;break e}Y=a.return}}if(Ee=r,yr(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(ph,t)}catch{}i=!0}return i}finally{Ce=n,mn.transition=e}}return!1}function Q_(t,e,n){e=to(n,e),e=ME(t,e,1),t=Zi(t,e,1),e=jt(),t!==null&&(wl(t,1,e),Yt(t,e))}function He(t,e,n){if(t.tag===3)Q_(t,t,n);else for(;e!==null;){if(e.tag===3){Q_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(er===null||!er.has(i))){t=to(n,t),t=VE(e,t,1),e=Zi(e,t,1),t=jt(),e!==null&&(wl(e,1,t),Yt(e,t));break}}e=e.return}}function PA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(_t&n)===n&&(at===4||at===3&&(_t&130023424)===_t&&500>Ye()-Rg?Br(t,0):Pg|=n),Yt(t,e)}function n1(t,e){e===0&&(t.mode&1?(e=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):e=1);var n=jt();t=yi(t,e),t!==null&&(wl(t,e,n),Yt(t,n))}function RA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n1(t,n)}function NA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),n1(t,n)}var i1;i1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,vA(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Fe&&e.flags&1048576&&aE(e,Sc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Qu(t,e),t=e.pendingProps;var r=Xs(e,Nt.current);$s(e,n),r=Sg(null,e,i,t,r,n);var s=bg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(i)?(s=!0,Ec(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vg(e),r.updater=xh,e.stateNode=r,r._reactInternals=e,Hf(e,i,t,n),e=Kf(null,e,i,!0,s,n)):(e.tag=0,Fe&&s&&dg(e),Lt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Qu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=OA(i),t=Tn(i,t),r){case 0:e=qf(null,e,i,t,n);break e;case 1:e=j_(null,e,i,t,n);break e;case 11:e=L_(null,e,i,t,n);break e;case 14:e=F_(null,e,i,Tn(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Tn(i,r),qf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Tn(i,r),j_(t,e,i,r,n);case 3:e:{if(UE(e),t===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,fE(t,e),kc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=to(Error($(423)),e),e=U_(t,e,i,n,r);break e}else if(i!==r){r=to(Error($(424)),e),e=U_(t,e,i,n,r);break e}else for(Zt=Ji(e.stateNode.containerInfo.firstChild),en=e,Fe=!0,bn=null,n=hE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Js(),i===r){e=_i(t,e,n);break e}Lt(t,e,i,n)}e=e.child}return e;case 5:return pE(e),t===null&&Bf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Vf(i,r)?o=null:s!==null&&Vf(i,s)&&(e.flags|=32),jE(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&Bf(e),null;case 13:return BE(t,e,n);case 4:return wg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Zs(e,null,i,n):Lt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Tn(i,r),L_(t,e,i,r,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,De(bc,i._currentValue),i._currentValue=o,s!==null)if(Nn(s.value,o)){if(s.children===r.children&&!Gt.current){e=_i(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=fi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,$s(e,n),r=_n(r),i=i(r),e.flags|=1,Lt(t,e,i,n),e.child;case 14:return i=e.type,r=Tn(i,e.pendingProps),r=Tn(i.type,r),F_(t,e,i,r,n);case 15:return LE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Tn(i,r),Qu(t,e),e.tag=1,Qt(i)?(t=!0,Ec(e)):t=!1,$s(e,n),OE(e,i,r),Hf(e,i,r,n),Kf(null,e,i,!0,t,n);case 19:return zE(t,e,n);case 22:return FE(t,e,n)}throw Error($(156,e.tag))};function r1(t,e){return Rx(t,e)}function DA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,i){return new DA(t,e,n,i)}function Mg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OA(t){if(typeof t=="function")return Mg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eg)return 11;if(t===tg)return 14}return 2}function nr(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ju(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Mg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return zr(n.children,r,s,e);case Zp:o=8,r|=8;break;case pf:return t=fn(12,n,e,r|2),t.elementType=pf,t.lanes=s,t;case gf:return t=fn(13,n,e,r),t.elementType=gf,t.lanes=s,t;case mf:return t=fn(19,n,e,r),t.elementType=mf,t.lanes=s,t;case px:return Sh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dx:o=10;break e;case fx:o=9;break e;case eg:o=11;break e;case tg:o=14;break e;case Di:o=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=fn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function zr(t,e,n,i){return t=fn(7,t,i,e),t.lanes=n,t}function Sh(t,e,n,i){return t=fn(22,t,i,e),t.elementType=px,t.lanes=n,t.stateNode={isHidden:!1},t}function Vd(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function Ld(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vg(t,e,n,i,r,s,o,a,l){return t=new MA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vg(s),t}function VA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function s1(t){if(!t)return cr;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Qt(n))return sE(t,n,e)}return e}function o1(t,e,n,i,r,s,o,a,l){return t=Vg(n,i,!0,t,r,s,o,a,l),t.context=s1(null),n=t.current,i=jt(),r=tr(n),s=fi(i,r),s.callback=e??null,Zi(n,s,r),t.current.lanes=r,wl(t,r,i),Yt(t,i),t}function bh(t,e,n,i){var r=e.current,s=jt(),o=tr(r);return n=s1(n),e.context===null?e.context=n:e.pendingContext=n,e=fi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Zi(r,e,o),t!==null&&(Pn(t,r,o,s),qu(t,r,o)),o}function Mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lg(t,e){Y_(t,e),(t=t.alternate)&&Y_(t,e)}function LA(){return null}var a1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fg(t){this._internalRoot=t}Ih.prototype.render=Fg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));bh(t,e,null,null)};Ih.prototype.unmount=Fg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){bh(null,t,null,null)}),e[mi]=null}};function Ih(t){this._internalRoot=t}Ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mi.length&&e!==0&&e<Mi[n].priority;n++);Mi.splice(n,0,t),n===0&&Ux(t)}};function jg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X_(){}function FA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Mc(o);s.call(c)}}var o=o1(e,i,t,0,null,!1,!1,"",X_);return t._reactRootContainer=o,t[mi]=o.current,qa(t.nodeType===8?t.parentNode:t),Yr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Mc(l);a.call(c)}}var l=Vg(t,0,!1,null,null,!1,!1,"",X_);return t._reactRootContainer=l,t[mi]=l.current,qa(t.nodeType===8?t.parentNode:t),Yr(function(){bh(e,l,n,i)}),l}function Ah(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Mc(o);a.call(l)}}bh(e,o,t,r)}else o=FA(n,e,t,r,i);return Mc(o)}Vx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=la(e.pendingLanes);n!==0&&(rg(e,n|1),Yt(e,Ye()),!(Ee&6)&&(no=Ye()+500,yr()))}break;case 13:Yr(function(){var i=yi(t,1);if(i!==null){var r=jt();Pn(i,t,1,r)}}),Lg(t,1)}};sg=function(t){if(t.tag===13){var e=yi(t,134217728);if(e!==null){var n=jt();Pn(e,t,134217728,n)}Lg(t,134217728)}};Lx=function(t){if(t.tag===13){var e=tr(t),n=yi(t,e);if(n!==null){var i=jt();Pn(n,t,e,i)}Lg(t,e)}};Fx=function(){return Ce};jx=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};If=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=_h(i);if(!r)throw Error($(90));mx(i),vf(i,r)}}}break;case"textarea":_x(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};bx=Ng;Ix=Yr;var jA={usingClientEntryPoint:!1,Events:[El,Ps,_h,Tx,Sx,Ng]},Xo={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UA={bundleType:Xo.bundleType,version:Xo.version,rendererPackageName:Xo.rendererPackageName,rendererConfig:Xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cx(t),t===null?null:t.stateNode},findFiberByHostInstance:Xo.findFiberByHostInstance||LA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{ph=xu.inject(UA),$n=xu}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jA;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jg(e))throw Error($(200));return VA(t,e,null,n)};nn.createRoot=function(t,e){if(!jg(t))throw Error($(299));var n=!1,i="",r=a1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Vg(t,1,!1,null,null,n,!1,i,r),t[mi]=e.current,qa(t.nodeType===8?t.parentNode:t),new Fg(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Cx(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return Yr(t)};nn.hydrate=function(t,e,n){if(!kh(e))throw Error($(200));return Ah(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!jg(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=a1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=o1(e,null,t,1,n??null,r,!1,s,o),t[mi]=e.current,qa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ih(e)};nn.render=function(t,e,n){if(!kh(e))throw Error($(200));return Ah(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!kh(t))throw Error($(40));return t._reactRootContainer?(Yr(function(){Ah(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};nn.unstable_batchedUpdates=Ng;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!kh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Ah(t,e,n,!1,i)};nn.version="18.3.1-next-f1338f8080-20240426";function l1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l1)}catch(t){console.error(t)}}l1(),lx.exports=nn;var BA=lx.exports,J_=BA;df.createRoot=J_.createRoot,df.hydrateRoot=J_.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tl.apply(this,arguments)}var Hi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hi||(Hi={}));const Z_="popstate";function zA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return sp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Vc(r)}return HA(e,n,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function u1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $A(){return Math.random().toString(36).substr(2,8)}function ev(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,i){return n===void 0&&(n=null),tl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wo(e):e,{state:n,key:e&&e.key||i||$A()})}function Vc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function wo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function HA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Hi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(tl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Hi.Pop;let T=h(),w=T==null?null:T-c;c=T,l&&l({action:a,location:x.location,delta:w})}function p(T,w){a=Hi.Push;let v=sp(x.location,T,w);c=h()+1;let I=ev(v,c),D=x.createHref(v);try{o.pushState(I,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;r.location.assign(D)}s&&l&&l({action:a,location:x.location,delta:1})}function m(T,w){a=Hi.Replace;let v=sp(x.location,T,w);c=h();let I=ev(v,c),D=x.createHref(v);o.replaceState(I,"",D),s&&l&&l({action:a,location:x.location,delta:0})}function y(T){let w=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof T=="string"?T:Vc(T);return v=v.replace(/ $/,"%20"),nt(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let x={get action(){return a},get location(){return t(r,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Z_,d),l=T,()=>{r.removeEventListener(Z_,d),l=null}},createHref(T){return e(r,T)},createURL:y,encodeLocation(T){let w=y(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(T){return o.go(T)}};return x}var tv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tv||(tv={}));function WA(t,e,n){return n===void 0&&(n="/"),qA(t,e,n,!1)}function qA(t,e,n,i){let r=typeof e=="string"?wo(e):e,s=Ug(r.pathname||"/",n);if(s==null)return null;let o=c1(t);KA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=rC(s);a=nC(o[l],c,i)}return a}function c1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(nt(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ir([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(nt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),c1(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:eC(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of h1(s.path))r(s,o,l)}),e}function h1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=h1(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function KA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const GA=/^:[\w-]+$/,QA=3,YA=2,XA=1,JA=10,ZA=-2,nv=t=>t==="*";function eC(t,e){let n=t.split("/"),i=n.length;return n.some(nv)&&(i+=ZA),e&&(i+=YA),n.filter(r=>!nv(r)).reduce((r,s)=>r+(GA.test(s)?QA:s===""?XA:JA),i)}function tC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function nC(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=iv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=iv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:ir([s,d.pathname]),pathnameBase:lC(ir([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ir([s,d.pathnameBase]))}return o}function iv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=iC(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function iC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),u1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function rC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return u1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ug(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function sC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?wo(t):t;return{pathname:n?n.startsWith("/")?n:oC(n,e):e,search:uC(i),hash:cC(r)}}function oC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Fd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function d1(t,e){let n=aC(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function f1(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=wo(t):(r=tl({},t),nt(!r.pathname||!r.pathname.includes("?"),Fd("?","pathname","search",r)),nt(!r.pathname||!r.pathname.includes("#"),Fd("#","pathname","hash",r)),nt(!r.search||!r.search.includes("#"),Fd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=sC(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ir=t=>t.join("/").replace(/\/\/+/g,"/"),lC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const p1=["post","put","patch","delete"];new Set(p1);const dC=["get",...p1];new Set(dC);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nl.apply(this,arguments)}const Bg=B.createContext(null),fC=B.createContext(null),ss=B.createContext(null),Ch=B.createContext(null),_r=B.createContext({outlet:null,matches:[],isDataRoute:!1}),g1=B.createContext(null);function pC(t,e){let{relative:n}=e===void 0?{}:e;Sl()||nt(!1);let{basename:i,navigator:r}=B.useContext(ss),{hash:s,pathname:o,search:a}=y1(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:ir([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Sl(){return B.useContext(Ch)!=null}function bl(){return Sl()||nt(!1),B.useContext(Ch).location}function m1(t){B.useContext(ss).static||B.useLayoutEffect(t)}function gC(){let{isDataRoute:t}=B.useContext(_r);return t?PC():mC()}function mC(){Sl()||nt(!1);let t=B.useContext(Bg),{basename:e,future:n,navigator:i}=B.useContext(ss),{matches:r}=B.useContext(_r),{pathname:s}=bl(),o=JSON.stringify(d1(r,n.v7_relativeSplatPath)),a=B.useRef(!1);return m1(()=>{a.current=!0}),B.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=f1(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ir([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}const yC=B.createContext(null);function _C(t){let e=B.useContext(_r).outlet;return e&&B.createElement(yC.Provider,{value:t},e)}function y1(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=B.useContext(ss),{matches:r}=B.useContext(_r),{pathname:s}=bl(),o=JSON.stringify(d1(r,i.v7_relativeSplatPath));return B.useMemo(()=>f1(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function vC(t,e){return wC(t,e)}function wC(t,e,n,i){Sl()||nt(!1);let{navigator:r}=B.useContext(ss),{matches:s}=B.useContext(_r),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=bl(),h;if(e){var d;let T=typeof e=="string"?wo(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||nt(!1),h=T}else h=c;let p=h.pathname||"/",m=p;if(l!=="/"){let T=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let y=WA(t,{pathname:m}),x=bC(y&&y.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ir([l,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ir([l,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,i);return e&&x?B.createElement(Ch.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Hi.Pop}},x):x}function xC(){let t=CC(),e=hC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:r},n):null,null)}const EC=B.createElement(xC,null);class TC extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?B.createElement(_r.Provider,{value:this.props.routeContext},B.createElement(g1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SC(t){let{routeContext:e,match:n,children:i}=t,r=B.useContext(Bg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(_r.Provider,{value:e},i)}function bC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||nt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let m,y=!1,x=null,T=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||EC,l&&(c<0&&p===0?(y=!0,T=null):c===p&&(y=!0,T=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let I;return m?I=x:y?I=T:d.route.Component?I=B.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=h,B.createElement(SC,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:I})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?B.createElement(TC,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var _1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_1||{}),Lc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lc||{});function IC(t){let e=B.useContext(Bg);return e||nt(!1),e}function kC(t){let e=B.useContext(fC);return e||nt(!1),e}function AC(t){let e=B.useContext(_r);return e||nt(!1),e}function v1(t){let e=AC(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function CC(){var t;let e=B.useContext(g1),n=kC(Lc.UseRouteError),i=v1(Lc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function PC(){let{router:t}=IC(_1.UseNavigateStable),e=v1(Lc.UseNavigateStable),n=B.useRef(!1);return m1(()=>{n.current=!0}),B.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,nl({fromRouteId:e},s)))},[t,e])}const rv={};function RC(t,e){rv[e]||(rv[e]=!0,console.warn(e))}const sv=(t,e,n)=>RC(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function NC(t,e){t!=null&&t.v7_startTransition||sv("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&sv("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function DC(t){return _C(t.context)}function xs(t){nt(!1)}function OC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Hi.Pop,navigator:s,static:o=!1,future:a}=t;Sl()&&nt(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:nl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=wo(i));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:y="default"}=i,x=B.useMemo(()=>{let T=Ug(h,l);return T==null?null:{location:{pathname:T,search:d,hash:p,state:m,key:y},navigationType:r}},[l,h,d,p,m,y,r]);return x==null?null:B.createElement(ss.Provider,{value:c},B.createElement(Ch.Provider,{children:n,value:x}))}function MC(t){let{children:e,location:n}=t;return vC(op(e),n)}new Promise(()=>{});function op(t,e){e===void 0&&(e=[]);let n=[];return B.Children.forEach(t,(i,r)=>{if(!B.isValidElement(i))return;let s=[...e,r];if(i.type===B.Fragment){n.push.apply(n,op(i.props.children,s));return}i.type!==xs&&nt(!1),!i.props.index||!i.props.children||nt(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=op(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ap.apply(this,arguments)}function VC(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function LC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FC(t,e){return t.button===0&&(!e||e==="_self")&&!LC(t)}const jC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UC="6";try{window.__reactRouterVersion=UC}catch{}const BC="startTransition",ov=PI[BC];function zC(t){let{basename:e,children:n,future:i,window:r}=t,s=B.useRef();s.current==null&&(s.current=zA({window:r,v5Compat:!0}));let o=s.current,[a,l]=B.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=B.useCallback(d=>{c&&ov?ov(()=>l(d)):l(d)},[l,c]);return B.useLayoutEffect(()=>o.listen(h),[o,h]),B.useEffect(()=>NC(i),[i]),B.createElement(OC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const $C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w1=B.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=VC(e,jC),{basename:m}=B.useContext(ss),y,x=!1;if(typeof c=="string"&&HC.test(c)&&(y=c,$C))try{let I=new URL(window.location.href),D=c.startsWith("//")?new URL(I.protocol+c):new URL(c),O=Ug(D.pathname,m);D.origin===I.origin&&O!=null?c=O+D.search+D.hash:x=!0}catch{}let T=pC(c,{relative:r}),w=WC(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function v(I){i&&i(I),I.defaultPrevented||w(I)}return B.createElement("a",ap({},p,{href:y||T,onClick:x||s?i:v,ref:n,target:l}))});var av;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(av||(av={}));var lv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lv||(lv={}));function WC(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=gC(),c=bl(),h=y1(t,{relative:o});return B.useCallback(d=>{if(FC(d,n)){d.preventDefault();let p=i!==void 0?i:Vc(c)===Vc(h);l(t,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function qC({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const x1=B.forwardRef(qC);function KC({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const GC=B.forwardRef(KC);function QC({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const YC=B.forwardRef(QC),XC=[{name:"Dashboard",href:"/",icon:GC},{name:"Branding",href:"/branding",icon:YC},{name:"Retirement Tax Calculator",href:"/calculator/retirement-tax",icon:x1}];function JC(){const t=bl();return C.jsx("div",{className:"min-h-screen bg-gray-100",children:C.jsxs("div",{className:"flex h-screen",children:[C.jsxs("div",{className:"w-64 bg-white shadow-md flex flex-col",children:[C.jsx("div",{className:"p-4",children:C.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Elite Advisor Tools"})}),C.jsx("nav",{className:"mt-4 flex-1",children:XC.map(e=>{const n=t.pathname===e.href;return C.jsxs(w1,{to:e.href,className:`flex items-center px-4 py-2 text-sm font-medium ${n?"bg-gray-100 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[C.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]}),C.jsx("div",{className:"flex-1 overflow-auto",children:C.jsx("main",{className:"p-8",children:C.jsx(DC,{})})})]})})}const ZC=[{id:"retirement-tax",name:"Retirement Tax Calculator",description:"Compare tax implications of qualified accounts vs Roth conversion strategies.",path:"/calculator/retirement-tax",icon:x1,embedCode:`<iframe 
  src="${window.location.origin}/embed/calculator/retirement-tax" 
  width="100%" 
  height="800" 
  style="border: none; border-radius: 8px; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);"
  title="Retirement Tax Calculator"
></iframe>`}];function uv(){const[t,e]=B.useState(null),n=(i,r)=>{navigator.clipboard.writeText(r),e(i),setTimeout(()=>e(null),2e3)};return C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ZC.map(i=>C.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[C.jsxs("div",{className:"flex items-center mb-4",children:[C.jsx(i.icon,{className:"h-6 w-6 text-blue-600 mr-2"}),C.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:i.name})]}),C.jsx("p",{className:"text-gray-600",children:i.description}),C.jsxs("div",{className:"space-y-4 pt-4",children:[C.jsx(w1,{to:i.path,className:"block w-full text-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Open Calculator"}),C.jsx("div",{className:"relative",children:C.jsx("button",{onClick:()=>n(i.id,i.embedCode),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:t===i.id?"Copied!":"Copy Embed Code"})})]})]},i.id))})]})}var Il=t=>t.type==="checkbox",Lr=t=>t instanceof Date,Ft=t=>t==null;const E1=t=>typeof t=="object";var Je=t=>!Ft(t)&&!Array.isArray(t)&&E1(t)&&!Lr(t),T1=t=>Je(t)&&t.target?Il(t.target)?t.target.checked:t.target.value:t,eP=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,S1=(t,e)=>t.has(eP(e)),tP=t=>{const e=t.constructor&&t.constructor.prototype;return Je(e)&&e.hasOwnProperty("isPrototypeOf")},zg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $t(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(zg&&(t instanceof Blob||t instanceof FileList))&&(n||Je(t)))if(e=n?[]:{},!n&&!tP(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=$t(t[i]));else return t;return e}var Ph=t=>Array.isArray(t)?t.filter(Boolean):[],We=t=>t===void 0,G=(t,e,n)=>{if(!e||!Je(t))return n;const i=Ph(e.split(/[,[\].]+?/)).reduce((r,s)=>Ft(r)?r:r[s],t);return We(i)||i===t?We(t[e])?n:t[e]:i},un=t=>typeof t=="boolean",$g=t=>/^\w*$/.test(t),b1=t=>Ph(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ne=(t,e,n)=>{let i=-1;const r=$g(e)?[e]:b1(e),s=r.length,o=s-1;for(;++i<s;){const a=r[i];let l=n;if(i!==o){const c=t[a];l=Je(c)||Array.isArray(c)?c:isNaN(+r[i+1])?{}:[]}if(a==="__proto__")return;t[a]=l,t=t[a]}return t};const Fc={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},In={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nP=be.createContext(null),Hg=()=>be.useContext(nP);var I1=(t,e,n,i=!0)=>{const r={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(r,s,{get:()=>{const o=s;return e._proxyFormState[o]!==In.all&&(e._proxyFormState[o]=!i||In.all),n&&(n[o]=!0),t[o]}});return r},Ht=t=>Je(t)&&!Object.keys(t).length,k1=(t,e,n,i)=>{n(t);const{name:r,...s}=t;return Ht(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!i||In.all))},ba=t=>Array.isArray(t)?t:[t],A1=(t,e,n)=>!t||!e||t===e||ba(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i)));function Wg(t){const e=be.useRef(t);e.current=t,be.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function iP(t){const e=Hg(),{control:n=e.control,disabled:i,name:r,exact:s}=t||{},[o,a]=be.useState(n._formState),l=be.useRef(!0),c=be.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=be.useRef(r);return h.current=r,Wg({disabled:i,next:d=>l.current&&A1(h.current,d.name,s)&&k1(d,c.current,n._updateFormState)&&a({...n._formState,...d}),subject:n._subjects.state}),be.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),I1(o,n,c.current,!1)}var zn=t=>typeof t=="string",C1=(t,e,n,i,r)=>zn(t)?(i&&e.watch.add(t),G(n,t,r)):Array.isArray(t)?t.map(s=>(i&&e.watch.add(s),G(n,s))):(i&&(e.watchAll=!0),n);function rP(t){const e=Hg(),{control:n=e.control,name:i,defaultValue:r,disabled:s,exact:o}=t||{},a=be.useRef(i);a.current=i,Wg({disabled:s,subject:n._subjects.values,next:h=>{A1(a.current,h.name,o)&&c($t(C1(a.current,n._names,h.values||n._formValues,!1,r)))}});const[l,c]=be.useState(n._getWatch(i,r));return be.useEffect(()=>n._removeUnmounted()),l}function sP(t){const e=Hg(),{name:n,disabled:i,control:r=e.control,shouldUnregister:s}=t,o=S1(r._names.array,n),a=rP({control:r,name:n,defaultValue:G(r._formValues,n,G(r._defaultValues,n,t.defaultValue)),exact:!0}),l=iP({control:r,name:n,exact:!0}),c=be.useRef(r.register(n,{...t.rules,value:a,...un(t.disabled)?{disabled:t.disabled}:{}}));return be.useEffect(()=>{const h=r._options.shouldUnregister||s,d=(p,m)=>{const y=G(r._fields,p);y&&y._f&&(y._f.mount=m)};if(d(n,!0),h){const p=$t(G(r._options.defaultValues,n));Ne(r._defaultValues,n,p),We(G(r._formValues,n))&&Ne(r._formValues,n,p)}return()=>{(o?h&&!r._state.action:h)?r.unregister(n):d(n,!1)}},[n,r,o,s]),be.useEffect(()=>{G(r._fields,n)&&r._updateDisabledField({disabled:i,fields:r._fields,name:n,value:G(r._fields,n)._f.value})},[i,n,r]),{field:{name:n,value:a,...un(i)||l.disabled?{disabled:l.disabled||i}:{},onChange:be.useCallback(h=>c.current.onChange({target:{value:T1(h),name:n},type:Fc.CHANGE}),[n]),onBlur:be.useCallback(()=>c.current.onBlur({target:{value:G(r._formValues,n),name:n},type:Fc.BLUR}),[n,r]),ref:be.useCallback(h=>{const d=G(r._fields,n);d&&h&&(d._f.ref={focus:()=>h.focus(),select:()=>h.select(),setCustomValidity:p=>h.setCustomValidity(p),reportValidity:()=>h.reportValidity()})},[r._fields,n])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!G(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!G(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!G(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!G(l.validatingFields,n)},error:{enumerable:!0,get:()=>G(l.errors,n)}})}}const jd=t=>t.render(sP(t));var oP=(t,e,n,i,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:r||!0}}:{},cv=t=>({isOnSubmit:!t||t===In.onSubmit,isOnBlur:t===In.onBlur,isOnChange:t===In.onChange,isOnAll:t===In.all,isOnTouch:t===In.onTouched}),hv=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const Ia=(t,e,n,i)=>{for(const r of n||Object.keys(t)){const s=G(t,r);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],r)&&!i)return!0;if(o.ref&&e(o.ref,o.name)&&!i)return!0;if(Ia(a,e))break}else if(Je(a)&&Ia(a,e))break}}};var aP=(t,e,n)=>{const i=ba(G(t,n));return Ne(i,"root",e[n]),Ne(t,n,i),t},qg=t=>t.type==="file",Bn=t=>typeof t=="function",jc=t=>{if(!zg)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Zu=t=>zn(t),Kg=t=>t.type==="radio",Uc=t=>t instanceof RegExp;const dv={value:!1,isValid:!1},fv={value:!0,isValid:!0};var P1=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!We(t[0].attributes.value)?We(t[0].value)||t[0].value===""?fv:{value:t[0].value,isValid:!0}:fv:dv}return dv};const pv={isValid:!1,value:null};var R1=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,pv):pv;function gv(t,e,n="validate"){if(Zu(t)||Array.isArray(t)&&t.every(Zu)||un(t)&&!t)return{type:n,message:Zu(t)?t:"",ref:e}}var vs=t=>Je(t)&&!Uc(t)?t:{value:t,message:""},mv=async(t,e,n,i,r)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:c,min:h,max:d,pattern:p,validate:m,name:y,valueAsNumber:x,mount:T,disabled:w}=t._f,v=G(e,y);if(!T||w)return{};const I=o?o[0]:s,D=P=>{i&&I.reportValidity&&(I.setCustomValidity(un(P)?"":P||""),I.reportValidity())},O={},L=Kg(s),S=Il(s),_=L||S,b=(x||qg(s))&&We(s.value)&&We(v)||jc(s)&&s.value===""||v===""||Array.isArray(v)&&!v.length,A=oP.bind(null,y,n,O),R=(P,k,le,ie=Zn.maxLength,pe=Zn.minLength)=>{const ge=P?k:le;O[y]={type:P?ie:pe,message:ge,ref:s,...A(P?ie:pe,ge)}};if(r?!Array.isArray(v)||!v.length:a&&(!_&&(b||Ft(v))||un(v)&&!v||S&&!P1(o).isValid||L&&!R1(o).isValid)){const{value:P,message:k}=Zu(a)?{value:!!a,message:a}:vs(a);if(P&&(O[y]={type:Zn.required,message:k,ref:I,...A(Zn.required,k)},!n))return D(k),O}if(!b&&(!Ft(h)||!Ft(d))){let P,k;const le=vs(d),ie=vs(h);if(!Ft(v)&&!isNaN(v)){const pe=s.valueAsNumber||v&&+v;Ft(le.value)||(P=pe>le.value),Ft(ie.value)||(k=pe<ie.value)}else{const pe=s.valueAsDate||new Date(v),ge=ee=>new Date(new Date().toDateString()+" "+ee),W=s.type=="time",J=s.type=="week";zn(le.value)&&v&&(P=W?ge(v)>ge(le.value):J?v>le.value:pe>new Date(le.value)),zn(ie.value)&&v&&(k=W?ge(v)<ge(ie.value):J?v<ie.value:pe<new Date(ie.value))}if((P||k)&&(R(!!P,le.message,ie.message,Zn.max,Zn.min),!n))return D(O[y].message),O}if((l||c)&&!b&&(zn(v)||r&&Array.isArray(v))){const P=vs(l),k=vs(c),le=!Ft(P.value)&&v.length>+P.value,ie=!Ft(k.value)&&v.length<+k.value;if((le||ie)&&(R(le,P.message,k.message),!n))return D(O[y].message),O}if(p&&!b&&zn(v)){const{value:P,message:k}=vs(p);if(Uc(P)&&!v.match(P)&&(O[y]={type:Zn.pattern,message:k,ref:s,...A(Zn.pattern,k)},!n))return D(k),O}if(m){if(Bn(m)){const P=await m(v,e),k=gv(P,I);if(k&&(O[y]={...k,...A(Zn.validate,k.message)},!n))return D(k.message),O}else if(Je(m)){let P={};for(const k in m){if(!Ht(P)&&!n)break;const le=gv(await m[k](v,e),I,k);le&&(P={...le,...A(k,le.message)},D(le.message),n&&(O[y]=P))}if(!Ht(P)&&(O[y]={ref:I,...P},!n))return O}}return D(!0),O};function lP(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=We(t)?i++:t[e[i++]];return t}function uP(t){for(const e in t)if(t.hasOwnProperty(e)&&!We(t[e]))return!1;return!0}function it(t,e){const n=Array.isArray(e)?e:$g(e)?[e]:b1(e),i=n.length===1?t:lP(t,n),r=n.length-1,s=n[r];return i&&delete i[s],r!==0&&(Je(i)&&Ht(i)||Array.isArray(i)&&uP(i))&&it(t,n.slice(0,-1)),t}var Ud=()=>{let t=[];return{get observers(){return t},next:r=>{for(const s of t)s.next&&s.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(s=>s!==r)}}),unsubscribe:()=>{t=[]}}},lp=t=>Ft(t)||!E1(t);function Li(t,e){if(lp(t)||lp(e))return t===e;if(Lr(t)&&Lr(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const r of n){const s=t[r];if(!i.includes(r))return!1;if(r!=="ref"){const o=e[r];if(Lr(s)&&Lr(o)||Je(s)&&Je(o)||Array.isArray(s)&&Array.isArray(o)?!Li(s,o):s!==o)return!1}}return!0}var N1=t=>t.type==="select-multiple",cP=t=>Kg(t)||Il(t),Bd=t=>jc(t)&&t.isConnected,D1=t=>{for(const e in t)if(Bn(t[e]))return!0;return!1};function Bc(t,e={}){const n=Array.isArray(t);if(Je(t)||n)for(const i in t)Array.isArray(t[i])||Je(t[i])&&!D1(t[i])?(e[i]=Array.isArray(t[i])?[]:{},Bc(t[i],e[i])):Ft(t[i])||(e[i]=!0);return e}function O1(t,e,n){const i=Array.isArray(t);if(Je(t)||i)for(const r in t)Array.isArray(t[r])||Je(t[r])&&!D1(t[r])?We(e)||lp(n[r])?n[r]=Array.isArray(t[r])?Bc(t[r],[]):{...Bc(t[r])}:O1(t[r],Ft(e)?{}:e[r],n[r]):n[r]=!Li(t[r],e[r]);return n}var Jo=(t,e)=>O1(t,e,Bc(e)),M1=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>We(t)?t:e?t===""?NaN:t&&+t:n&&zn(t)?new Date(t):i?i(t):t;function zd(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return qg(e)?e.files:Kg(e)?R1(t.refs).value:N1(e)?[...e.selectedOptions].map(({value:n})=>n):Il(e)?P1(t.refs).value:M1(We(e.value)?t.ref.value:e.value,t)}var hP=(t,e,n,i)=>{const r={};for(const s of t){const o=G(e,s);o&&Ne(r,s,o._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:i}},Zo=t=>We(t)?t:Uc(t)?t.source:Je(t)?Uc(t.value)?t.value.source:t.value:t;const yv="AsyncFunction";var dP=t=>(!t||!t.validate)&&!!(Bn(t.validate)&&t.validate.constructor.name===yv||Je(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===yv)),fP=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function _v(t,e,n){const i=G(t,n);if(i||$g(n))return{error:i,name:n};const r=n.split(".");for(;r.length;){const s=r.join("."),o=G(e,s),a=G(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};r.pop()}return{name:n}}var pP=(t,e,n,i,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?i.isOnBlur:r.isOnBlur)?!t:(n?i.isOnChange:r.isOnChange)?t:!0,gP=(t,e)=>!Ph(G(t,e)).length&&it(t,e);const mP={mode:In.onSubmit,reValidateMode:In.onChange,shouldFocusError:!0};function yP(t={}){let e={...mP,...t},n={submitCount:0,isDirty:!1,isLoading:Bn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},r=Je(e.defaultValues)||Je(e.values)?$t(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:$t(r),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:Ud(),array:Ud(),state:Ud()},p=cv(e.mode),m=cv(e.reValidateMode),y=e.criteriaMode===In.all,x=N=>V=>{clearTimeout(c),c=setTimeout(N,V)},T=async N=>{if(!e.disabled&&(h.isValid||N)){const V=e.resolver?Ht((await _()).errors):await A(i,!0);V!==n.isValid&&d.state.next({isValid:V})}},w=(N,V)=>{!e.disabled&&(h.isValidating||h.validatingFields)&&((N||Array.from(a.mount)).forEach(j=>{j&&(V?Ne(n.validatingFields,j,V):it(n.validatingFields,j))}),d.state.next({validatingFields:n.validatingFields,isValidating:!Ht(n.validatingFields)}))},v=(N,V=[],j,Q,K=!0,H=!0)=>{if(Q&&j&&!e.disabled){if(o.action=!0,H&&Array.isArray(G(i,N))){const Z=j(G(i,N),Q.argA,Q.argB);K&&Ne(i,N,Z)}if(H&&Array.isArray(G(n.errors,N))){const Z=j(G(n.errors,N),Q.argA,Q.argB);K&&Ne(n.errors,N,Z),gP(n.errors,N)}if(h.touchedFields&&H&&Array.isArray(G(n.touchedFields,N))){const Z=j(G(n.touchedFields,N),Q.argA,Q.argB);K&&Ne(n.touchedFields,N,Z)}h.dirtyFields&&(n.dirtyFields=Jo(r,s)),d.state.next({name:N,isDirty:P(N,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ne(s,N,V)},I=(N,V)=>{Ne(n.errors,N,V),d.state.next({errors:n.errors})},D=N=>{n.errors=N,d.state.next({errors:n.errors,isValid:!1})},O=(N,V,j,Q)=>{const K=G(i,N);if(K){const H=G(s,N,We(j)?G(r,N):j);We(H)||Q&&Q.defaultChecked||V?Ne(s,N,V?H:zd(K._f)):ie(N,H),o.mount&&T()}},L=(N,V,j,Q,K)=>{let H=!1,Z=!1;const ue={name:N};if(!e.disabled){const me=!!(G(i,N)&&G(i,N)._f&&G(i,N)._f.disabled);if(!j||Q){h.isDirty&&(Z=n.isDirty,n.isDirty=ue.isDirty=P(),H=Z!==ue.isDirty);const ve=me||Li(G(r,N),V);Z=!!(!me&&G(n.dirtyFields,N)),ve||me?it(n.dirtyFields,N):Ne(n.dirtyFields,N,!0),ue.dirtyFields=n.dirtyFields,H=H||h.dirtyFields&&Z!==!ve}if(j){const ve=G(n.touchedFields,N);ve||(Ne(n.touchedFields,N,j),ue.touchedFields=n.touchedFields,H=H||h.touchedFields&&ve!==j)}H&&K&&d.state.next(ue)}return H?ue:{}},S=(N,V,j,Q)=>{const K=G(n.errors,N),H=h.isValid&&un(V)&&n.isValid!==V;if(t.delayError&&j?(l=x(()=>I(N,j)),l(t.delayError)):(clearTimeout(c),l=null,j?Ne(n.errors,N,j):it(n.errors,N)),(j?!Li(K,j):K)||!Ht(Q)||H){const Z={...Q,...H&&un(V)?{isValid:V}:{},errors:n.errors,name:N};n={...n,...Z},d.state.next(Z)}},_=async N=>{w(N,!0);const V=await e.resolver(s,e.context,hP(N||a.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return w(N),V},b=async N=>{const{errors:V}=await _(N);if(N)for(const j of N){const Q=G(V,j);Q?Ne(n.errors,j,Q):it(n.errors,j)}else n.errors=V;return V},A=async(N,V,j={valid:!0})=>{for(const Q in N){const K=N[Q];if(K){const{_f:H,...Z}=K;if(H){const ue=a.array.has(H.name),me=K._f&&dP(K._f);me&&h.validatingFields&&w([Q],!0);const ve=await mv(K,s,y,e.shouldUseNativeValidation&&!V,ue);if(me&&h.validatingFields&&w([Q]),ve[H.name]&&(j.valid=!1,V))break;!V&&(G(ve,H.name)?ue?aP(n.errors,ve,H.name):Ne(n.errors,H.name,ve[H.name]):it(n.errors,H.name))}!Ht(Z)&&await A(Z,V,j)}}return j.valid},R=()=>{for(const N of a.unMount){const V=G(i,N);V&&(V._f.refs?V._f.refs.every(j=>!Bd(j)):!Bd(V._f.ref))&&Ge(N)}a.unMount=new Set},P=(N,V)=>!e.disabled&&(N&&V&&Ne(s,N,V),!Li(Ie(),r)),k=(N,V,j)=>C1(N,a,{...o.mount?s:We(V)?r:zn(N)?{[N]:V}:V},j,V),le=N=>Ph(G(o.mount?s:r,N,t.shouldUnregister?G(r,N,[]):[])),ie=(N,V,j={})=>{const Q=G(i,N);let K=V;if(Q){const H=Q._f;H&&(!H.disabled&&Ne(s,N,M1(V,H)),K=jc(H.ref)&&Ft(V)?"":V,N1(H.ref)?[...H.ref.options].forEach(Z=>Z.selected=K.includes(Z.value)):H.refs?Il(H.ref)?H.refs.length>1?H.refs.forEach(Z=>(!Z.defaultChecked||!Z.disabled)&&(Z.checked=Array.isArray(K)?!!K.find(ue=>ue===Z.value):K===Z.value)):H.refs[0]&&(H.refs[0].checked=!!K):H.refs.forEach(Z=>Z.checked=Z.value===K):qg(H.ref)?H.ref.value="":(H.ref.value=K,H.ref.type||d.values.next({name:N,values:{...s}})))}(j.shouldDirty||j.shouldTouch)&&L(N,K,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&ee(N)},pe=(N,V,j)=>{for(const Q in V){const K=V[Q],H=`${N}.${Q}`,Z=G(i,H);(a.array.has(N)||Je(K)||Z&&!Z._f)&&!Lr(K)?pe(H,K,j):ie(H,K,j)}},ge=(N,V,j={})=>{const Q=G(i,N),K=a.array.has(N),H=$t(V);Ne(s,N,H),K?(d.array.next({name:N,values:{...s}}),(h.isDirty||h.dirtyFields)&&j.shouldDirty&&d.state.next({name:N,dirtyFields:Jo(r,s),isDirty:P(N,H)})):Q&&!Q._f&&!Ft(H)?pe(N,H,j):ie(N,H,j),hv(N,a)&&d.state.next({...n}),d.values.next({name:o.mount?N:void 0,values:{...s}})},W=async N=>{o.mount=!0;const V=N.target;let j=V.name,Q=!0;const K=G(i,j),H=()=>V.type?zd(K._f):T1(N),Z=ue=>{Q=Number.isNaN(ue)||Lr(ue)&&isNaN(ue.getTime())||Li(ue,G(s,j,ue))};if(K){let ue,me;const ve=H(),on=N.type===Fc.BLUR||N.type===Fc.FOCUS_OUT,zl=!fP(K._f)&&!e.resolver&&!G(n.errors,j)&&!K._f.deps||pP(on,G(n.touchedFields,j),n.isSubmitted,m,p),ds=hv(j,a,on);Ne(s,j,ve),on?(K._f.onBlur&&K._f.onBlur(N),l&&l(0)):K._f.onChange&&K._f.onChange(N);const Po=L(j,ve,on,!1),wr=!Ht(Po)||ds;if(!on&&d.values.next({name:j,type:N.type,values:{...s}}),zl)return h.isValid&&(t.mode==="onBlur"?on&&T():T()),wr&&d.state.next({name:j,...ds?{}:Po});if(!on&&ds&&d.state.next({...n}),e.resolver){const{errors:Ro}=await _([j]);if(Z(ve),Q){const $l=_v(n.errors,i,j),fs=_v(Ro,i,$l.name||j);ue=fs.error,j=fs.name,me=Ht(Ro)}}else w([j],!0),ue=(await mv(K,s,y,e.shouldUseNativeValidation))[j],w([j]),Z(ve),Q&&(ue?me=!1:h.isValid&&(me=await A(i,!0)));Q&&(K._f.deps&&ee(K._f.deps),S(j,me,ue,Po))}},J=(N,V)=>{if(G(n.errors,V)&&N.focus)return N.focus(),1},ee=async(N,V={})=>{let j,Q;const K=ba(N);if(e.resolver){const H=await b(We(N)?N:K);j=Ht(H),Q=N?!K.some(Z=>G(H,Z)):j}else N?(Q=(await Promise.all(K.map(async H=>{const Z=G(i,H);return await A(Z&&Z._f?{[H]:Z}:Z)}))).every(Boolean),!(!Q&&!n.isValid)&&T()):Q=j=await A(i);return d.state.next({...!zn(N)||h.isValid&&j!==n.isValid?{}:{name:N},...e.resolver||!N?{isValid:j}:{},errors:n.errors}),V.shouldFocus&&!Q&&Ia(i,J,N?K:a.mount),Q},Ie=N=>{const V={...o.mount?s:r};return We(N)?V:zn(N)?G(V,N):N.map(j=>G(V,j))},he=(N,V)=>({invalid:!!G((V||n).errors,N),isDirty:!!G((V||n).dirtyFields,N),error:G((V||n).errors,N),isValidating:!!G(n.validatingFields,N),isTouched:!!G((V||n).touchedFields,N)}),ke=N=>{N&&ba(N).forEach(V=>it(n.errors,V)),d.state.next({errors:N?n.errors:{}})},Ze=(N,V,j)=>{const Q=(G(i,N,{_f:{}})._f||{}).ref,K=G(n.errors,N)||{},{ref:H,message:Z,type:ue,...me}=K;Ne(n.errors,N,{...me,...V,ref:Q}),d.state.next({name:N,errors:n.errors,isValid:!1}),j&&j.shouldFocus&&Q&&Q.focus&&Q.focus()},ft=(N,V)=>Bn(N)?d.values.subscribe({next:j=>N(k(void 0,V),j)}):k(N,V,!0),Ge=(N,V={})=>{for(const j of N?ba(N):a.mount)a.mount.delete(j),a.array.delete(j),V.keepValue||(it(i,j),it(s,j)),!V.keepError&&it(n.errors,j),!V.keepDirty&&it(n.dirtyFields,j),!V.keepTouched&&it(n.touchedFields,j),!V.keepIsValidating&&it(n.validatingFields,j),!e.shouldUnregister&&!V.keepDefaultValue&&it(r,j);d.values.next({values:{...s}}),d.state.next({...n,...V.keepDirty?{isDirty:P()}:{}}),!V.keepIsValid&&T()},sn=({disabled:N,name:V,field:j,fields:Q,value:K})=>{if(un(N)&&o.mount||N){const H=N?void 0:We(K)?zd(j?j._f:G(Q,V)._f):K;Ne(s,V,H),L(V,H,!1,!1,!0)}},Ao=(N,V={})=>{let j=G(i,N);const Q=un(V.disabled)||un(e.disabled);return Ne(i,N,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:N}},name:N,mount:!0,...V}}),a.mount.add(N),j?sn({field:j,disabled:un(V.disabled)?V.disabled:e.disabled,name:N,value:V.value}):O(N,!0,V.value),{...Q?{disabled:V.disabled||e.disabled}:{},...e.progressive?{required:!!V.required,min:Zo(V.min),max:Zo(V.max),minLength:Zo(V.minLength),maxLength:Zo(V.maxLength),pattern:Zo(V.pattern)}:{},name:N,onChange:W,onBlur:W,ref:K=>{if(K){Ao(N,V),j=G(i,N);const H=We(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,Z=cP(H),ue=j._f.refs||[];if(Z?ue.find(me=>me===H):H===j._f.ref)return;Ne(i,N,{_f:{...j._f,...Z?{refs:[...ue.filter(Bd),H,...Array.isArray(G(r,N))?[{}]:[]],ref:{type:H.type,name:N}}:{ref:H}}}),O(N,!1,void 0,H)}else j=G(i,N,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||V.shouldUnregister)&&!(S1(a.array,N)&&o.action)&&a.unMount.add(N)}}},Ul=()=>e.shouldFocusError&&Ia(i,J,a.mount),us=N=>{un(N)&&(d.state.next({disabled:N}),Ia(i,(V,j)=>{const Q=G(i,j);Q&&(V.disabled=Q._f.disabled||N,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(K=>{K.disabled=Q._f.disabled||N}))},0,!1))},vr=(N,V)=>async j=>{let Q;if(j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist()),e.disabled){V&&await V({...n.errors},j);return}let K=$t(s);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:H,values:Z}=await _();n.errors=H,K=Z}else await A(i);if(it(n.errors,"root"),Ht(n.errors)){d.state.next({errors:{}});try{await N(K,j)}catch(H){Q=H}}else V&&await V({...n.errors},j),Ul(),setTimeout(Ul);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ht(n.errors)&&!Q,submitCount:n.submitCount+1,errors:n.errors}),Q)throw Q},Co=(N,V={})=>{G(i,N)&&(We(V.defaultValue)?ge(N,$t(G(r,N))):(ge(N,V.defaultValue),Ne(r,N,$t(V.defaultValue))),V.keepTouched||it(n.touchedFields,N),V.keepDirty||(it(n.dirtyFields,N),n.isDirty=V.defaultValue?P(N,$t(G(r,N))):P()),V.keepError||(it(n.errors,N),h.isValid&&T()),d.state.next({...n}))},cs=(N,V={})=>{const j=N?$t(N):r,Q=$t(j),K=Ht(N),H=K?r:Q;if(V.keepDefaultValues||(r=j),!V.keepValues){if(V.keepDirtyValues){const Z=new Set([...a.mount,...Object.keys(Jo(r,s))]);for(const ue of Array.from(Z))G(n.dirtyFields,ue)?Ne(H,ue,G(s,ue)):ge(ue,G(H,ue))}else{if(zg&&We(N))for(const Z of a.mount){const ue=G(i,Z);if(ue&&ue._f){const me=Array.isArray(ue._f.refs)?ue._f.refs[0]:ue._f.ref;if(jc(me)){const ve=me.closest("form");if(ve){ve.reset();break}}}}i={}}s=t.shouldUnregister?V.keepDefaultValues?$t(r):{}:$t(H),d.array.next({values:{...H}}),d.values.next({values:{...H}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!t.shouldUnregister,d.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:K?!1:V.keepDirty?n.isDirty:!!(V.keepDefaultValues&&!Li(N,r)),isSubmitted:V.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:V.keepDirtyValues?V.keepDefaultValues&&s?Jo(r,s):n.dirtyFields:V.keepDefaultValues&&N?Jo(r,N):V.keepDirty?n.dirtyFields:{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},hs=(N,V)=>cs(Bn(N)?N(s):N,V);return{control:{register:Ao,unregister:Ge,getFieldState:he,handleSubmit:vr,setError:Ze,_executeSchema:_,_getWatch:k,_getDirty:P,_updateValid:T,_removeUnmounted:R,_updateFieldArray:v,_updateDisabledField:sn,_getFieldArray:le,_reset:cs,_resetDefaultValues:()=>Bn(e.defaultValues)&&e.defaultValues().then(N=>{hs(N,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:N=>{n={...n,...N}},_disableForm:us,_subjects:d,_proxyFormState:h,_setErrors:D,get _fields(){return i},get _formValues(){return s},get _state(){return o},set _state(N){o=N},get _defaultValues(){return r},get _names(){return a},set _names(N){a=N},get _formState(){return n},set _formState(N){n=N},get _options(){return e},set _options(N){e={...e,...N}}},trigger:ee,register:Ao,handleSubmit:vr,watch:ft,setValue:ge,getValues:Ie,reset:hs,resetField:Co,clearErrors:ke,unregister:Ge,setError:Ze,setFocus:(N,V={})=>{const j=G(i,N),Q=j&&j._f;if(Q){const K=Q.refs?Q.refs[0]:Q.ref;K.focus&&(K.focus(),V.shouldSelect&&Bn(K.select)&&K.select())}},getFieldState:he}}function V1(t={}){const e=be.useRef(),n=be.useRef(),[i,r]=be.useState({isDirty:!1,isValidating:!1,isLoading:Bn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Bn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...yP(t),formState:i});const s=e.current.control;return s._options=t,Wg({subject:s._subjects.state,next:o=>{k1(o,s._proxyFormState,s._updateFormState,!0)&&r({...s._formState})}}),be.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),be.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==i.isDirty&&s._subjects.state.next({isDirty:o})}},[s,i.isDirty]),be.useEffect(()=>{t.values&&!Li(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,r(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),be.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),be.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),be.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=I1(i,s),e.current}const _P={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},vv=t=>{let e;const n=new Set,i=(h,d)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(_P?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(i,r,l);return l},vP=t=>t?vv(t):vv;var L1={exports:{}},F1={},j1={exports:{}},U1={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=B;function wP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xP=typeof Object.is=="function"?Object.is:wP,EP=io.useState,TP=io.useEffect,SP=io.useLayoutEffect,bP=io.useDebugValue;function IP(t,e){var n=e(),i=EP({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return SP(function(){r.value=n,r.getSnapshot=e,$d(r)&&s({inst:r})},[t,n,e]),TP(function(){return $d(r)&&s({inst:r}),t(function(){$d(r)&&s({inst:r})})},[t]),bP(n),n}function $d(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xP(t,n)}catch{return!0}}function kP(t,e){return e()}var AP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kP:IP;U1.useSyncExternalStore=io.useSyncExternalStore!==void 0?io.useSyncExternalStore:AP;j1.exports=U1;var CP=j1.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=B,PP=CP;function RP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NP=typeof Object.is=="function"?Object.is:RP,DP=PP.useSyncExternalStore,OP=Rh.useRef,MP=Rh.useEffect,VP=Rh.useMemo,LP=Rh.useDebugValue;F1.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=OP(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=VP(function(){function l(m){if(!c){if(c=!0,h=m,m=i(m),r!==void 0&&o.hasValue){var y=o.value;if(r(y,m))return d=y}return d=m}if(y=d,NP(h,m))return y;var x=i(m);return r!==void 0&&r(y,x)?y:(h=m,d=x)}var c=!1,h,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,i,r]);var a=DP(t,s[0],s[1]);return MP(function(){o.hasValue=!0,o.value=a},[a]),LP(a),a};L1.exports=F1;var FP=L1.exports;const jP=Yw(FP),B1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:UP}=be,{useSyncExternalStoreWithSelector:BP}=jP;let wv=!1;const zP=t=>t;function $P(t,e=zP,n){(B1?"production":void 0)!=="production"&&n&&!wv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),wv=!0);const i=BP(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return UP(i),i}const xv=t=>{(B1?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?vP(t):t,n=(i,r)=>$P(e,i,r);return Object.assign(n,e),n},z1=t=>t?xv(t):xv;var Ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},H1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(n[h],n[d],n[p],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new WP;const p=s<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qP=function(t){const e=$1(t);return H1.encodeByteArray(e,!0)},zc=function(t){return qP(t).replace(/\./g,"")},W1=function(t){try{return H1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=()=>KP().__FIREBASE_DEFAULTS__,QP=()=>{if(typeof process>"u"||typeof Ev>"u")return;const t=Ev.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W1(t[1]);return e&&JSON.parse(e)},Nh=()=>{try{return GP()||QP()||YP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},q1=t=>{var e,n;return(n=(e=Nh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XP=t=>{const e=q1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},K1=()=>{var t;return(t=Nh())===null||t===void 0?void 0:t.config},G1=t=>{var e;return(e=Nh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zc(JSON.stringify(n)),zc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function tR(){var t;const e=(t=Nh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sR(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aR(){try{return typeof indexedDB=="object"}catch{return!1}}function lR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="FirebaseError";class Ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=uR,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?cR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ii(r,a,i)}}function cR(t,e){return t.replace(hR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hR=/\{\$([^}]+)}/g;function dR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $c(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Tv(s)&&Tv(o)){if(!$c(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Tv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fR(t,e){const n=new pR(t,e);return n.subscribe.bind(n)}class pR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");gR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Hd),r.error===void 0&&(r.error=Hd),r.complete===void 0&&(r.complete=Hd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new JP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_R(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yR(t){return t===Rr?void 0:t}function _R(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const wR={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},xR=ye.INFO,ER={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},TR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ER[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=TR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const SR=(t,e)=>e.some(n=>t instanceof n);let Sv,bv;function bR(){return Sv||(Sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IR(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q1=new WeakMap,up=new WeakMap,Y1=new WeakMap,Wd=new WeakMap,Qg=new WeakMap;function kR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(rr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Q1.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function AR(t){if(up.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});up.set(t,e)}let cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CR(t){cp=t(cp)}function PR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(qd(this),e,...n);return Y1.set(i,e.sort?e.sort():[e]),rr(i)}:IR().includes(t)?function(...e){return t.apply(qd(this),e),rr(Q1.get(this))}:function(...e){return rr(t.apply(qd(this),e))}}function RR(t){return typeof t=="function"?PR(t):(t instanceof IDBTransaction&&AR(t),SR(t,bR())?new Proxy(t,cp):t)}function rr(t){if(t instanceof IDBRequest)return kR(t);if(Wd.has(t))return Wd.get(t);const e=RR(t);return e!==t&&(Wd.set(t,e),Qg.set(e,t)),e}const qd=t=>Qg.get(t);function NR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=rr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(rr(o.result),l.oldVersion,l.newVersion,rr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const DR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],Kd=new Map;function Iv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Kd.set(e,s),s}CR(t=>({...t,get:(e,n,i)=>Iv(e,n)||t.get(e,n,i),has:(e,n)=>!!Iv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",kv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Gg("@firebase/app"),LR="@firebase/app-compat",FR="@firebase/analytics-compat",jR="@firebase/analytics",UR="@firebase/app-check-compat",BR="@firebase/app-check",zR="@firebase/auth",$R="@firebase/auth-compat",HR="@firebase/database",WR="@firebase/data-connect",qR="@firebase/database-compat",KR="@firebase/functions",GR="@firebase/functions-compat",QR="@firebase/installations",YR="@firebase/installations-compat",XR="@firebase/messaging",JR="@firebase/messaging-compat",ZR="@firebase/performance",e2="@firebase/performance-compat",t2="@firebase/remote-config",n2="@firebase/remote-config-compat",i2="@firebase/storage",r2="@firebase/storage-compat",s2="@firebase/firestore",o2="@firebase/vertexai-preview",a2="@firebase/firestore-compat",l2="firebase",u2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",c2={[hp]:"fire-core",[LR]:"fire-core-compat",[jR]:"fire-analytics",[FR]:"fire-analytics-compat",[BR]:"fire-app-check",[UR]:"fire-app-check-compat",[zR]:"fire-auth",[$R]:"fire-auth-compat",[HR]:"fire-rtdb",[WR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[KR]:"fire-fn",[GR]:"fire-fn-compat",[QR]:"fire-iid",[YR]:"fire-iid-compat",[XR]:"fire-fcm",[JR]:"fire-fcm-compat",[ZR]:"fire-perf",[e2]:"fire-perf-compat",[t2]:"fire-rc",[n2]:"fire-rc-compat",[i2]:"fire-gcs",[r2]:"fire-gcs-compat",[s2]:"fire-fst",[a2]:"fire-fst-compat",[o2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,h2=new Map,fp=new Map;function Av(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ro(t){const e=t.name;if(fp.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const n of Hc.values())Av(n,t);for(const n of h2.values())Av(n,t);return!0}function Yg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new kl("app","Firebase",d2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=u2;function X1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:dp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw sr.create("bad-app-name",{appName:String(r)});if(n||(n=K1()),!n)throw sr.create("no-options");const s=Hc.get(r);if(s){if($c(n,s.options)&&$c(i,s.config))return s;throw sr.create("duplicate-app",{appName:r})}const o=new vR(r);for(const l of fp.values())o.addComponent(l);const a=new f2(n,i,o);return Hc.set(r,a),a}function J1(t=dp){const e=Hc.get(t);if(!e&&t===dp&&K1())return X1();if(!e)throw sr.create("no-app",{appName:t});return e}function or(t,e,n){var i;let r=(i=c2[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}ro(new Xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firebase-heartbeat-database",g2=1,il="firebase-heartbeat-store";let Gd=null;function Z1(){return Gd||(Gd=NR(p2,g2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(il)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Gd}async function m2(t){try{const n=(await Z1()).transaction(il),i=await n.objectStore(il).get(eT(t));return await n.done,i}catch(e){if(e instanceof Ii)vi.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function Cv(t,e){try{const i=(await Z1()).transaction(il,"readwrite");await i.objectStore(il).put(e,eT(t)),await i.done}catch(n){if(n instanceof Ii)vi.warn(n.message);else{const i=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(i.message)}}}function eT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=1024,_2=30*24*60*60*1e3;class v2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_2}),this._storage.overwrite(this._heartbeatsCache))}catch(i){vi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pv(),{heartbeatsToSend:i,unsentEntries:r}=w2(this._heartbeatsCache.heartbeats),s=zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return vi.warn(n),""}}}function Pv(){return new Date().toISOString().substring(0,10)}function w2(t,e=y2){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Rv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Rv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class x2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aR()?lR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rv(t){return zc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){ro(new Xr("platform-logger",e=>new MR(e),"PRIVATE")),ro(new Xr("heartbeat",e=>new v2(e),"PRIVATE")),or(hp,kv,t),or(hp,kv,"esm2017"),or("fire-js","")}E2("");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,tT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function b(){}b.prototype=_.prototype,S.D=_.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(A,R,P){for(var k=Array(arguments.length-2),le=2;le<arguments.length;le++)k[le-2]=arguments[le];return _.prototype[R].apply(A,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,_,b){b||(b=0);var A=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)A[R]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(R=0;16>R;++R)A[R]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=S.g[0],b=S.g[1],R=S.g[2];var P=S.g[3],k=_+(P^b&(R^P))+A[0]+3614090360&4294967295;_=b+(k<<7&4294967295|k>>>25),k=P+(R^_&(b^R))+A[1]+3905402710&4294967295,P=_+(k<<12&4294967295|k>>>20),k=R+(b^P&(_^b))+A[2]+606105819&4294967295,R=P+(k<<17&4294967295|k>>>15),k=b+(_^R&(P^_))+A[3]+3250441966&4294967295,b=R+(k<<22&4294967295|k>>>10),k=_+(P^b&(R^P))+A[4]+4118548399&4294967295,_=b+(k<<7&4294967295|k>>>25),k=P+(R^_&(b^R))+A[5]+1200080426&4294967295,P=_+(k<<12&4294967295|k>>>20),k=R+(b^P&(_^b))+A[6]+2821735955&4294967295,R=P+(k<<17&4294967295|k>>>15),k=b+(_^R&(P^_))+A[7]+4249261313&4294967295,b=R+(k<<22&4294967295|k>>>10),k=_+(P^b&(R^P))+A[8]+1770035416&4294967295,_=b+(k<<7&4294967295|k>>>25),k=P+(R^_&(b^R))+A[9]+2336552879&4294967295,P=_+(k<<12&4294967295|k>>>20),k=R+(b^P&(_^b))+A[10]+4294925233&4294967295,R=P+(k<<17&4294967295|k>>>15),k=b+(_^R&(P^_))+A[11]+2304563134&4294967295,b=R+(k<<22&4294967295|k>>>10),k=_+(P^b&(R^P))+A[12]+1804603682&4294967295,_=b+(k<<7&4294967295|k>>>25),k=P+(R^_&(b^R))+A[13]+4254626195&4294967295,P=_+(k<<12&4294967295|k>>>20),k=R+(b^P&(_^b))+A[14]+2792965006&4294967295,R=P+(k<<17&4294967295|k>>>15),k=b+(_^R&(P^_))+A[15]+1236535329&4294967295,b=R+(k<<22&4294967295|k>>>10),k=_+(R^P&(b^R))+A[1]+4129170786&4294967295,_=b+(k<<5&4294967295|k>>>27),k=P+(b^R&(_^b))+A[6]+3225465664&4294967295,P=_+(k<<9&4294967295|k>>>23),k=R+(_^b&(P^_))+A[11]+643717713&4294967295,R=P+(k<<14&4294967295|k>>>18),k=b+(P^_&(R^P))+A[0]+3921069994&4294967295,b=R+(k<<20&4294967295|k>>>12),k=_+(R^P&(b^R))+A[5]+3593408605&4294967295,_=b+(k<<5&4294967295|k>>>27),k=P+(b^R&(_^b))+A[10]+38016083&4294967295,P=_+(k<<9&4294967295|k>>>23),k=R+(_^b&(P^_))+A[15]+3634488961&4294967295,R=P+(k<<14&4294967295|k>>>18),k=b+(P^_&(R^P))+A[4]+3889429448&4294967295,b=R+(k<<20&4294967295|k>>>12),k=_+(R^P&(b^R))+A[9]+568446438&4294967295,_=b+(k<<5&4294967295|k>>>27),k=P+(b^R&(_^b))+A[14]+3275163606&4294967295,P=_+(k<<9&4294967295|k>>>23),k=R+(_^b&(P^_))+A[3]+4107603335&4294967295,R=P+(k<<14&4294967295|k>>>18),k=b+(P^_&(R^P))+A[8]+1163531501&4294967295,b=R+(k<<20&4294967295|k>>>12),k=_+(R^P&(b^R))+A[13]+2850285829&4294967295,_=b+(k<<5&4294967295|k>>>27),k=P+(b^R&(_^b))+A[2]+4243563512&4294967295,P=_+(k<<9&4294967295|k>>>23),k=R+(_^b&(P^_))+A[7]+1735328473&4294967295,R=P+(k<<14&4294967295|k>>>18),k=b+(P^_&(R^P))+A[12]+2368359562&4294967295,b=R+(k<<20&4294967295|k>>>12),k=_+(b^R^P)+A[5]+4294588738&4294967295,_=b+(k<<4&4294967295|k>>>28),k=P+(_^b^R)+A[8]+2272392833&4294967295,P=_+(k<<11&4294967295|k>>>21),k=R+(P^_^b)+A[11]+1839030562&4294967295,R=P+(k<<16&4294967295|k>>>16),k=b+(R^P^_)+A[14]+4259657740&4294967295,b=R+(k<<23&4294967295|k>>>9),k=_+(b^R^P)+A[1]+2763975236&4294967295,_=b+(k<<4&4294967295|k>>>28),k=P+(_^b^R)+A[4]+1272893353&4294967295,P=_+(k<<11&4294967295|k>>>21),k=R+(P^_^b)+A[7]+4139469664&4294967295,R=P+(k<<16&4294967295|k>>>16),k=b+(R^P^_)+A[10]+3200236656&4294967295,b=R+(k<<23&4294967295|k>>>9),k=_+(b^R^P)+A[13]+681279174&4294967295,_=b+(k<<4&4294967295|k>>>28),k=P+(_^b^R)+A[0]+3936430074&4294967295,P=_+(k<<11&4294967295|k>>>21),k=R+(P^_^b)+A[3]+3572445317&4294967295,R=P+(k<<16&4294967295|k>>>16),k=b+(R^P^_)+A[6]+76029189&4294967295,b=R+(k<<23&4294967295|k>>>9),k=_+(b^R^P)+A[9]+3654602809&4294967295,_=b+(k<<4&4294967295|k>>>28),k=P+(_^b^R)+A[12]+3873151461&4294967295,P=_+(k<<11&4294967295|k>>>21),k=R+(P^_^b)+A[15]+530742520&4294967295,R=P+(k<<16&4294967295|k>>>16),k=b+(R^P^_)+A[2]+3299628645&4294967295,b=R+(k<<23&4294967295|k>>>9),k=_+(R^(b|~P))+A[0]+4096336452&4294967295,_=b+(k<<6&4294967295|k>>>26),k=P+(b^(_|~R))+A[7]+1126891415&4294967295,P=_+(k<<10&4294967295|k>>>22),k=R+(_^(P|~b))+A[14]+2878612391&4294967295,R=P+(k<<15&4294967295|k>>>17),k=b+(P^(R|~_))+A[5]+4237533241&4294967295,b=R+(k<<21&4294967295|k>>>11),k=_+(R^(b|~P))+A[12]+1700485571&4294967295,_=b+(k<<6&4294967295|k>>>26),k=P+(b^(_|~R))+A[3]+2399980690&4294967295,P=_+(k<<10&4294967295|k>>>22),k=R+(_^(P|~b))+A[10]+4293915773&4294967295,R=P+(k<<15&4294967295|k>>>17),k=b+(P^(R|~_))+A[1]+2240044497&4294967295,b=R+(k<<21&4294967295|k>>>11),k=_+(R^(b|~P))+A[8]+1873313359&4294967295,_=b+(k<<6&4294967295|k>>>26),k=P+(b^(_|~R))+A[15]+4264355552&4294967295,P=_+(k<<10&4294967295|k>>>22),k=R+(_^(P|~b))+A[6]+2734768916&4294967295,R=P+(k<<15&4294967295|k>>>17),k=b+(P^(R|~_))+A[13]+1309151649&4294967295,b=R+(k<<21&4294967295|k>>>11),k=_+(R^(b|~P))+A[4]+4149444226&4294967295,_=b+(k<<6&4294967295|k>>>26),k=P+(b^(_|~R))+A[11]+3174756917&4294967295,P=_+(k<<10&4294967295|k>>>22),k=R+(_^(P|~b))+A[2]+718787259&4294967295,R=P+(k<<15&4294967295|k>>>17),k=b+(P^(R|~_))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+P&4294967295}i.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var b=_-this.blockSize,A=this.B,R=this.h,P=0;P<_;){if(R==0)for(;P<=b;)r(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<_;)if(A[R++]=S.charCodeAt(P++),R==this.blockSize){r(this,A),R=0;break}}else for(;P<_;)if(A[R++]=S[P++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=_},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var b=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=b&255,b/=256;for(this.u(S),S=Array(16),_=b=0;4>_;++_)for(var A=0;32>A;A+=8)S[b++]=this.g[_]>>>A&255;return S};function s(S,_){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=_(S)}function o(S,_){this.h=_;for(var b=[],A=!0,R=S.length-1;0<=R;R--){var P=S[R]|0;A&&P==_||(b[R]=P,A=!1)}this.g=b}var a={};function l(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return T(c(-S));for(var _=[],b=1,A=0;S>=b;A++)_[A]=S/b|0,b*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return T(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(_,8)),A=d,R=0;R<S.length;R+=8){var P=Math.min(8,S.length-R),k=parseInt(S.substring(R,R+P),_);8>P?(P=c(Math.pow(_,P)),A=A.j(P).add(c(k))):(A=A.j(b),A=A.add(c(k)))}return A}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-T(this).m();for(var S=0,_=1,b=0;b<this.g.length;b++){var A=this.i(b);S+=(0<=A?A:4294967296+A)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(x(this))return"-"+T(this).toString(S);for(var _=c(Math.pow(S,6)),b=this,A="";;){var R=D(b,_).g;b=w(b,R.j(_));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=R,y(b))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=w(this,S),x(S)?-1:y(S)?0:1};function T(S){for(var _=S.g.length,b=[],A=0;A<_;A++)b[A]=~S.g[A];return new o(b,~S.h).add(p)}t.abs=function(){return x(this)?T(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],A=0,R=0;R<=_;R++){var P=A+(this.i(R)&65535)+(S.i(R)&65535),k=(P>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);A=k>>>16,P&=65535,k&=65535,b[R]=k<<16|P}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(S,_){return S.add(T(_))}t.j=function(S){if(y(this)||y(S))return d;if(x(this))return x(S)?T(this).j(T(S)):T(T(this).j(S));if(x(S))return T(this.j(T(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var _=this.g.length+S.g.length,b=[],A=0;A<2*_;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<S.g.length;R++){var P=this.i(A)>>>16,k=this.i(A)&65535,le=S.i(R)>>>16,ie=S.i(R)&65535;b[2*A+2*R]+=k*ie,v(b,2*A+2*R),b[2*A+2*R+1]+=P*ie,v(b,2*A+2*R+1),b[2*A+2*R+1]+=k*le,v(b,2*A+2*R+1),b[2*A+2*R+2]+=P*le,v(b,2*A+2*R+2)}for(A=0;A<_;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=_;A<2*_;A++)b[A]=0;return new o(b,0)};function v(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function I(S,_){this.g=S,this.h=_}function D(S,_){if(y(_))throw Error("division by zero");if(y(S))return new I(d,d);if(x(S))return _=D(T(S),_),new I(T(_.g),T(_.h));if(x(_))return _=D(S,T(_)),new I(T(_.g),_.h);if(30<S.g.length){if(x(S)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=_;0>=A.l(S);)b=O(b),A=O(A);var R=L(b,1),P=L(A,1);for(A=L(A,2),b=L(b,2);!y(A);){var k=P.add(A);0>=k.l(S)&&(R=R.add(b),P=k),A=L(A,1),b=L(b,1)}return _=w(S,R.j(_)),new I(R,_)}for(R=d;0<=S.l(_);){for(b=Math.max(1,Math.floor(S.m()/_.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=c(b),k=P.j(_);x(k)||0<k.l(S);)b-=A,P=c(b),k=P.j(_);y(P)&&(P=p),R=R.add(P),S=w(S,k)}return new I(R,S)}t.A=function(S){return D(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)&S.i(A);return new o(b,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)|S.i(A);return new o(b,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)^S.i(A);return new o(b,this.h^S.h)};function O(S){for(var _=S.g.length+1,b=[],A=0;A<_;A++)b[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(b,S.h)}function L(S,_){var b=_>>5;_%=32;for(var A=S.g.length-b,R=[],P=0;P<A;P++)R[P]=0<_?S.i(P+b)>>>_|S.i(P+b+1)<<32-_:S.i(P+b);return new o(R,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tT=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,$r=o}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nT,ca,iT,ec,pp,rT,sT,oT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,f){if(f)e:{var g=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in g))break e;g=g[M]}u=u[u.length-1],E=g[u],f=f(E),f!=E&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,E=!1,M={next:function(){if(!E&&g<u.length){var F=g++;return{value:f(F,u[F]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function y(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(E,M,F){for(var q=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)q[Re-2]=arguments[Re];return f.prototype[M].apply(E,q)}}function x(u){const f=u.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=u[E];return g}return[]}function T(u,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(l(E)){const M=u.length||0,F=E.length||0;u.length=M+F;for(let q=0;q<F;q++)u[M+q]=E[q]}else u.push(E)}}class w{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function L(u,f,g){for(const E in u)f.call(g,u[E],E,u)}function S(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function _(u){const f={};for(const g in u)f[g]=u[g];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)u[g]=E[g];for(let F=0;F<b.length;F++)g=b[F],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function R(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function P(u){a.setTimeout(()=>{throw u},0)}function k(){var u=J;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class le{constructor(){this.h=this.g=null}add(f,g){const E=ie.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var ie=new w(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,W=!1,J=new le,ee=()=>{const u=a.Promise.resolve(void 0);ge=()=>{u.then(Ie)}};var Ie=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(g){P(g)}var f=ie;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}W=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function ft(u,f){if(ke.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{D(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ge[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ft.aa.h.call(this)}}y(ft,ke);var Ge={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),Ao=0;function Ul(u,f,g,E,M){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=M,this.key=++Ao,this.da=this.fa=!1}function us(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vr(u){this.src=u,this.g={},this.h=0}vr.prototype.add=function(u,f,g,E,M){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var q=cs(u,f,E,M);return-1<q?(f=u[q],g||(f.fa=!1)):(f=new Ul(f,this.src,F,!!E,M),f.fa=g,u.push(f)),f};function Co(u,f){var g=f.type;if(g in u.g){var E=u.g[g],M=Array.prototype.indexOf.call(E,f,void 0),F;(F=0<=M)&&Array.prototype.splice.call(E,M,1),F&&(us(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function cs(u,f,g,E){for(var M=0;M<u.length;++M){var F=u[M];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==E)return M}return-1}var hs="closure_lm_"+(1e6*Math.random()|0),Bl={};function Yh(u,f,g,E,M){if(Array.isArray(f)){for(var F=0;F<f.length;F++)Yh(u,f[F],g,E,M);return null}return g=ue(g),u&&u[sn]?u.K(f,g,c(E)?!!E.capture:!!E,M):Jm(u,f,g,!1,E,M)}function Jm(u,f,g,E,M,F){if(!f)throw Error("Invalid event type");var q=c(M)?!!M.capture:!!M,Re=H(u);if(Re||(u[hs]=Re=new vr(u)),g=Re.add(f,g,E,q,F),g.proxy)return g;if(E=N(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)Ze||(M=q),M===void 0&&(M=!1),u.addEventListener(f.toString(),E,M);else if(u.attachEvent)u.attachEvent(Q(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function N(){function u(g){return f.call(u.src,u.listener,g)}const f=K;return u}function V(u,f,g,E,M){if(Array.isArray(f))for(var F=0;F<f.length;F++)V(u,f[F],g,E,M);else E=c(E)?!!E.capture:!!E,g=ue(g),u&&u[sn]?(u=u.i,f=String(f).toString(),f in u.g&&(F=u.g[f],g=cs(F,g,E,M),-1<g&&(us(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete u.g[f],u.h--)))):u&&(u=H(u))&&(f=u.g[f.toString()],u=-1,f&&(u=cs(f,g,E,M)),(g=-1<u?f[u]:null)&&j(g))}function j(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[sn])Co(f.i,u);else{var g=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(g,E,u.capture):f.detachEvent?f.detachEvent(Q(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=H(f))?(Co(g,u),g.h==0&&(g.src=null,f[hs]=null)):us(u)}}}function Q(u){return u in Bl?Bl[u]:Bl[u]="on"+u}function K(u,f){if(u.da)u=!0;else{f=new ft(f,this);var g=u.listener,E=u.ha||u.src;u.fa&&j(u),u=g.call(E,f)}return u}function H(u){return u=u[hs],u instanceof vr?u:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ue(u){return typeof u=="function"?u:(u[Z]||(u[Z]=function(f){return u.handleEvent(f)}),u[Z])}function me(){he.call(this),this.i=new vr(this),this.M=this,this.F=null}y(me,he),me.prototype[sn]=!0,me.prototype.removeEventListener=function(u,f,g,E){V(this,u,f,g,E)};function ve(u,f){var g,E=u.F;if(E)for(g=[];E;E=E.F)g.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new ke(f,u);else if(f instanceof ke)f.target=f.target||u;else{var M=f;f=new ke(E,u),A(f,M)}if(M=!0,g)for(var F=g.length-1;0<=F;F--){var q=f.g=g[F];M=on(q,E,!0,f)&&M}if(q=f.g=u,M=on(q,E,!0,f)&&M,M=on(q,E,!1,f)&&M,g)for(F=0;F<g.length;F++)q=f.g=g[F],M=on(q,E,!1,f)&&M}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],E=0;E<g.length;E++)us(g[E]);delete u.g[f],u.h--}}this.F=null},me.prototype.K=function(u,f,g,E){return this.i.add(String(u),f,!1,g,E)},me.prototype.L=function(u,f,g,E){return this.i.add(String(u),f,!0,g,E)};function on(u,f,g,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,F=0;F<f.length;++F){var q=f[F];if(q&&!q.da&&q.capture==g){var Re=q.listener,pt=q.ha||q.src;q.fa&&Co(u.i,q),M=Re.call(pt,E)!==!1&&M}}return M&&!E.defaultPrevented}function zl(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ds(u){u.g=zl(()=>{u.g=null,u.i&&(u.i=!1,ds(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Po extends he{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ds(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(u){he.call(this),this.h=u,this.g={}}y(wr,he);var Ro=[];function $l(u){L(u.g,function(f,g){this.g.hasOwnProperty(g)&&j(f)},u),u.g={}}wr.prototype.N=function(){wr.aa.N.call(this),$l(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=a.JSON.stringify,Bb=a.JSON.parse,zb=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Xh(){}Xh.prototype.h=null;function Zm(u){return u.h||(u.h=u.i())}function ey(){}var No={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jh(){ke.call(this,"d")}y(Jh,ke);function Zh(){ke.call(this,"c")}y(Zh,ke);var xr={},ty=null;function Hl(){return ty=ty||new me}xr.La="serverreachability";function ny(u){ke.call(this,xr.La,u)}y(ny,ke);function Do(u){const f=Hl();ve(f,new ny(f))}xr.STAT_EVENT="statevent";function iy(u,f){ke.call(this,xr.STAT_EVENT,u),this.stat=f}y(iy,ke);function Mt(u){const f=Hl();ve(f,new iy(f,u))}xr.Ma="timingevent";function ry(u,f){ke.call(this,xr.Ma,u),this.size=f}y(ry,ke);function Oo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Mo(){this.g=!0}Mo.prototype.xa=function(){this.g=!1};function $b(u,f,g,E,M,F){u.info(function(){if(u.g)if(F)for(var q="",Re=F.split("&"),pt=0;pt<Re.length;pt++){var Te=Re[pt].split("=");if(1<Te.length){var Et=Te[0];Te=Te[1];var Tt=Et.split("_");q=2<=Tt.length&&Tt[1]=="type"?q+(Et+"="+Te+"&"):q+(Et+"=redacted&")}}else q=null;else q=F;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+f+`
`+g+`
`+q})}function Hb(u,f,g,E,M,F,q){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+f+`
`+g+`
`+F+" "+q})}function ps(u,f,g,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+qb(u,g)+(E?" "+E:"")})}function Wb(u,f){u.info(function(){return"TIMEOUT: "+f})}Mo.prototype.info=function(){};function qb(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var E=g[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var q=1;q<M.length;q++)M[q]=""}}}}return fs(g)}catch{return f}}var Wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ed;function ql(){}y(ql,Xh),ql.prototype.g=function(){return new XMLHttpRequest},ql.prototype.i=function(){return{}},ed=new ql;function ki(u,f,g,E){this.j=u,this.i=f,this.l=g,this.R=E||1,this.U=new wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oy}function oy(){this.i=null,this.g="",this.h=!1}var ay={},td={};function nd(u,f,g){u.L=1,u.v=Yl(Xn(f)),u.m=g,u.P=!0,ly(u,null)}function ly(u,f){u.F=Date.now(),Kl(u),u.A=Xn(u.v);var g=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Ey(g.i,"t",E),u.C=0,g=u.j.J,u.h=new oy,u.g=Uy(u.j,g?f:null,!u.m),0<u.O&&(u.M=new Po(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ro[0]=M.toString()),M=Ro);for(var F=0;F<M.length;F++){var q=Yh(g,M[F],E||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Do(),$b(u.i,u.u,u.A,u.l,u.R,u.m)}ki.prototype.ca=function(u){u=u.target;const f=this.M;f&&Jn(u)==3?f.j():this.Y(u)},ki.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=Jn(this.g);var f=this.g.Ba();const ys=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||Cy(this.g)))){this.J||Tt!=4||f==7||(f==8||0>=ys?Do(3):Do(2)),id(this);var g=this.g.Z();this.X=g;t:if(uy(this)){var E=Cy(this.g);u="";var M=E.length,F=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),Vo(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(E[f],{stream:!(F&&f==M-1)});E.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,Hb(this.i,this.u,this.A,this.l,this.R,Tt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,pt=this.g;if((Re=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Re)){var Te=Re;break t}}Te=null}if(g=Te)ps(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rd(this,g);else{this.o=!1,this.s=3,Mt(12),Er(this),Vo(this);break e}}if(this.P){g=!0;let xn;for(;!this.J&&this.C<q.length;)if(xn=Kb(this,q),xn==td){Tt==4&&(this.s=4,Mt(14),g=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==ay){this.s=4,Mt(15),ps(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else ps(this.i,this.l,xn,null),rd(this,xn);if(uy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||q.length!=0||this.h.h||(this.s=1,Mt(16),g=!1),this.o=this.o&&g,!g)ps(this.i,this.l,q,"[Invalid Chunked Response]"),Er(this),Vo(this);else if(0<q.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),cd(Et),Et.M=!0,Mt(11))}}else ps(this.i,this.l,q,null),rd(this,q);Tt==4&&Er(this),this.o&&!this.J&&(Tt==4?Vy(this.j,this):(this.o=!1,Kl(this)))}else cI(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Er(this),Vo(this)}}}catch{}finally{}};function uy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kb(u,f){var g=u.C,E=f.indexOf(`
`,g);return E==-1?td:(g=Number(f.substring(g,E)),isNaN(g)?ay:(E+=1,E+g>f.length?td:(f=f.slice(E,E+g),u.C=E+g,f)))}ki.prototype.cancel=function(){this.J=!0,Er(this)};function Kl(u){u.S=Date.now()+u.I,cy(u,u.I)}function cy(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Oo(p(u.ba,u),f)}function id(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ki.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Wb(this.i,this.A),this.L!=2&&(Do(),Mt(17)),Er(this),this.s=2,Vo(this)):cy(this,this.S-u)};function Vo(u){u.j.G==0||u.J||Vy(u.j,u)}function Er(u){id(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,$l(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function rd(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||sd(g.h,u))){if(!u.K&&sd(g.h,u)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)nu(g),eu(g);else break e;ud(g),Mt(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=Oo(p(g.Za,g),6e3));if(1>=fy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Sr(g,11)}else if((u.K||g.g==u)&&nu(g),!v(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Te=M[f];if(g.T=Te[0],Te=Te[1],g.G==2)if(Te[0]=="c"){g.K=Te[1],g.ia=Te[2];const Et=Te[3];Et!=null&&(g.la=Et,g.j.info("VER="+g.la));const Tt=Te[4];Tt!=null&&(g.Aa=Tt,g.j.info("SVER="+g.Aa));const ys=Te[5];ys!=null&&typeof ys=="number"&&0<ys&&(E=1.5*ys,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const xn=u.g;if(xn){const ru=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ru){var F=E.h;F.g||ru.indexOf("spdy")==-1&&ru.indexOf("quic")==-1&&ru.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(od(F,F.h),F.h=null))}if(E.D){const hd=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(E.ya=hd,Oe(E.I,E.D,hd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var q=u;if(E.qa=jy(E,E.J?E.ia:null,E.W),q.K){py(E.h,q);var Re=q,pt=E.L;pt&&(Re.I=pt),Re.B&&(id(Re),Kl(Re)),E.g=q}else Oy(E);0<g.i.length&&tu(g)}else Te[0]!="stop"&&Te[0]!="close"||Sr(g,7);else g.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Sr(g,7):ld(g):Te[0]!="noop"&&g.l&&g.l.ta(Te),g.v=0)}}Do(4)}catch{}}var Gb=class{constructor(u,f){this.g=u,this.map=f}};function hy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fy(u){return u.h?1:u.g?u.g.size:0}function sd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function od(u,f){u.g?u.g.add(f):u.h=f}function py(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}hy.prototype.cancel=function(){if(this.i=gy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return x(u.i)}function Qb(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,E=0;E<g;E++)f.push(u[E]);return f}f=[],g=0;for(E in u)f[g++]=u[E];return f}function Yb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const E in u)f[g++]=E;return f}}}function my(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=Yb(u),E=Qb(u),M=E.length,F=0;F<M;F++)f.call(void 0,E[F],g&&g[F],u)}var yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xb(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var E=u[g].indexOf("="),M=null;if(0<=E){var F=u[g].substring(0,E);M=u[g].substring(E+1)}else F=u[g];f(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Tr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Tr){this.h=u.h,Gl(this,u.j),this.o=u.o,this.g=u.g,Ql(this,u.s),this.l=u.l;var f=u.i,g=new jo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),_y(this,g),this.m=u.m}else u&&(f=String(u).match(yy))?(this.h=!1,Gl(this,f[1]||"",!0),this.o=Lo(f[2]||""),this.g=Lo(f[3]||"",!0),Ql(this,f[4]),this.l=Lo(f[5]||"",!0),_y(this,f[6]||"",!0),this.m=Lo(f[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Tr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Fo(f,vy,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Fo(f,vy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Fo(g,g.charAt(0)=="/"?eI:Zb,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Fo(g,nI)),u.join("")};function Xn(u){return new Tr(u)}function Gl(u,f,g){u.j=g?Lo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Ql(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function _y(u,f,g){f instanceof jo?(u.i=f,iI(u.i,u.h)):(g||(f=Fo(f,tI)),u.i=new jo(f,u.h))}function Oe(u,f,g){u.i.set(f,g)}function Yl(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Lo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fo(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,Jb),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vy=/[#\/\?@]/g,Zb=/[#\?:]/g,eI=/[#\?]/g,tI=/[#\?@]/g,nI=/#/g;function jo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Ai(u){u.g||(u.g=new Map,u.h=0,u.i&&Xb(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=jo.prototype,t.add=function(u,f){Ai(this),this.i=null,u=gs(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function wy(u,f){Ai(u),f=gs(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function xy(u,f){return Ai(u),f=gs(u,f),u.g.has(f)}t.forEach=function(u,f){Ai(this),this.g.forEach(function(g,E){g.forEach(function(M){u.call(f,M,E,this)},this)},this)},t.na=function(){Ai(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const M=u[E];for(let F=0;F<M.length;F++)g.push(f[E])}return g},t.V=function(u){Ai(this);let f=[];if(typeof u=="string")xy(this,u)&&(f=f.concat(this.g.get(gs(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return Ai(this),this.i=null,u=gs(this,u),xy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Ey(u,f,g){wy(u,f),0<g.length&&(u.i=null,u.g.set(gs(u,f),x(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const F=encodeURIComponent(String(E)),q=this.V(E);for(E=0;E<q.length;E++){var M=F;q[E]!==""&&(M+="="+encodeURIComponent(String(q[E]))),u.push(M)}}return this.i=u.join("&")};function gs(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function iI(u,f){f&&!u.j&&(Ai(u),u.i=null,u.g.forEach(function(g,E){var M=E.toLowerCase();E!=M&&(wy(this,E),Ey(this,M,g))},u)),u.j=f}function rI(u,f){const g=new Mo;if(a.Image){const E=new Image;E.onload=m(Ci,g,"TestLoadImage: loaded",!0,f,E),E.onerror=m(Ci,g,"TestLoadImage: error",!1,f,E),E.onabort=m(Ci,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=m(Ci,g,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function sI(u,f){const g=new Mo,E=new AbortController,M=setTimeout(()=>{E.abort(),Ci(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(F=>{clearTimeout(M),F.ok?Ci(g,"TestPingServer: ok",!0,f):Ci(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Ci(g,"TestPingServer: error",!1,f)})}function Ci(u,f,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function oI(){this.g=new zb}function aI(u,f,g){const E=g||"";try{my(u,function(M,F){let q=M;c(M)&&(q=fs(M)),f.push(E+F+"="+encodeURIComponent(q))})}catch(M){throw f.push(E+"type="+encodeURIComponent("_badmap")),M}}function Xl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Xl,Xh),Xl.prototype.g=function(){return new Jl(this.l,this.j)},Xl.prototype.i=function(u){return function(){return u}}({});function Jl(u,f){me.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Jl,me),t=Jl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Bo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ty(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ty(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Uo(this):Bo(this),this.readyState==3&&Ty(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Uo(this))},t.Qa=function(u){this.g&&(this.response=u,Uo(this))},t.ga=function(){this.g&&Uo(this)};function Uo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Bo(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Bo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Sy(u){let f="";return L(u,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function ad(u,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Sy(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Oe(u,f,g))}function $e(u){me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y($e,me);var lI=/^https?$/i,uI=["POST","PUT"];t=$e.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ed.g(),this.v=this.o?Zm(this.o):Zm(ed),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(F){by(this,F);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())g.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uI,f,void 0))||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of g)this.g.setRequestHeader(F,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ay(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){by(this,F)}};function by(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Iy(u),Zl(u)}function Iy(u){u.A||(u.A=!0,ve(u,"complete"),ve(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ve(this,"complete"),ve(this,"abort"),Zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zl(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ky(this):this.bb())},t.bb=function(){ky(this)};function ky(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Jn(u)!=4||u.Z()!=2)){if(u.u&&Jn(u)==4)zl(u.Ea,0,u);else if(ve(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=q===0){var M=String(u.D).match(yy)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),E=!lI.test(M?M.toLowerCase():"")}g=E}if(g)ve(u,"complete"),ve(u,"success");else{u.m=6;try{var F=2<Jn(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",Iy(u)}}finally{Zl(u)}}}}function Zl(u,f){if(u.g){Ay(u);const g=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||ve(u,"ready");try{g.onreadystatechange=E}catch{}}}function Ay(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Bb(f)}};function Cy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cI(u){const f={};u=(u.g&&2<=Jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(v(u[E]))continue;var g=R(u[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[M]||[];f[M]=F,F.push(g)}S(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Py(u){this.Aa=0,this.i=[],this.j=new Mo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,u),this.cb=zo("retryDelaySeedMs",1e4,u),this.Wa=zo("forwardChannelMaxRetries",2,u),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hy(u&&u.concurrentRequestLimit),this.Da=new oI,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Py.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,E){Mt(0),this.W=u,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=jy(this,null,this.W),tu(this)};function ld(u){if(Ry(u),u.G==3){var f=u.U++,g=Xn(u.I);if(Oe(g,"SID",u.K),Oe(g,"RID",f),Oe(g,"TYPE","terminate"),$o(u,g),f=new ki(u,u.j,f),f.L=2,f.v=Yl(Xn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Uy(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Kl(f)}Fy(u)}function eu(u){u.g&&(cd(u),u.g.cancel(),u.g=null)}function Ry(u){eu(u),u.u&&(a.clearTimeout(u.u),u.u=null),nu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function tu(u){if(!dy(u.h)&&!u.s){u.s=!0;var f=u.Ga;ge||ee(),W||(ge(),W=!0),J.add(f,u),u.B=0}}function hI(u,f){return fy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Oo(p(u.Ga,u,f),Ly(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new ki(this,this.j,u);let F=this.o;if(this.S&&(F?(F=_(F),A(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Dy(this,M,f),g=Xn(this.I),Oe(g,"RID",u),Oe(g,"CVER",22),this.D&&Oe(g,"X-HTTP-Session-Id",this.D),$o(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(Sy(F)))+"&"+f:this.m&&ad(g,this.m,F)),od(this.h,M),this.Ua&&Oe(g,"TYPE","init"),this.P?(Oe(g,"$req",f),Oe(g,"SID","null"),M.T=!0,nd(M,g,null)):nd(M,g,f),this.G=2}}else this.G==3&&(u?Ny(this,u):this.i.length==0||dy(this.h)||Ny(this))};function Ny(u,f){var g;f?g=f.l:g=u.U++;const E=Xn(u.I);Oe(E,"SID",u.K),Oe(E,"RID",g),Oe(E,"AID",u.T),$o(u,E),u.m&&u.o&&ad(E,u.m,u.o),g=new ki(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Dy(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),od(u.h,g),nd(g,E,f)}function $o(u,f){u.H&&L(u.H,function(g,E){Oe(f,E,g)}),u.l&&my({},function(g,E){Oe(f,E,g)})}function Dy(u,f,g){g=Math.min(u.i.length,g);var E=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let F=-1;for(;;){const q=["count="+g];F==-1?0<g?(F=M[0].g,q.push("ofs="+F)):F=0:q.push("ofs="+F);let Re=!0;for(let pt=0;pt<g;pt++){let Te=M[pt].g;const Et=M[pt].map;if(Te-=F,0>Te)F=Math.max(0,M[pt].g-100),Re=!1;else try{aI(Et,q,"req"+Te+"_")}catch{E&&E(Et)}}if(Re){E=q.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,E}function Oy(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ge||ee(),W||(ge(),W=!0),J.add(f,u),u.v=0}}function ud(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Oo(p(u.Fa,u),Ly(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,My(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Oo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),eu(this),My(this))};function cd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function My(u){u.g=new ki(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Xn(u.qa);Oe(f,"RID","rpc"),Oe(f,"SID",u.K),Oe(f,"AID",u.T),Oe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(f,"TO",u.ja),Oe(f,"TYPE","xmlhttp"),$o(u,f),u.m&&u.o&&ad(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Yl(Xn(f)),g.m=null,g.P=!0,ly(g,u)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),ud(this),Mt(19))};function nu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Vy(u,f){var g=null;if(u.g==f){nu(u),cd(u),u.g=null;var E=2}else if(sd(u.h,f))g=f.D,py(u.h,f),E=1;else return;if(u.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;E=Hl(),ve(E,new ry(E,g)),tu(u)}else Oy(u);else if(M=f.s,M==3||M==0&&0<f.X||!(E==1&&hI(u,f)||E==2&&ud(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),M){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function Ly(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Sr(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),E=u.Xa;const M=!E;E=new Tr(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gl(E,"https"),Yl(E),M?rI(E.toString(),g):sI(E.toString(),g)}else Mt(2);u.G=0,u.l&&u.l.sa(f),Fy(u),Ry(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Fy(u){if(u.G=0,u.ka=[],u.l){const f=gy(u.h);(f.length!=0||u.i.length!=0)&&(T(u.ka,f),T(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function jy(u,f,g){var E=g instanceof Tr?Xn(g):new Tr(g);if(E.g!="")f&&(E.g=f+"."+E.g),Ql(E,E.s);else{var M=a.location;E=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var F=new Tr(null);E&&Gl(F,E),f&&(F.g=f),M&&Ql(F,M),g&&(F.l=g),E=F}return g=u.D,f=u.ya,g&&f&&Oe(E,g,f),Oe(E,"VER",u.la),$o(u,E),E}function Uy(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new $e(new Xl({eb:g})):new $e(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function By(){}t=By.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function iu(){}iu.prototype.g=function(u,f){return new Xt(u,f)};function Xt(u,f){me.call(this),this.g=new Py(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!v(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ms(this)}y(Xt,me),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){ld(this.g)},Xt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=fs(u),u=g);f.i.push(new Gb(f.Ya++,u)),f.G==3&&tu(f)},Xt.prototype.N=function(){this.g.l=null,delete this.j,ld(this.g),delete this.g,Xt.aa.N.call(this)};function zy(u){Jh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(zy,Jh);function $y(){Zh.call(this),this.status=1}y($y,Zh);function ms(u){this.g=u}y(ms,By),ms.prototype.ua=function(){ve(this.g,"a")},ms.prototype.ta=function(u){ve(this.g,new zy(u))},ms.prototype.sa=function(u){ve(this.g,new $y)},ms.prototype.ra=function(){ve(this.g,"b")},iu.prototype.createWebChannel=iu.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,oT=function(){return new iu},sT=function(){return Hl()},rT=xr,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wl.NO_ERROR=0,Wl.TIMEOUT=8,Wl.HTTP_ERROR=6,ec=Wl,sy.COMPLETE="complete",iT=sy,ey.EventType=No,No.OPEN="a",No.CLOSE="b",No.ERROR="c",No.MESSAGE="d",me.prototype.listen=me.prototype.K,ca=ey,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,nT=$e}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Gg("@firebase/firestore");function ea(){return Jr.logLevel}function X(t,...e){if(Jr.logLevel<=ye.DEBUG){const n=e.map(Xg);Jr.debug(`Firestore (${Eo}): ${t}`,...n)}}function wi(t,...e){if(Jr.logLevel<=ye.ERROR){const n=e.map(Xg);Jr.error(`Firestore (${Eo}): ${t}`,...n)}}function so(t,...e){if(Jr.logLevel<=ye.WARN){const n=e.map(Xg);Jr.warn(`Firestore (${Eo}): ${t}`,...n)}}function Xg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+t;throw wi(e),new Error(e)}function Pe(t,e){t||se()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class S2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ar,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pe(typeof i.accessToken=="string"),new aT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new At(e)}}class I2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class k2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new I2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const i=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new A2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=P2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Se(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new lt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new lt(0,0))}static max(){return new oe(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,i){n===void 0?n=0:n>e.length&&se(),i===void 0?i=e.length-n:i>e.length-n&&se(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends rl{construct(e,n,i){return new qe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends rl{construct(e,n,i){return new yt(e,n,i)}static isValidIdentifier(e){return R2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(qe.fromString(e))}static fromName(e){return new ne(qe.fromString(e).popFirst(5))}static empty(){return new ne(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new qe(e.slice()))}}function N2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(i===1e9?new lt(n+1,0):new lt(n,i));return new hr(r,ne.empty(),e)}function D2(t){return new hr(t.readTime,t.key,-1)}class hr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new hr(oe.min(),ne.empty(),-1)}static max(){return new hr(oe.max(),ne.empty(),-1)}}function O2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==M2)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new U((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function L2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jg.oe=-1;function Dh(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function F2(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function To(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??mt.RED,this.left=r??mt.EMPTY,this.right=s??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new mt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return mt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,i,r,s){return this}insert(e,n,i){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mv(this.data.getIterator())}getIteratorFrom(e){return new Mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class Mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new kn([])}unionWith(e){let n=new vt(yt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cT("Invalid base64 string: "+s):s}}(e);return new xt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const j2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=j2.exec(t);if(Pe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function em(t){const e=t.mapValue.fields.__previous_value__;return Zg(e)?em(e):e}function sl(t){const e=dr(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zg(t)?4:z2(t)?9007199254740991:B2(t)?10:11:se()}function Qn(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=dr(r.timestampValue),a=dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Zr(r.bytesValue).isEqual(Zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Qe(r.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Qe(r.integerValue)===Qe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Qe(r.doubleValue),a=Qe(s.doubleValue);return o===a?Wc(o)===Wc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Ov(o)!==Ov(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qn(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function al(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function ao(t,e){if(t===e)return 0;const n=es(t),i=es(e);if(n!==i)return Se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qe(s.integerValue||s.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Vv(t.timestampValue,e.timestampValue);case 4:return Vv(sl(t),sl(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zr(s),l=Zr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Se(a[c],l[c]);if(h!==0)return h}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(Qe(s.latitude),Qe(o.latitude));return a!==0?a:Se(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=Se(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Lv(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Su.mapValue&&o===Su.mapValue)return 0;if(s===Su.mapValue)return 1;if(o===Su.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Se(l[d],h[d]);if(p!==0)return p;const m=ao(a[l[d]],c[h[d]]);if(m!==0)return m}return Se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw se()}}function Vv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=dr(t),i=dr(e),r=Se(n.seconds,i.seconds);return r!==0?r:Se(n.nanos,i.nanos)}function Lv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ao(n[r],i[r]);if(s)return s}return Se(n.length,i.length)}function lo(t){return gp(t)}function gp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=gp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${gp(n.fields[o])}`;return r+"}"}(t.mapValue):se()}function mp(t){return!!t&&"integerValue"in t}function tm(t){return!!t&&"arrayValue"in t}function Fv(t){return!!t&&"nullValue"in t}function jv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function B2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return To(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ka(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=yt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ka(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];tc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){To(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new dn(ka(this.value))}}function hT(t){const e=[];return To(t.fields,(n,i)=>{const r=new yt([n]);if(tc(i)){const s=hT(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pt(e,0,oe.min(),oe.min(),oe.min(),dn.empty(),0)}static newFoundDocument(e,n,i,r){return new Pt(e,1,n,oe.min(),i,r,0)}static newNoDocument(e,n){return new Pt(e,2,n,oe.min(),oe.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,oe.min(),oe.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.position=e,this.inclusive=n}}function Uv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=ne.comparator(ne.fromName(o.referenceValue),n.key):i=ao(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Bv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n="asc"){this.field=e,this.dir=n}}function $2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class st extends dT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new W2(e,n,i):n==="array-contains"?new G2(e,i):n==="in"?new Q2(e,i):n==="not-in"?new Y2(e,i):n==="array-contains-any"?new X2(e,i):new st(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new q2(e,i):new K2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ao(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends dT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yn(e,n)}matches(e){return fT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fT(t){return t.op==="and"}function pT(t){return H2(t)&&fT(t)}function H2(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function yp(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(pT(t))return t.filters.map(e=>yp(e)).join(",");{const e=t.filters.map(n=>yp(n)).join(",");return`${t.op}(${e})`}}function gT(t,e){return t instanceof st?function(i,r){return r instanceof st&&i.op===r.op&&i.field.isEqual(r.field)&&Qn(i.value,r.value)}(t,e):t instanceof Yn?function(i,r){return r instanceof Yn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&gT(o,r.filters[a]),!0):!1}(t,e):void se()}function mT(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(mT).join(" ,")+"}"}(t):"Filter"}class W2 extends st{constructor(e,n,i){super(e,n,i),this.key=ne.fromName(i.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class q2 extends st{constructor(e,n){super(e,"in",n),this.keys=yT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class K2 extends st{constructor(e,n){super(e,"not-in",n),this.keys=yT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ne.fromName(i.referenceValue))}class G2 extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tm(n)&&al(n.arrayValue,this.value)}}class Q2 extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&al(this.value.arrayValue,n)}}class Y2 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!al(this.value.arrayValue,n)}}class X2 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>al(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function zv(t,e=null,n=[],i=[],r=null,s=null,o=null){return new J2(t,e,n,i,r,s,o)}function nm(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>yp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>lo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>lo(i)).join(",")),e.ue=n}return e.ue}function im(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bv(t.startAt,e.startAt)&&Bv(t.endAt,e.endAt)}function _p(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Z2(t,e,n,i,r,s,o,a){return new Oh(t,e,n,i,r,s,o,a)}function rm(t){return new Oh(t)}function $v(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eN(t){return t.collectionGroup!==null}function Aa(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Kc(s,i))}),n.has(yt.keyField().canonicalString())||e.ce.push(new Kc(yt.keyField(),i))}return e.ce}function Wn(t){const e=ae(t);return e.le||(e.le=tN(e,Aa(t))),e.le}function tN(t,e){if(t.limitType==="F")return zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Kc(r.field,s)});const n=t.endAt?new qc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new qc(t.startAt.position,t.startAt.inclusive):null;return zv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function vp(t,e,n){return new Oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mh(t,e){return im(Wn(t),Wn(e))&&t.limitType===e.limitType}function _T(t){return`${nm(Wn(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>mT(r)).join(", ")}]`),Dh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>lo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>lo(r)).join(",")),`Target(${i})`}(Wn(t))}; limitType=${t.limitType})`}function Vh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ne.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Aa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=Uv(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Aa(i),r)||i.endAt&&!function(o,a,l){const c=Uv(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Aa(i),r))}(t,e)}function nN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vT(t){return(e,n)=>{let i=!1;for(const r of Aa(t)){const s=iN(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function iN(t,e,n){const i=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ao(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new ze(ne.comparator);function xi(){return rN}const wT=new ze(ne.comparator);function ha(...t){let e=wT;for(const n of t)e=e.insert(n.key,n);return e}function xT(t){let e=wT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Fr(){return Ca()}function ET(){return Ca()}function Ca(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const sN=new ze(ne.comparator),oN=new vt(ne.comparator);function fe(...t){let e=oN;for(const n of t)e=e.add(n);return e}const aN=new vt(Se);function lN(){return aN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function uN(t,e){return F2(e)?TT(e):sm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this._=void 0}}function cN(t,e,n){return t instanceof Gc?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Zg(s)&&(s=em(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ll?bT(t,e):t instanceof ul?IT(t,e):function(r,s){const o=ST(r,s),a=Hv(o)+Hv(r.Pe);return mp(o)&&mp(r.Pe)?TT(a):sm(r.serializer,a)}(t,e)}function hN(t,e,n){return t instanceof ll?bT(t,e):t instanceof ul?IT(t,e):n}function ST(t,e){return t instanceof Qc?function(i){return mp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Gc extends Lh{}class ll extends Lh{constructor(e){super(),this.elements=e}}function bT(t,e){const n=kT(e);for(const i of t.elements)n.some(r=>Qn(r,i))||n.push(i);return{arrayValue:{values:n}}}class ul extends Lh{constructor(e){super(),this.elements=e}}function IT(t,e){let n=kT(e);for(const i of t.elements)n=n.filter(r=>!Qn(r,i));return{arrayValue:{values:n}}}class Qc extends Lh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hv(t){return Qe(t.integerValue||t.doubleValue)}function kT(t){return tm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ll&&r instanceof ll||i instanceof ul&&r instanceof ul?oo(i.elements,r.elements,Qn):i instanceof Qc&&r instanceof Qc?Qn(i.Pe,r.Pe):i instanceof Gc&&r instanceof Gc}(t.transform,e.transform)}class fN{constructor(e,n){this.version=e,this.transformResults=n}}class pi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pi}static exists(e){return new pi(void 0,e)}static updateTime(e){return new pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fh{}function AT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new PT(t.key,pi.none()):new Rl(t.key,t.data,pi.none());{const n=t.data,i=dn.empty();let r=new vt(yt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new os(t.key,i,new kn(r.toArray()),pi.none())}}function pN(t,e,n){t instanceof Rl?function(r,s,o){const a=r.value.clone(),l=qv(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof os?function(r,s,o){if(!nc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(CT(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pa(t,e,n,i){return t instanceof Rl?function(s,o,a,l){if(!nc(s.precondition,o))return a;const c=s.value.clone(),h=Kv(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof os?function(s,o,a,l){if(!nc(s.precondition,o))return a;const c=Kv(s.fieldTransforms,l,o),h=o.data;return h.setAll(CT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return nc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=ST(i.transform,r||null);s!=null&&(n===null&&(n=dn.empty()),n.set(i.field,s))}return n||null}function Wv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&oo(i,r,(s,o)=>dN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rl extends Fh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class os extends Fh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function qv(t,e,n){const i=new Map;Pe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,hN(o,a,n[r]))}return i}function Kv(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,cN(s,o,e))}return i}class PT extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mN extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&pN(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Pa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Pa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ET();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=AT(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,i)=>Wv(n,i))&&oo(this.baseMutations,e.baseMutations,(n,i)=>Wv(n,i))}}class om{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Pe(e.mutations.length===i.length);let r=function(){return sN}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new om(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,we;function wN(t){switch(t){default:return se();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function RT(t){if(t===void 0)return wi("GRPC error has no .code"),z.UNKNOWN;switch(t){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return se()}}(we=et||(et={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new $r([4294967295,4294967295],0);function Gv(t){const e=xN().encode(t),n=new tT;return n.update(e),new Uint8Array(n.digest())}function Qv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $r([n,i],0),new $r([r,s],0)]}class am{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(i<0)throw new da(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$r.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply($r.fromNumber(i)));return r.compare(EN)===1&&(r=new $r([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Gv(e),[i,r]=Qv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new am(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Gv(e),[i,r]=Qv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new jh(oe.min(),r,new ze(Se),xi(),fe())}}class Nl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nl(i,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class NT{constructor(e,n){this.targetId=e,this.me=n}}class DT{constructor(e,n,i=xt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Yv{constructor(){this.fe=0,this.ge=Jv(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),i=fe();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:se()}}),new Nl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Jv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TN{constructor(e){this.Le=e,this.Be=new Map,this.ke=xi(),this.qe=Xv(),this.Qe=new ze(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(_p(s))if(i===0){const o=new ne(s.path);this.Ue(n,o,Pt.newNoDocument(o,oe.min()))}else Pe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Zr(i).toUint8Array()}catch(l){if(l instanceof cT)return so("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new am(o,r,s)}catch(l){return so(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&_p(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Pt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=fe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new jh(e,n,this.Qe,this.ke,i);return this.ke=xi(),this.qe=Xv(),this.Qe=new ze(Se),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Yv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Xv(){return new ze(ne.comparator)}function Jv(){return new ze(ne.comparator)}const SN={asc:"ASCENDING",desc:"DESCENDING"},bN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IN={and:"AND",or:"OR"};class kN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wp(t,e){return t.useProto3Json||Dh(e)?e:{value:e}}function Yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AN(t,e){return Yc(t,e.toTimestamp())}function qn(t){return Pe(!!t),oe.fromTimestamp(function(n){const i=dr(n);return new lt(i.seconds,i.nanos)}(t))}function lm(t,e){return xp(t,e).canonicalString()}function xp(t,e){const n=function(r){return new qe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MT(t){const e=qe.fromString(t);return Pe(UT(e)),e}function Ep(t,e){return lm(t.databaseId,e.path)}function Qd(t,e){const n=MT(e);if(n.get(1)!==t.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(LT(n))}function VT(t,e){return lm(t.databaseId,e)}function CN(t){const e=MT(t);return e.length===4?qe.emptyPath():LT(e)}function Tp(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LT(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zv(t,e,n){return{name:Ep(t,e),fields:n.value.mapValue.fields}}function PN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Pe(h===void 0||typeof h=="string"),xt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),xt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?z.UNKNOWN:RT(c.code);return new te(h,c.message||"")}(o);n=new DT(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Qd(t,i.document.name),s=qn(i.document.updateTime),o=i.document.createTime?qn(i.document.createTime):oe.min(),a=new dn({mapValue:{fields:i.document.fields}}),l=Pt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new ic(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Qd(t,i.document),s=i.readTime?qn(i.readTime):oe.min(),o=Pt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new ic([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Qd(t,i.document),s=i.removedTargetIds||[];n=new ic([],s,r,null)}else{if(!("filter"in e))return se();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new vN(r,s),a=i.targetId;n=new NT(a,o)}}return n}function RN(t,e){let n;if(e instanceof Rl)n={update:Zv(t,e.key,e.value)};else if(e instanceof PT)n={delete:Ep(t,e.key)};else if(e instanceof os)n={update:Zv(t,e.key,e.data),updateMask:UN(e.fieldMask)};else{if(!(e instanceof mN))return se();n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw se()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:AN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function NN(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?qn(r.updateTime):qn(s);return o.isEqual(oe.min())&&(o=qn(s)),new fN(o,r.transformResults||[])}(n,e))):[]}function DN(t,e){return{documents:[VT(t,e.path)]}}function ON(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VT(t,r);const s=function(c){if(c.length!==0)return jT(Yn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ts(p.field),direction:LN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function MN(t){let e=CN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Pe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=FT(d);return p instanceof Yn&&pT(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Kc(Ss(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Dh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new qc(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new qc(m,p)}(n.endAt)),Z2(e,r,o,s,a,"F",l,c)}function VN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ss(n.unaryFilter.field);return st.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ss(n.unaryFilter.field);return st.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ss(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Ss(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(i=>FT(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function LN(t){return SN[t]}function FN(t){return bN[t]}function jN(t){return IN[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ss(t){return yt.fromServerFormat(t.fieldPath)}function jT(t){return t instanceof st?function(n){if(n.op==="=="){if(jv(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jv(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:FN(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const i=n.getFilters().map(r=>jT(r));return i.length===1?i[0]:{compositeFilter:{op:jN(n.op),filters:i}}}(t):se()}function UN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i,r,s=oe.min(),o=oe.min(),a=xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.ct=e}}function zN(t){const e=MN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.un=new HN}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(hr.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class HN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new vt(qe.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new vt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new uo(0)}static kn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Pa(i.mutation,r,kn.empty(),lt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=fe()){const r=Fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ha();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Fr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=xi();const o=Ca(),a=function(){return Ca()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof os)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Pa(h.mutation,c,h.mutation.getFieldMask(),lt.now())):o.set(c.key,kn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new qN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Ca();let r=new ze((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||kn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||fe()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=ET();h.forEach(p=>{if(!s.has(p)){const m=AT(n.get(p),i.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):U.resolve(Fr());let a=-1,l=s;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,fe())).next(h=>({batchId:a,changes:xT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(i=>{let r=ha();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(d,p){return new Oh(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Pt.newInvalidDocument(h)))});let a=ha();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Pa(h.mutation,c,kn.empty(),lt.now()),Vh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:qn(r.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:zN(r.bundledQuery),readTime:qn(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.overlays=new ze(ne.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fr();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const r=Fr(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Fr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Fr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return U.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new _N(n,i));let s=this.Ir.get(n);s===void 0&&(s=fe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.Tr=new vt(ut.Er),this.dr=new vt(ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new ut(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new ut(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ne(new qe([])),i=new ut(n,e),r=new ut(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new qe([])),i=new ut(n,e),r=new ut(n,e+1);let s=fe();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ut(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(ut.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yN(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ut(n,0),r=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new vt(Se);return n.forEach(r=>{const s=new ut(r,0),o=new ut(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ne.isDocumentKey(s)||(s=s.child(""));const o=new ut(new ne(s),0);let a=new vt(Se);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return U.forEach(n.mutations,r=>{const s=new ut(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new ut(n,0),r=this.br.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.Mr=e,this.docs=function(){return new ze(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let i=xi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Pt.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=xi();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||O2(D2(h),i)<=0||(r.has(h.key)||Vh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,i,r){se()}Or(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ZN(this)}getSize(e){return U.resolve(this.size)}}class ZN extends WN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.persistence=e,this.Nr=new So(n=>nm(n),im),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new um,this.targetCount=0,this.kr=uo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jg(0),this.Kr=!1,this.Kr=!0,this.$r=new YN,this.referenceDelegate=e(this),this.Ur=new eD(this),this.indexManager=new $N,this.remoteDocumentCache=function(r){return new JN(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new BN(n),this.Gr=new GN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new XN(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){X("MemoryPersistence","Starting transaction:",e);const r=new nD(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class nD extends V2{constructor(e){super(),this.currentSequenceNumber=e}}class cm{constructor(e){this.persistence=e,this.Jr=new um,this.Yr=null}static Zr(e){return new cm(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,i=>{const r=ne.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=fe(),r=fe();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return oR()?8:L2(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new iD;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(ea()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(ea()<=ye.DEBUG&&X("QueryEngine","Query:",Es(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ea()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):U.resolve())}Yi(e,n){if($v(n))return U.resolve(null);let i=Wn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=vp(n,null,"F"),i=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=fe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,vp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return $v(n)||r.isEqual(oe.min())?U.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?U.resolve(null):(ea()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Es(n)),this.rs(e,o,n,N2(r,-1)).next(a=>a))})}ts(e,n){let i=new vt(vT(e));return n.forEach((r,s)=>{Vh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return ea()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ze(Se),this._s=new So(s=>nm(s),im),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oD(t,e,n,i){return new sD(t,e,n,i)}async function BT(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=fe();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function aD(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let m=U.resolve();return p.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(x=>{const T=c.docVersions.get(y);Pe(T!==null),x.version.compareTo(T)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=fe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function zT(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lD(t,e){const n=ae(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(xt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(x,T,w){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=xi(),c=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(uD(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(oe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function uD(t,e,n){let i=fe(),r=fe();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=xi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function cD(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function hD(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new qi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Sp(t,e,n){const i=ae(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Pl(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function e0(t,e,n){const i=ae(t);let r=oe.min(),s=fe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ae(l),p=d._s.get(h);return p!==void 0?U.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(i,o,Wn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:oe.min(),n?s:fe())).next(a=>(dD(i,nN(e),a),{documents:a,Ts:s})))}function dD(t,e,n){let i=t.us.get(e)||oe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class t0{constructor(){this.activeTargetIds=lN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fD{constructor(){this.so=new t0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new t0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=null;function Yd(){return bu===null?bu=function(){return 268435456+Math.round(2147483648*Math.random())}():bu++,"0x"+bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class yD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Yd(),l=this.xo(n,i.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(X("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw so("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=gD[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Yd();return new Promise((o,a)=>{const l=new nT;l.setWithCredentials(!0),l.listenOnce(iT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ec.NO_ERROR:const h=l.getResponseJson();X(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ec.TIMEOUT:X(It,`RPC '${e}' ${s} timed out`),a(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const d=l.getStatus();if(X(It,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(w)>=0?w:z.UNKNOWN}(m.status);a(new te(y,m.message))}else a(new te(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(z.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{X(It,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);X(It,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Yd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oT(),a=sT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");X(It,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,m=!1;const y=new mD({Io:T=>{m?X(It,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(p||(X(It,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),X(It,`RPC '${e}' stream ${r} sending:`,T),d.send(T))},To:()=>d.close()}),x=(T,w,v)=>{T.listen(w,I=>{try{v(I)}catch(D){setTimeout(()=>{throw D},0)}})};return x(d,ca.EventType.OPEN,()=>{m||(X(It,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),x(d,ca.EventType.CLOSE,()=>{m||(m=!0,X(It,`RPC '${e}' stream ${r} transport closed`),y.So())}),x(d,ca.EventType.ERROR,T=>{m||(m=!0,so(It,`RPC '${e}' stream ${r} transport errored:`,T),y.So(new te(z.UNAVAILABLE,"The operation could not be completed")))}),x(d,ca.EventType.MESSAGE,T=>{var w;if(!m){const v=T.data[0];Pe(!!v);const I=v,D=I.error||((w=I[0])===null||w===void 0?void 0:w.error);if(D){X(It,`RPC '${e}' stream ${r} received error:`,D);const O=D.status;let L=function(b){const A=et[b];if(A!==void 0)return RT(A)}(O),S=D.message;L===void 0&&(L=z.INTERNAL,S="Unknown error status: "+O+" with message "+D.message),m=!0,y.So(new te(L,S)),d.close()}else X(It,`RPC '${e}' stream ${r} received:`,v),y.bo(v)}}),x(a,rT.STAT_EVENT,T=>{T.stat===pp.PROXY?X(It,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===pp.NOPROXY&&X(It,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){return new kN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&X("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $T(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(wi(n.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new te(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _D extends HT{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=PN(this.serializer,e),i=function(s){if(!("targetChange"in s))return oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?qn(o.readTime):oe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Tp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=_p(l)?{documents:DN(s,l)}:{query:ON(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OT(s,o.resumeToken);const c=wp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Yc(s,o.snapshotVersion.toTimestamp());const c=wp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=VN(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Tp(this.serializer),n.removeTarget=e,this.a_(n)}}class vD extends HT{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=NN(e.writeResults,e.commitTime),i=qn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Tp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>RN(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(z.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,xp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wi(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{as(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ae(l);c.L_.add(4),await Dl(c),c.q_.set("Unknown"),c.L_.delete(4),await Bh(c)}(this))})}),this.q_=new xD(i,r)}}async function Bh(t){if(as(t))for(const e of t.B_)await e(!0)}async function Dl(t){for(const e of t.B_)await e(!1)}function WT(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gm(n)?pm(n):bo(n).r_()&&fm(n,e))}function dm(t,e){const n=ae(t),i=bo(n);n.N_.delete(e),i.r_()&&qT(n,e),n.N_.size===0&&(i.r_()?i.o_():as(n)&&n.q_.set("Unknown"))}function fm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).A_(e)}function qT(t,e){t.Q_.xe(e),bo(t).R_(e)}function pm(t){t.Q_=new TN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.q_.v_()}function gm(t){return as(t)&&!bo(t).n_()&&t.N_.size>0}function as(t){return ae(t).L_.size===0}function KT(t){t.Q_=void 0}async function TD(t){t.q_.set("Online")}async function SD(t){t.N_.forEach((e,n)=>{fm(t,e)})}async function bD(t,e){KT(t),gm(t)?(t.q_.M_(e),pm(t)):t.q_.set("Unknown")}async function ID(t,e,n){if(t.q_.set("Online"),e instanceof DT&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xc(t,i)}else if(e instanceof ic?t.Q_.Ke(e):e instanceof NT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const i=await zT(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),qT(s,l);const d=new qi(h.target,l,c,h.sequenceNumber);fm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){X("RemoteStore","Failed to raise snapshot:",i),await Xc(t,i)}}async function Xc(t,e,n){if(!Pl(e))throw e;t.L_.add(1),await Dl(t),t.q_.set("Offline"),n||(n=()=>zT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bh(t)})}function GT(t,e){return e().catch(n=>Xc(t,n,e))}async function zh(t){const e=ae(t),n=fr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kD(e);)try{const r=await cD(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,AD(e,r)}catch(r){await Xc(e,r)}QT(e)&&YT(e)}function kD(t){return as(t)&&t.O_.length<10}function AD(t,e){t.O_.push(e);const n=fr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function QT(t){return as(t)&&!fr(t).n_()&&t.O_.length>0}function YT(t){fr(t).start()}async function CD(t){fr(t).p_()}async function PD(t){const e=fr(t);for(const n of t.O_)e.m_(n.mutations)}async function RD(t,e,n){const i=t.O_.shift(),r=om.from(i,e,n);await GT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await zh(t)}async function ND(t,e){e&&fr(t).V_&&await async function(i,r){if(function(o){return wN(o)&&o!==z.ABORTED}(r.code)){const s=i.O_.shift();fr(i).s_(),await GT(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await zh(i)}}(t,e),QT(t)&&YT(t)}async function i0(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const i=as(n);n.L_.add(3),await Dl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bh(n)}async function DD(t,e){const n=ae(t);e?(n.L_.delete(2),await Bh(n)):e||(n.L_.add(2),await Dl(n),n.q_.set("Unknown"))}function bo(t){return t.K_||(t.K_=function(n,i,r){const s=ae(n);return s.w_(),new _D(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:TD.bind(null,t),Ro:SD.bind(null,t),mo:bD.bind(null,t),d_:ID.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gm(t)?pm(t):t.q_.set("Unknown")):(await t.K_.stop(),KT(t))})),t.K_}function fr(t){return t.U_||(t.U_=function(n,i,r){const s=ae(n);return s.w_(),new vD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:CD.bind(null,t),mo:ND.bind(null,t),f_:PD.bind(null,t),g_:RD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zh(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new mm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(t,e){if(wi("AsyncQueue",`${e}: ${t}`),Pl(t))return new te(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ne.comparator(n.key,i.key):(n,i)=>ne.comparator(n.key,i.key),this.keyedMap=ha(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ws;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.W_=new ze(ne.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class co{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new co(e,n,Ws.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class MD{constructor(){this.queries=s0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ae(n),s=r.queries;r.queries=s0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new te(z.ABORTED,"Firestore shutting down"))}}function s0(){return new So(t=>_T(t),Mh)}async function VD(t,e){const n=ae(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new OD,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ym(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_m(n)}async function LD(t,e){const n=ae(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function FD(t,e){const n=ae(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&_m(n)}function jD(t,e,n){const i=ae(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function _m(t){t.Y_.forEach(e=>{e.next()})}var bp,o0;(o0=bp||(bp={})).ea="default",o0.Cache="cache";class UD{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class BD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=vT(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new r0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=Vh(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;p&&m?p.data.isEqual(m.data)?y!==x&&(i.track({type:3,doc:m}),T=!0):this.ga(p,m)||(i.track({type:2,doc:m}),T=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),T=!0):p&&!m&&(i.track({type:1,doc:p}),T=!0,(l||c)&&(a=!0)),T&&(m?(o=o.add(m),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,y){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return x(m)-x(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new co(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new r0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new JT(i))}),this.da.forEach(i=>{e.has(i)||n.push(new XT(i))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return co.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class zD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class $D{constructor(e){this.key=e,this.va=!1}}class HD{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new So(a=>_T(a),Mh),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(ne.comparator),this.Na=new Map,this.La=new um,this.Ba={},this.ka=new Map,this.qa=uo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WD(t,e,n=!0){const i=rS(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await ZT(i,e,n,!0),r}async function qD(t,e){const n=rS(t);await ZT(n,e,!0,!1)}async function ZT(t,e,n,i){const r=await hD(t.localStore,Wn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await KD(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&WT(t.remoteStore,r),a}async function KD(t,e,n,i,r){t.Ka=(d,p,m)=>async function(x,T,w,v){let I=T.view.ma(w);I.ns&&(I=await e0(x.localStore,T.query,!1).then(({documents:S})=>T.view.ma(S,I)));const D=v&&v.targetChanges.get(T.targetId),O=v&&v.targetMismatches.get(T.targetId)!=null,L=T.view.applyChanges(I,x.isPrimaryClient,D,O);return l0(x,T.targetId,L.wa),L.snapshot}(t,d,p,m);const s=await e0(t.localStore,e,!0),o=new BD(e,s.Ts),a=o.ma(s.documents),l=Nl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);l0(t,n,c.wa);const h=new zD(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function GD(t,e,n){const i=ae(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Mh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Sp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&dm(i.remoteStore,r.targetId),Ip(i,r.targetId)}).catch(Cl)):(Ip(i,r.targetId),await Sp(i.localStore,r.targetId,!0))}async function QD(t,e){const n=ae(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),dm(n.remoteStore,i.targetId))}async function YD(t,e,n){const i=iO(t);try{const r=await function(o,a){const l=ae(o),c=lt.now(),h=a.reduce((m,y)=>m.add(y.key),fe());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=xi(),x=fe();return l.cs.getEntries(m,h).next(T=>{y=T,y.forEach((w,v)=>{v.isValidDocument()||(x=x.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(T=>{d=T;const w=[];for(const v of a){const I=gN(v,d.get(v.key).overlayedDocument);I!=null&&w.push(new os(v.key,I,hT(I.value.mapValue),pi.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(T=>{p=T;const w=T.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(m,T.batchId,w)})}).then(()=>({batchId:p.batchId,changes:xT(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ze(Se)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await Ol(i,r.changes),await zh(i.remoteStore)}catch(r){const s=ym(r,"Failed to persist write");n.reject(s)}}async function eS(t,e){const n=ae(t);try{const i=await lD(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Pe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Pe(o.va):r.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await Ol(n,i,e)}catch(i){await Cl(i)}}function a0(t,e,n){const i=ae(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&_m(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function XD(t,e,n){const i=ae(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new ze(ne.comparator);o=o.insert(s,Pt.newNoDocument(s,oe.min()));const a=fe().add(s),l=new jh(oe.min(),new Map,new ze(Se),o,a);await eS(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),vm(i)}else await Sp(i.localStore,e,!1).then(()=>Ip(i,e,n)).catch(Cl)}async function JD(t,e){const n=ae(t),i=e.batch.batchId;try{const r=await aD(n.localStore,e);nS(n,i,null),tS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ol(n,r)}catch(r){await Cl(r)}}async function ZD(t,e,n){const i=ae(t);try{const r=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);nS(i,e,n),tS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ol(i,r)}catch(r){await Cl(r)}}function tS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nS(t,e,n){const i=ae(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||iS(t,i)})}function iS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vm(t))}function l0(t,e,n){for(const i of n)i instanceof XT?(t.La.addReference(i.key,e),eO(t,i)):i instanceof JT?(X("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||iS(t,i.key)):se()}function eO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(i),vm(t))}function vm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(qe.fromString(e)),i=t.qa.next();t.Na.set(i,new $D(n)),t.Oa=t.Oa.insert(n,i),WT(t.remoteStore,new qi(Wn(rm(n.path)),i,"TargetPurposeLimboResolution",Jg.oe))}}async function Ol(t,e,n){const i=ae(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=hm.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=ae(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,p=>U.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>U.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!Pl(d))throw d;X("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.os.get(p),y=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,x)}}}(i.localStore,s))}async function tO(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const i=await BT(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new te(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ol(n,i.hs)}}function nO(t,e){const n=ae(t),i=n.Na.get(e);if(i&&i.va)return fe().add(i.key);{let r=fe();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function rS(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XD.bind(null,e),e.Ca.d_=FD.bind(null,e.eventManager),e.Ca.$a=jD.bind(null,e.eventManager),e}function iO(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZD.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oD(this.persistence,new rD,e.initialUser,this.serializer)}Ga(e){return new tD(cm.Zr,this.serializer)}Wa(e){return new fD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class kp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tO.bind(null,this.syncEngine),await DD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MD}()}createDatastore(e){const n=Uh(e.databaseInfo.databaseId),i=function(s){return new yD(s)}(e.databaseInfo);return function(s,o,a,l){return new wD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new ED(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>a0(this.syncEngine,n,0),function(){return n0.D()?new n0:new pD}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new HD(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ae(r);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Dl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kp.provider={build:()=>new kp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=At.UNAUTHENTICATED,this.clientId=lT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ym(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await BT(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function u0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oO(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>i0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>i0(e.remoteStore,r)),t._onlineComponents=e}async function oO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await Jd(t,new Jc)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Jd(t,new Jc);return t._offlineComponents}async function sS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await u0(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await u0(t,new kp))),t._onlineComponents}function aO(t){return sS(t).then(e=>e.syncEngine)}async function lO(t){const e=await sS(t),n=e.eventManager;return n.onListen=WD.bind(null,e.syncEngine),n.onUnlisten=GD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QD.bind(null,e.syncEngine),n}function uO(t,e,n={}){const i=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new rO({next:p=>{h.Za(),o.enqueueAndForget(()=>LD(s,d));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new UD(rm(a.path),h,{includeMetadataChanges:!0,_a:!0});return VD(s,d)}(await lO(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t,e,n){if(!n)throw new te(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hO(t,e,n,i){if(e===!0&&i===!0)throw new te(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h0(t){if(!ne.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function cl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wm(t);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new T2;switch(i.type){case"firstParty":return new k2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=c0.get(n);i&&(X("ComponentProvider","Removing Datastore"),c0.delete(n),i.terminate())}(this),Promise.resolve()}}function dO(t,e,n,i={}){var r;const s=(t=cl(t,xm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=At.MOCK_USER;else{a=ZP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new te(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new At(c)}t._authCredentials=new S2(new aT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Em(this.firestore,e,this._query)}}class yn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class hl extends Em{constructor(e,n,i){super(e,n,rm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new ne(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function f0(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=lT.newId()),cO("doc","path",e),t instanceof xm){const i=qe.fromString(e,...n);return h0(i),new yn(t,null,new ne(i))}{if(!(t instanceof yn||t instanceof hl))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(qe.fromString(e,...n));return h0(i),new yn(t.firestore,t instanceof hl?t.converter:null,new ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $T(this,"async_queue_retry"),this.Vu=()=>{const i=Xd();i&&X("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ar;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Pl(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw wi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=mm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Tm extends xm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new p0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p0(e),this._firestoreClient=void 0,await e}}}function fO(t,e){const n=typeof t=="object"?t:J1(),i=typeof t=="string"?t:"(default)",r=Yg(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=XP("firestore");s&&dO(r,...s)}return r}function aS(t){if(t._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pO(t),t._firestoreClient}function pO(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new U2(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new sO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ho(xt.fromBase64String(e))}catch(n){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ho(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=/^__.*__$/;class mO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rl(e,this.data,n,this.fieldTransforms)}}function uS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class km{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uS(this.Cu)&&gO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Uh(e)}Qu(e,n,i,r=!1){return new km({Cu:e,methodName:n,qu:i,path:yt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _O(t){const e=t._freezeSettings(),n=Uh(t._databaseId);return new yO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vO(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);fS("Data must be an object, but it was:",o,i);const a=hS(i,o);let l,c;if(s.merge)l=new kn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=wO(e,d,n);if(!o.contains(p))throw new te(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);EO(h,p)||h.push(p)}l=new kn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new mO(new dn(a),l,c)}function cS(t,e){if(dS(t=Dn(t)))return fS("Unsupported field value:",e,t),hS(t,e);if(t instanceof lS)return function(i,r){if(!uS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=cS(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=lt.fromDate(i);return{timestampValue:Yc(r.serializer,s)}}if(i instanceof lt){const s=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yc(r.serializer,s)}}if(i instanceof bm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ho)return{bytesValue:OT(r.serializer,i._byteString)};if(i instanceof yn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Im)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return sm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${wm(i)}`)}(t,e)}function hS(t,e){const n={};return uT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(t,(i,r)=>{const s=cS(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function dS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof bm||t instanceof ho||t instanceof yn||t instanceof lS||t instanceof Im)}function fS(t,e,n){if(!dS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=wm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function wO(t,e,n){if((e=Dn(e))instanceof Sm)return e._internalPath;if(typeof e=="string")return pS(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const xO=new RegExp("[~\\*/\\[\\]]");function pS(t,e,n){if(e.search(xO)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sm(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new te(z.INVALID_ARGUMENT,a+t+l)}function EO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TO extends gS{data(){return super.data()}}function mS(t,e){return typeof e=="string"?pS(t,e):e instanceof Sm?e._internalPath:e._delegate._internalPath}class SO{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return To(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Qe(o.doubleValue));return new Im(s)}convertGeoPoint(e){return new bm(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=em(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const n=dr(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=qe.fromString(e);Pe(UT(i));const r=new ol(i.get(1),i.get(3)),s=new ne(i.popFirst(5));return r.isEqual(n)||wi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yS extends gS{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(mS("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class kO extends yS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){t=cl(t,yn);const e=cl(t.firestore,Tm);return uO(aS(e),t._key).then(n=>NO(e,t,n))}class CO extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function PO(t,e,n){t=cl(t,yn);const i=cl(t.firestore,Tm),r=bO(t.converter,e);return RO(i,[vO(_O(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,pi.none())])}function RO(t,e){return function(i,r){const s=new ar;return i.asyncQueue.enqueueAndForget(async()=>YD(await aO(i),r,s)),s.promise}(aS(t),e)}function NO(t,e,n){const i=n.docs.get(e._key),r=new CO(t);return new yS(t,r,e._key,i,new IO(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Eo=r})(xo),ro(new Xr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Tm(new b2(i.getProvider("auth-internal")),new C2(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),or(Dv,"4.7.3",e),or(Dv,"4.7.3","esm2017")})();var DO="firebase",OO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(DO,OO,"app");function Am(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function _S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MO=_S,vS=new kl("auth","Firebase",_S());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Gg("@firebase/auth");function VO(t,...e){eh.logLevel<=ye.WARN&&eh.warn(`Auth (${xo}): ${t}`,...e)}function rc(t,...e){eh.logLevel<=ye.ERROR&&eh.error(`Auth (${xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,...e){throw Cm(t,...e)}function Kn(t,...e){return Cm(t,...e)}function wS(t,e,n){const i=Object.assign(Object.assign({},MO()),{[e]:n});return new kl("auth","Firebase",i).create(e,{appName:t.name})}function Hr(t){return wS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return vS.create(t,...e)}function re(t,e,...n){if(!t)throw Cm(e,...n)}function ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rc(e),new Error(e)}function Ti(t,e){t||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LO(){return g0()==="http:"||g0()==="https:"}function g0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LO()||iR()||"connection"in navigator)?navigator.onLine:!0}function jO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ti(n>e,"Short delay should be less than long delay!"),this.isMobile=eR()||rR()}get(){return FO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){Ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Ml(3e4,6e4);function Rm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Io(t,e,n,i,r={}){return ES(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Al(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return nR()||(c.referrerPolicy="no-referrer"),xS.fetch()(TS(t,t.config.apiHost,n,a),c)})}async function ES(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},UO),e);try{const r=new $O(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Iu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Iu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Iu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Iu(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw wS(t,h,c);Ei(t,h)}}catch(r){if(r instanceof Ii)throw r;Ei(t,"network-request-failed",{message:String(r)})}}async function zO(t,e,n,i,r={}){const s=await Io(t,e,n,i,r);return"mfaPendingCredential"in s&&Ei(t,"multi-factor-auth-required",{_serverResponse:s}),s}function TS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Pm(t.config,r):`${t.config.apiScheme}://${r}`}class $O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Kn(this.auth,"network-request-failed")),BO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Iu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Kn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e){return Io(t,"POST","/v1/accounts:delete",e)}async function SS(t,e){return Io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WO(t,e=!1){const n=Dn(t),i=await n.getIdToken(e),r=Nm(i);re(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ra(Zd(r.auth_time)),issuedAtTime:Ra(Zd(r.iat)),expirationTime:Ra(Zd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zd(t){return Number(t)*1e3}function Nm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const r=W1(n);return r?JSON.parse(r):(rc("Failed to decode base64 JWT payload"),null)}catch(r){return rc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function m0(t){const e=Nm(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ii&&qO(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function qO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ra(this.lastLoginAt),this.creationTime=Ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t){var e;const n=t.auth,i=await t.getIdToken(),r=await dl(t,SS(n,{idToken:i}));re(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bS(s.providerUserInfo):[],a=QO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function GO(t){const e=Dn(t);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QO(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bS(t){return t.map(e=>{var{providerId:n}=e,i=Am(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(t,e){const n=await ES(t,{},async()=>{const i=Al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=TS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XO(t,e){return Io(t,"POST","/v2/accounts:revokeToken",Rm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=m0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await YO(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new qs;return i&&(re(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(re(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hi{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await dl(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WO(this,e)}reload(){return GO(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await th(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(Hr(this.auth));const e=await this.getIdToken();return await dl(this,HO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:D,isAnonymous:O,providerData:L,stsTokenManager:S}=n;re(I&&S,e,"internal-error");const _=qs.fromJSON(this.name,S);re(typeof I=="string",e,"internal-error"),Ri(d,e.name),Ri(p,e.name),re(typeof D=="boolean",e,"internal-error"),re(typeof O=="boolean",e,"internal-error"),Ri(m,e.name),Ri(y,e.name),Ri(x,e.name),Ri(T,e.name),Ri(w,e.name),Ri(v,e.name);const b=new hi({uid:I,auth:e,email:p,emailVerified:D,displayName:d,isAnonymous:O,photoURL:y,phoneNumber:m,tenantId:x,stsTokenManager:_,createdAt:w,lastLoginAt:v});return L&&Array.isArray(L)&&(b.providerData=L.map(A=>Object.assign({},A))),T&&(b._redirectEventId=T),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new qs;r.updateFromServerResponse(n);const s=new hi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await th(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];re(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?bS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new qs;a.updateFromIdToken(i);const l=new hi({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Cp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;function di(t){Ti(t instanceof Function,"Expected a class definition");let e=y0.get(t);return e?(Ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,y0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IS.type="NONE";const _0=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ks{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=sc(this.userKey,r.apiKey,s),this.fullPersistenceKey=sc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ks(di(_0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||di(_0);const o=sc(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=hi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ks(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ks(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NS(e))return"Blackberry";if(DS(e))return"Webos";if(AS(e))return"Safari";if((e.includes("chrome/")||CS(e))&&!e.includes("edge/"))return"Chrome";if(RS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kS(t=Dt()){return/firefox\//i.test(t)}function AS(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CS(t=Dt()){return/crios\//i.test(t)}function PS(t=Dt()){return/iemobile/i.test(t)}function RS(t=Dt()){return/android/i.test(t)}function NS(t=Dt()){return/blackberry/i.test(t)}function DS(t=Dt()){return/webos/i.test(t)}function Dm(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JO(t=Dt()){var e;return Dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZO(){return sR()&&document.documentMode===10}function OS(t=Dt()){return Dm(t)||RS(t)||DS(t)||NS(t)||/windows phone/i.test(t)||PS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e=[]){let n;switch(t){case"Browser":n=v0(Dt());break;case"Worker":n=`${v0(Dt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e={}){return Io(t,"GET","/v2/passwordPolicy",Rm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=6;class iM{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w0(this),this.idTokenSubscription=new w0(this),this.beforeStateQueue=new eM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ks.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await SS(this,{idToken:e}),i=await hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(Hr(this));const n=e?Dn(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tM(this),n=new iM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await XO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Ks.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Om(t){return Dn(t)}class w0{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sM(t){Mm=t}function oM(t){return Mm.loadJS(t)}function aM(){return Mm.gapiScript}function lM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e){const n=Yg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if($c(s,e??{}))return r;Ei(r,"already-initialized")}return n.initialize({options:e})}function cM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function hM(t,e,n){const i=Om(t);re(i._canInitEmulator,i,"emulator-config-failed"),re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=VS(e),{host:o,port:a}=dM(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),fM()}function VS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dM(t){const e=VS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:x0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:x0(o)}}}function x0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e){return zO(t,"POST","/v1/accounts:signInWithIdp",Rm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="http://localhost";class ts extends LS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Am(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ts(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Gs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}buildRequest(){const e={requestUri:pM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Al(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends FS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Vl{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ji.credential(n,i)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Vl{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com";Ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Vl{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Bi.credential(n,i)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await hi._fromIdTokenResponse(e,i,r),o=E0(i);return new fo({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=E0(i);return new fo({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function E0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Ii{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new nh(e,n,i,r)}}function jS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(t,s,e,i):s})}async function gM(t,e,n=!1){const i=await dl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e,n=!1){const{auth:i}=t;if(Wi(i.app))return Promise.reject(Hr(i));const r="reauthenticate";try{const s=await dl(t,jS(i,r,e,t),n);re(s.idToken,i,"internal-error");const o=Nm(s.idToken);re(o,i,"internal-error");const{sub:a}=o;return re(t.uid===a,i,"user-mismatch"),fo._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ei(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(t,e,n=!1){if(Wi(t.app))return Promise.reject(Hr(t));const i="signIn",r=await jS(t,i,e),s=await fo._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t,e){return Dn(t).setPersistence(e)}function vM(t,e,n,i){return Dn(t).onIdTokenChanged(e,n,i)}function wM(t,e,n){return Dn(t).beforeAuthStateChanged(e,n)}const ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=1e3,EM=10;class BS extends US{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);ZO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,EM):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},xM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BS.type="LOCAL";const zS=BS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends US{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$S.type="SESSION";const HS=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new $h(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await TM(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Vm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function bM(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function IM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AM(){return WS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firebaseLocalStorageDb",CM=1,rh="firebaseLocalStorage",KS="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(t,e){return t.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function PM(){const t=indexedDB.deleteDatabase(qS);return new Ll(t).toPromise()}function Pp(){const t=indexedDB.open(qS,CM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(rh,{keyPath:KS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(rh)?e(i):(i.close(),await PM(),e(await Pp()))})})}async function T0(t,e,n){const i=Hh(t,!0).put({[KS]:e,value:n});return new Ll(i).toPromise()}async function RM(t,e){const n=Hh(t,!1).get(e),i=await new Ll(n).toPromise();return i===void 0?null:i.value}function S0(t,e){const n=Hh(t,!0).delete(e);return new Ll(n).toPromise()}const NM=800,DM=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>DM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(AM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IM(),!this.activeServiceWorker)return;this.sender=new SM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await T0(e,ih,"1"),await S0(e,ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>T0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>RM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Hh(r,!1).getAll();return new Ll(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const OM=GS;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t,e){return e?di(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends LS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VM(t){return yM(t.auth,new Lm(t),t.bypassAuthState)}function LM(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),mM(n,new Lm(t),t.bypassAuthState)}async function FM(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),gM(n,new Lm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VM;case"linkViaPopup":case"linkViaRedirect":return FM;case"reauthViaPopup":case"reauthViaRedirect":return LM;default:Ei(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new Ml(2e3,1e4);class Ls extends QS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jM.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="pendingRedirect",oc=new Map;class BM extends QS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const i=await zM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zM(t,e){const n=WM(e),i=HM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $M(t,e){oc.set(t._key(),e)}function HM(t){return di(t._redirectPersistence)}function WM(t){return sc(UM,t.config.apiKey,t.name)}async function qM(t,e,n=!1){if(Wi(t.app))return Promise.reject(Hr(t));const i=Om(t),r=MM(i,e),o=await new BM(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=10*60*1e3;class GM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!YS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KM&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e={}){return Io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JM=/^https?/;async function ZM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YM(t);for(const n of e)try{if(eV(n))return}catch{}Ei(t,"unauthorized-domain")}function eV(t){const e=Ap(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!JM.test(n))return!1;if(XM.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Ml(3e4,6e4);function I0(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nV(t){return new Promise((e,n)=>{var i,r,s;function o(){I0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I0(),n(Kn(t,"network-request-failed"))},timeout:tV.get()})}if(!((r=(i=Gn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Gn().gapi)===null||s===void 0)&&s.load)o();else{const a=lM("iframefcb");return Gn()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},oM(`${aM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ac=null,e})}let ac=null;function iV(t){return ac=ac||nV(t),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new Ml(5e3,15e3),sV="__/auth/iframe",oV="emulator/auth/iframe",aV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uV(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pm(e,oV):`https://${t.config.authDomain}/${sV}`,i={apiKey:e.apiKey,appName:t.name,v:xo},r=lV.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Al(i).slice(1)}`}async function cV(t){const e=await iV(t),n=Gn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:uV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aV,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=Gn().setTimeout(()=>{s(o)},rV.get());function l(){Gn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dV=500,fV=600,pV="_blank",gV="http://localhost";class k0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mV(t,e,n,i=dV,r=fV){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hV),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Dt().toLowerCase();n&&(a=CS(c)?pV:n),kS(c)&&(e=e||gV,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(JO(c)&&a!=="_self")return yV(e||"",a),new k0(null);const d=window.open(e||"",a,h);re(d,t,"popup-blocked");try{d.focus()}catch{}return new k0(d)}function yV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="__/auth/handler",vV="emulator/auth/handler",wV=encodeURIComponent("fac");async function A0(t,e,n,i,r,s){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:xo,eventId:r};if(e instanceof FS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Vl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${wV}=${encodeURIComponent(l)}`:"";return`${xV(t)}?${Al(a).slice(1)}${c}`}function xV({config:t}){return t.emulator?Pm(t,vV):`https://${t.authDomain}/${_V}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="webStorageSupport";class EV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HS,this._completeRedirectFn=qM,this._overrideRedirectResult=$M}async _openPopup(e,n,i,r){var s;Ti((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await A0(e,n,i,Ap(),r);return mV(e,o,Vm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await A0(e,n,i,Ap(),r);return bM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ti(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cV(e),i=new GM(e);return n.register("authEvent",r=>(re(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ef,{type:ef},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[ef];o!==void 0&&n(!!o),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OS()||AS()||Dm()}}const TV=EV;var C0="@firebase/auth",P0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IV(t){ro(new Xr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MS(t)},c=new rM(i,r,s,l);return cM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ro(new Xr("auth-internal",e=>{const n=Om(e.getProvider("auth").getImmediate());return(i=>new SV(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(C0,P0,bV(t)),or(C0,P0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=5*60,AV=G1("authIdTokenMaxAge")||kV;let R0=null;const CV=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>AV)return;const r=n==null?void 0:n.token;R0!==r&&(R0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function PV(t=J1()){const e=Yg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uM(t,{popupRedirectResolver:TV,persistence:[OM,zS,HS]}),i=G1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=CV(s.toString());wM(n,o,()=>o(n.currentUser)),vM(n,a=>o(a))}}const r=q1("auth");return r&&hM(n,`http://${r}`),n}function RV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Kn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",RV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IV("Browser");const NV={apiKey:"AIzaSyC98xaAkPZR-0YNME-vg3DncBSTtPCHXVc",authDomain:"elite-advisor-tools.firebaseapp.com",projectId:"elite-advisor-tools",storageBucket:"elite-advisor-tools.appspot.com",messagingSenderId:"483063045766",appId:"1:483063045766:web:f98a09466990ea5dd6fb07"},DV=X1(NV),N0=fO(DV),Rp=PV();_M(Rp,zS).catch(console.error);const OV=z1(t=>({settings:null,loading:!1,error:null,loadBranding:async()=>{var n;const e=(n=Rp.currentUser)==null?void 0:n.uid;if(!e){t({error:"You must be logged in to load branding settings"});return}t({loading:!0,error:null});try{const i=f0(N0,"branding",e),r=await AO(i);r.exists()&&t({settings:r.data()})}catch(i){t({error:"Failed to load branding settings. Please try again."}),console.error("Error loading branding:",i)}finally{t({loading:!1})}},saveBranding:async e=>{var i;const n=(i=Rp.currentUser)==null?void 0:i.uid;if(!n){t({error:"You must be logged in to save branding settings"});return}t({loading:!0,error:null});try{const r=f0(N0,"branding",n);await PO(r,e),t({settings:e})}catch(r){t({error:"Failed to save branding settings. Please try again."}),console.error("Error saving branding:",r)}finally{t({loading:!1})}}})),an="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 px-4";function MV(){const{settings:t,loading:e,error:n,loadBranding:i,saveBranding:r}=OV(),{register:s,handleSubmit:o,reset:a,formState:{errors:l,isDirty:c}}=V1();B.useEffect(()=>{i()},[i]),B.useEffect(()=>{t&&a(t)},[t,a]);const h=async p=>{await r(p)},d=({name:p,label:m,...y})=>{var x;return C.jsxs("div",{className:"space-y-1.5",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700",children:m}),C.jsxs("div",{className:"flex gap-3 items-center",children:[C.jsx("div",{className:"relative",children:C.jsx("input",{type:"color",...s(p),className:"h-11 w-14 rounded border border-gray-300 p-1 cursor-pointer"})}),C.jsx("input",{type:"text",...s(p,{pattern:{value:/^#[0-9A-Fa-f]{6}$/,message:"Please enter a valid hex color code"}}),className:an,placeholder:"#000000",...y})]}),l[p]&&C.jsx("p",{className:"text-sm text-red-600 mt-1",children:(x=l[p])==null?void 0:x.message})]})};return C.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:C.jsx("div",{className:"max-w-5xl mx-auto",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[C.jsxs("div",{className:"px-8 py-6 bg-gradient-to-r from-blue-600 to-blue-700",children:[C.jsx("h1",{className:"text-2xl font-bold text-white",children:"Branding Settings"}),C.jsx("p",{className:"mt-2 text-blue-100",children:"Customize how your calculators and reports appear to clients."})]}),n&&C.jsx("div",{className:"mx-8 mt-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:n}),C.jsxs("form",{onSubmit:o(h),className:"p-8 space-y-8",children:[C.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 space-y-6",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Company Information"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company Name"}),C.jsx("input",{type:"text",...s("companyName",{required:"Company name is required"}),className:an}),l.companyName&&C.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:l.companyName.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Company Website"}),C.jsx("input",{type:"url",...s("website"),className:an,placeholder:"https://example.com"})]}),C.jsxs("div",{className:"md:col-span-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Logo URL"}),C.jsx("input",{type:"url",...s("logoUrl"),className:an,placeholder:"https://example.com/logo.png"})]})]})]}),C.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 space-y-6",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Brand Colors"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsx(d,{name:"primaryColor",label:"Primary Color"}),C.jsx(d,{name:"secondaryColor",label:"Secondary Color"}),C.jsx(d,{name:"accentColor",label:"Accent Color"})]})]}),C.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 space-y-6",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Contact Information"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"First Name"}),C.jsx("input",{type:"text",...s("firstName",{required:"First name is required"}),className:an}),l.firstName&&C.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:l.firstName.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Last Name"}),C.jsx("input",{type:"text",...s("lastName",{required:"Last name is required"}),className:an}),l.lastName&&C.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:l.lastName.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Address"}),C.jsx("input",{type:"email",...s("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:an}),l.email&&C.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:l.email.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),C.jsx("input",{type:"tel",...s("phone"),className:an,placeholder:"+1 (555) 555-5555"})]}),C.jsxs("div",{className:"md:col-span-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Street Address"}),C.jsx("input",{type:"text",...s("streetAddress"),className:an})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"City"}),C.jsx("input",{type:"text",...s("city"),className:an})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"State"}),C.jsx("input",{type:"text",...s("state"),className:an})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Postal Code"}),C.jsx("input",{type:"text",...s("postalCode"),className:an})]})]})]}),C.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[C.jsx("button",{type:"button",onClick:()=>a(t),disabled:!c||e,className:"px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:"Reset"}),C.jsx("button",{type:"submit",disabled:!c||e,className:"px-6 py-2.5 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:e?"Saving...":"Save Changes"})]})]})]})})})}const VV=[{rate:"10%",single:"$0 - $11,000",married:"$0 - $22,000"},{rate:"12%",single:"$11,001 - $44,725",married:"$22,001 - $89,450"},{rate:"22%",single:"$44,726 - $95,375",married:"$89,451 - $190,750"},{rate:"24%",single:"$95,376 - $182,100",married:"$190,751 - $364,200"},{rate:"32%",single:"$182,101 - $231,250",married:"$364,201 - $462,500"},{rate:"35%",single:"$231,251 - $578,125",married:"$462,501 - $693,750"},{rate:"37%",single:"$578,126+",married:"$693,751+"}];function LV(){return C.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl p-6",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"2024 Tax Brackets"}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-gray-100",children:[C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rate"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Single"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Married Filing Jointly"})]})}),C.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:VV.map((t,e)=>C.jsxs("tr",{className:"hover:bg-gray-50",children:[C.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:t.rate}),C.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.single}),C.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.married})]},e))})]})}),C.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Note: These are marginal tax rates. You pay each rate only on the income within its bracket range."})]})}const FV=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],Vt=t=>{const e=typeof t=="string"?Np(t):t;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},Np=t=>{const e=t.replace(/[$,\s]/g,"");return e?Number(e):0},br="w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-3 px-4",ei="block text-sm font-medium text-gray-700 mb-2",ti="mt-1 text-sm text-red-600";function jV({onSubmit:t,loading:e}){const[n,i]=B.useState(!1),{register:r,handleSubmit:s,watch:o,control:a,formState:{errors:l}}=V1({defaultValues:{taxBracket:24,growthRate:5,state:""}}),c=o("age",65),h=new Date().getFullYear()-c,d=m=>m>=1960?75:m>=1951?73:72,p=m=>{const y={...m,qualifiedAccountValue:typeof m.qualifiedAccountValue=="string"?Np(m.qualifiedAccountValue):m.qualifiedAccountValue,birthYear:h};t(y)};return C.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 p-6",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Retirement Tax Bill Calculator"}),C.jsx("p",{className:"mt-4 text-gray-600",children:"Compare the tax implications of keeping your qualified retirement accounts versus converting to a Roth IRA"})]}),C.jsxs("form",{onSubmit:s(p),className:"space-y-8",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl shadow-sm p-8",children:[C.jsx("h2",{className:"text-xl font-semibold mb-6 text-blue-900 border-b border-blue-200 pb-2",children:"Contact Information"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"First Name"}),C.jsx("input",{type:"text",...r("firstName",{required:"First name is required"}),className:br}),l.firstName&&C.jsx("p",{className:ti,children:l.firstName.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"Last Name"}),C.jsx("input",{type:"text",...r("lastName",{required:"Last name is required"}),className:br}),l.lastName&&C.jsx("p",{className:ti,children:l.lastName.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"Email"}),C.jsx("input",{type:"email",...r("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:br}),l.email&&C.jsx("p",{className:ti,children:l.email.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"Phone"}),C.jsx("input",{type:"tel",...r("phone",{required:"Phone number is required"}),className:br}),l.phone&&C.jsx("p",{className:ti,children:l.phone.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"State"}),C.jsxs("select",{...r("state",{required:"State is required"}),className:br,children:[C.jsx("option",{value:"",children:"Select a state"}),FV.map(m=>C.jsx("option",{value:m.abbreviation,children:m.name},m.abbreviation))]}),l.state&&C.jsx("p",{className:ti,children:l.state.message})]})]})]}),C.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-xl shadow-sm p-8",children:[C.jsx("h2",{className:"text-xl font-semibold mb-6 text-green-900 border-b border-green-200 pb-2",children:"Financial Information"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"Current Age"}),C.jsx("input",{type:"number",...r("age",{required:"Age is required",min:{value:50,message:"Age must be at least 50"},max:{value:100,message:"Age must be less than 100"}}),className:br}),l.age&&C.jsx("p",{className:ti,children:l.age.message}),c&&C.jsxs("p",{className:"mt-2 text-sm text-green-800",children:["Birth Year: ",h," (RMD Start Age: ",d(h),")"]})]}),C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"Qualified Account Value"}),C.jsx(jd,{name:"qualifiedAccountValue",control:a,rules:{required:"Account value is required",min:{value:0,message:"Value must be positive"}},render:({field:{onChange:m,value:y}})=>C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx("span",{className:"text-gray-500",children:"$"})}),C.jsx("input",{type:"text",className:`${br} pl-7`,placeholder:"500,000",value:y?Vt(y).replace("$",""):"",onChange:x=>{const T=Np(x.target.value);m(T)}})]})}),l.qualifiedAccountValue&&C.jsx("p",{className:ti,children:l.qualifiedAccountValue.message})]}),C.jsxs("div",{children:[C.jsx("label",{className:ei,children:"Expected Annual Growth Rate"}),C.jsx(jd,{name:"growthRate",control:a,rules:{required:"Growth rate is required",min:{value:1,message:"Minimum growth rate is 1%"},max:{value:12,message:"Maximum growth rate is 12%"}},render:({field:m})=>C.jsx("div",{className:"space-y-2",children:C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("input",{type:"range",min:"1",max:"12",step:"0.5",...m,className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer"}),C.jsxs("span",{className:"text-green-800 font-medium min-w-[4rem]",children:[m.value,"%"]})]})})}),l.growthRate&&C.jsx("p",{className:ti,children:l.growthRate.message})]}),C.jsxs("div",{children:[C.jsxs("label",{className:ei,children:["Tax Bracket"," ",C.jsxs("button",{type:"button",onClick:()=>i(!n),className:"text-green-700 hover:text-green-800 text-sm ml-2 underline",children:[n?"Hide":"Show"," Tax Brackets"]})]}),C.jsx(jd,{name:"taxBracket",control:a,rules:{required:"Tax bracket is required",min:{value:10,message:"Minimum tax bracket is 10%"},max:{value:37,message:"Maximum tax bracket is 37%"}},render:({field:m})=>C.jsx("div",{className:"space-y-2",children:C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("input",{type:"range",min:"10",max:"37",step:"1",...m,className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer"}),C.jsxs("span",{className:"text-green-800 font-medium min-w-[4rem]",children:[m.value,"%"]})]})})}),l.taxBracket&&C.jsx("p",{className:ti,children:l.taxBracket.message})]})]}),n&&C.jsx(LV,{})]}),C.jsx("div",{className:"flex justify-end",children:C.jsx("button",{type:"submit",disabled:e,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors text-lg font-medium",children:e?"Calculating...":"Calculate Tax Impact"})})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fl(t){return t+.5|0}const Ki=(t,e,n)=>Math.max(Math.min(t,n),e);function fa(t){return Ki(Fl(t*2.55),0,255)}function lr(t){return Ki(Fl(t*255),0,255)}function ai(t){return Ki(Fl(t/2.55)/100,0,1)}function D0(t){return Ki(Fl(t*100),0,100)}const ln={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Dp=[..."0123456789ABCDEF"],UV=t=>Dp[t&15],BV=t=>Dp[(t&240)>>4]+Dp[t&15],ku=t=>(t&240)>>4===(t&15),zV=t=>ku(t.r)&&ku(t.g)&&ku(t.b)&&ku(t.a);function $V(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ln[t[1]]*17,g:255&ln[t[2]]*17,b:255&ln[t[3]]*17,a:e===5?ln[t[4]]*17:255}:(e===7||e===9)&&(n={r:ln[t[1]]<<4|ln[t[2]],g:ln[t[3]]<<4|ln[t[4]],b:ln[t[5]]<<4|ln[t[6]],a:e===9?ln[t[7]]<<4|ln[t[8]]:255})),n}const HV=(t,e)=>t<255?e(t):"";function WV(t){var e=zV(t)?UV:BV;return t?"#"+e(t.r)+e(t.g)+e(t.b)+HV(t.a,e):void 0}const qV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XS(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function KV(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function GV(t,e,n){const i=XS(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function QV(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Fm(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=QV(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function jm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(lr)}function Um(t,e,n){return jm(XS,t,e,n)}function YV(t,e,n){return jm(GV,t,e,n)}function XV(t,e,n){return jm(KV,t,e,n)}function JS(t){return(t%360+360)%360}function JV(t){const e=qV.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?fa(+e[5]):lr(+e[5]));const r=JS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=YV(r,s,o):e[1]==="hsv"?i=XV(r,s,o):i=Um(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function ZV(t,e){var n=Fm(t);n[0]=JS(n[0]+e),n=Um(n),t.r=n[0],t.g=n[1],t.b=n[2]}function eL(t){if(!t)return;const e=Fm(t),n=e[0],i=D0(e[1]),r=D0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ai(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const O0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},M0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tL(){const t={},e=Object.keys(M0),n=Object.keys(O0);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,O0[s]);s=parseInt(M0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Au;function nL(t){Au||(Au=tL(),Au.transparent=[0,0,0,0]);const e=Au[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rL(t){const e=iL.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?fa(o):Ki(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?fa(i):Ki(i,0,255)),r=255&(e[4]?fa(r):Ki(r,0,255)),s=255&(e[6]?fa(s):Ki(s,0,255)),{r:i,g:r,b:s,a:n}}}function sL(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ai(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const tf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ws=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oL(t,e,n){const i=ws(ai(t.r)),r=ws(ai(t.g)),s=ws(ai(t.b));return{r:lr(tf(i+n*(ws(ai(e.r))-i))),g:lr(tf(r+n*(ws(ai(e.g))-r))),b:lr(tf(s+n*(ws(ai(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Cu(t,e,n){if(t){let i=Fm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Um(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function ZS(t,e){return t&&Object.assign(e||{},t)}function V0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=lr(t[3]))):(e=ZS(t,{r:0,g:0,b:0,a:1}),e.a=lr(e.a)),e}function aL(t){return t.charAt(0)==="r"?rL(t):JV(t)}class fl{constructor(e){if(e instanceof fl)return e;const n=typeof e;let i;n==="object"?i=V0(e):n==="string"&&(i=$V(e)||nL(e)||aL(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=ZS(this._rgb);return e&&(e.a=ai(e.a)),e}set rgb(e){this._rgb=V0(e)}rgbString(){return this._valid?sL(this._rgb):void 0}hexString(){return this._valid?WV(this._rgb):void 0}hslString(){return this._valid?eL(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=oL(this._rgb,e._rgb,n)),this}clone(){return new fl(this.rgb)}alpha(e){return this._rgb.a=lr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Fl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Cu(this._rgb,2,e),this}darken(e){return Cu(this._rgb,2,-e),this}saturate(e){return Cu(this._rgb,1,e),this}desaturate(e){return Cu(this._rgb,1,-e),this}rotate(e){return ZV(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ni(){}const lL=(()=>{let t=0;return()=>t++})();function Ke(t){return t===null||typeof t>"u"}function ot(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ot(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Mn(t,e){return Ot(t)?t:e}function _e(t,e){return typeof t>"u"?e:t}const uL=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ve(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ae(t,e,n,i){let r,s,o;if(ot(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(xe(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function sh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function oh(t){if(ot(t))return t.map(oh);if(xe(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=oh(t[n[r]]);return e}return t}function eb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function cL(t,e,n,i){if(!eb(t))return;const r=e[t],s=n[t];xe(r)&&xe(s)?pl(r,s,i):e[t]=oh(s)}function pl(t,e,n){const i=ot(e)?e:[e],r=i.length;if(!xe(t))return t;n=n||{};const s=n.merger||cL;let o;for(let a=0;a<r;++a){if(o=i[a],!xe(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Na(t,e){return pl(t,e,{merger:hL})}function hL(t,e,n){if(!eb(t))return;const i=e[t],r=n[t];xe(i)&&xe(r)?Na(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=oh(r))}const L0={"":t=>t,x:t=>t.x,y:t=>t.y};function dL(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function fL(t){const e=dL(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function ah(t,e){return(L0[e]||(L0[e]=fL(e)))(t)}function Bm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const lh=t=>typeof t<"u",pr=t=>typeof t=="function",F0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function pL(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const dt=Math.PI,Rn=2*dt,gL=Rn+dt,uh=Number.POSITIVE_INFINITY,mL=dt/180,An=dt/2,Ir=dt/4,j0=dt*2/3,Op=Math.log10,po=Math.sign;function Da(t,e,n){return Math.abs(t-e)<n}function U0(t){const e=Math.round(t);t=Da(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Op(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function yL(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function gl(t){return!isNaN(parseFloat(t))&&isFinite(t)}function _L(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function vL(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function jr(t){return t*(dt/180)}function wL(t){return t*(180/dt)}function B0(t){if(!Ot(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function xL(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*dt&&(s+=Rn),{angle:s,distance:r}}function Mp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function EL(t,e){return(t-e+gL)%Rn-dt}function jn(t){return(t%Rn+Rn)%Rn}function tb(t,e,n,i){const r=jn(t),s=jn(e),o=jn(n),a=jn(s-r),l=jn(o-r),c=jn(r-s),h=jn(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function pn(t,e,n){return Math.max(e,Math.min(n,t))}function TL(t){return pn(t,-32768,32767)}function Fs(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function zm(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Ur=(t,e,n,i)=>zm(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),SL=(t,e,n)=>zm(t,n,i=>t[i][e]>=n);function bL(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const nb=["push","pop","shift","splice","unshift"];function IL(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),nb.forEach(n=>{const i="_onData"+Bm(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function z0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(nb.forEach(s=>{delete t[s]}),delete t._chartjs)}function kL(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ib=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function rb(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ib.call(window,()=>{i=!1,t.apply(e,n)}))}}function AL(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const $m=t=>t==="start"?"left":t==="end"?"right":"center",kt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,CL=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function PL(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:d,maxDefined:p}=o.getUserBounds();d&&(r=pn(Math.min(Ur(a,l,c).lo,n?i:Ur(e,l,o.getPixelForValue(c)).lo),0,i-1)),p?s=pn(Math.max(Ur(a,o.axis,h,!0).hi+1,n?0:Ur(e,l,o.getPixelForValue(h),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function RL(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Pu=t=>t===0||t===1,$0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Rn/n)),H0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Rn/n)+1,Oa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*An)+1,easeOutSine:t=>Math.sin(t*An),easeInOutSine:t=>-.5*(Math.cos(dt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Pu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Pu(t)?t:$0(t,.075,.3),easeOutElastic:t=>Pu(t)?t:H0(t,.075,.3),easeInOutElastic(t){return Pu(t)?t:t<.5?.5*$0(t*2,.1125,.45):.5+.5*H0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Oa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Oa.easeInBounce(t*2)*.5:Oa.easeOutBounce(t*2-1)*.5+.5};function Hm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function W0(t){return Hm(t)?t:new fl(t)}function nf(t){return Hm(t)?t:new fl(t).saturate(.5).darken(.1).hexString()}const NL=["x","y","borderWidth","radius","tension"],DL=["color","borderColor","backgroundColor"];function OL(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:DL},numbers:{type:"number",properties:NL}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ML(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const q0=new Map;function VL(t,e){e=e||{};const n=t+JSON.stringify(e);let i=q0.get(n);return i||(i=new Intl.NumberFormat(t,e),q0.set(n,i)),i}function sb(t,e,n){return VL(e,n).format(t)}const ob={values(t){return ot(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=LL(t,n)}const o=Op(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),sb(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Op(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?ob.numeric.call(this,t,e,n):""}};function LL(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ab={formatters:ob};function FL(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ab.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ns=Object.create(null),Vp=Object.create(null);function Ma(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function rf(t,e,n){return typeof e=="string"?pl(Ma(t,e),n):pl(Ma(t,""),e)}class jL{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>nf(r.backgroundColor),this.hoverBorderColor=(i,r)=>nf(r.borderColor),this.hoverColor=(i,r)=>nf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return rf(this,e,n)}get(e){return Ma(this,e)}describe(e,n){return rf(Vp,e,n)}override(e,n){return rf(ns,e,n)}route(e,n,i,r){const s=Ma(this,e),o=Ma(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return xe(l)?Object.assign({},c,l):_e(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Xe=new jL({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[OL,ML,FL]);function UL(t){return!t||Ke(t.size)||Ke(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function K0(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function kr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function G0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Lp(t,e,n,i){lb(t,e,n,i,null)}function lb(t,e,n,i,r){let s,o,a,l,c,h,d,p;const m=e.pointStyle,y=e.rotation,x=e.radius;let T=(y||0)*mL;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,x,0,0,Rn):t.arc(n,i,x,0,Rn),t.closePath();break;case"triangle":h=r?r/2:x,t.moveTo(n+Math.sin(T)*h,i-Math.cos(T)*x),T+=j0,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*x),T+=j0,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(T+Ir)*l,d=Math.cos(T+Ir)*(r?r/2-c:l),a=Math.sin(T+Ir)*l,p=Math.sin(T+Ir)*(r?r/2-c:l),t.arc(n-d,i-a,c,T-dt,T-An),t.arc(n+p,i-o,c,T-An,T),t.arc(n+d,i+a,c,T,T+An),t.arc(n-p,i+o,c,T+An,T+dt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}T+=Ir;case"rectRot":d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,p=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+p,i-o),t.lineTo(n+d,i+a),t.lineTo(n-p,i+o),t.closePath();break;case"crossRot":T+=Ir;case"cross":d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,p=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"star":d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,p=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o),T+=Ir,d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,p=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"line":o=r?r/2:Math.cos(T)*x,a=Math.sin(T)*x,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(T)*(r?r/2:x),i+Math.sin(T)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ml(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Wh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qh(t){t.restore()}function BL(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function zL(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function $L(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ke(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function HL(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function WL(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function yl(t,e,n,i,r,s={}){const o=ot(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,$L(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&WL(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ke(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),HL(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Fp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*dt,dt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,dt,An,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,An,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-An,!0),t.lineTo(n+o.topLeft,i)}const qL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,KL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function GL(t,e){const n=(""+t).match(qL);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const QL=t=>+t||0;function ub(t,e){const n={},i=xe(e),r=i?Object.keys(e):e,s=xe(t)?i?o=>_e(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=QL(s(o));return n}function YL(t){return ub(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Va(t){return ub(t,["topLeft","topRight","bottomLeft","bottomRight"])}function wn(t){const e=YL(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Rt(t,e){t=t||{},e=e||Xe.font;let n=_e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=_e(t.style,e.style);i&&!(""+i).match(KL)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:_e(t.family,e.family),lineHeight:GL(_e(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:_e(t.weight,e.weight),string:""};return r.string=UL(r),r}function Ru(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function XL(t,e,n){const{min:i,max:r}=t,s=uL(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ls(t,e){return Object.assign(Object.create(t),e)}function Wm(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=fb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Wm([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return hb(a,l,()=>sF(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Y0(a).includes(l)},ownKeys(a){return Y0(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function go(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:cb(t,i),setContext:s=>go(t,s,n,i),override:s=>go(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return hb(s,o,()=>ZL(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function cb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:pr(n)?n:()=>n,isIndexable:pr(i)?i:()=>i}}const JL=(t,e)=>t?t+Bm(e):e,qm=(t,e)=>xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function hb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function ZL(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return pr(a)&&o.isScriptable(e)&&(a=eF(e,a,t,n)),ot(a)&&a.length&&(a=tF(e,a,t,o.isIndexable)),qm(e,a)&&(a=go(a,r,s&&s[e],o)),a}function eF(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),qm(t,l)&&(l=Km(r._scopes,r,t,l)),l}function tF(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(xe(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Km(c,r,t,h);e.push(go(d,s,o&&o[t],a))}}return e}function db(t,e,n){return pr(t)?t(e,n):t}const nF=(t,e)=>t===!0?e:typeof t=="string"?ah(e,t):void 0;function iF(t,e,n,i,r){for(const s of e){const o=nF(n,s);if(o){t.add(o);const a=db(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Km(t,e,n,i){const r=e._rootScopes,s=db(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Q0(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Q0(a,o,s,l,i),l===null)?!1:Wm(Array.from(a),[""],r,s,()=>rF(e,n,i))}function Q0(t,e,n,i,r){for(;n;)n=iF(t,e,n,i,r);return n}function rF(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return ot(r)&&xe(n)?n:r||{}}function sF(t,e,n,i){let r;for(const s of e)if(r=fb(JL(s,t),n),typeof r<"u")return qm(t,r)?Km(n,i,t,r):r}function fb(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Y0(t){let e=t._keys;return e||(e=t._keys=oF(t._scopes)),e}function oF(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const aF=Number.EPSILON||1e-14,mo=(t,e)=>e<t.length&&!t[e].skip&&t[e],pb=t=>t==="x"?"y":"x";function lF(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Mp(s,r),l=Mp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,p=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+p*(o.x-r.x),y:s.y+p*(o.y-r.y)}}}function uF(t,e,n){const i=t.length;let r,s,o,a,l,c=mo(t,0);for(let h=0;h<i-1;++h)if(l=c,c=mo(t,h+1),!(!l||!c)){if(Da(e[h],0,aF)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function cF(t,e,n="x"){const i=pb(n),r=t.length;let s,o,a,l=mo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=mo(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function hF(t,e="x"){const n=pb(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=mo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=mo(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?po(r[o-1])!==po(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}uF(t,r,s),cF(t,s,e)}function Nu(t,e,n){return Math.max(Math.min(t,n),e)}function dF(t,e){let n,i,r,s,o,a=ml(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&ml(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Nu(r.cp1x,e.left,e.right),r.cp1y=Nu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Nu(r.cp2x,e.left,e.right),r.cp2y=Nu(r.cp2y,e.top,e.bottom)))}function fF(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")hF(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=lF(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&dF(t,n)}function Gm(){return typeof window<"u"&&typeof document<"u"}function Qm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ch(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Kh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function pF(t,e){return Kh(t).getPropertyValue(e)}const gF=["top","right","bottom","left"];function Wr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=gF[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const mF=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function yF(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(mF(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Nr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Kh(n),s=r.boxSizing==="border-box",o=Wr(r,"padding"),a=Wr(r,"border","width"),{x:l,y:c,box:h}=yF(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-p)/y*n.height/i)}}function _F(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Qm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Kh(s),l=Wr(a,"border","width"),c=Wr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=ch(a.maxWidth,s,"clientWidth"),r=ch(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||uh,maxHeight:r||uh}}const Du=t=>Math.round(t*10)/10;function vF(t,e,n,i){const r=Kh(t),s=Wr(r,"margin"),o=ch(r.maxWidth,t,"clientWidth")||uh,a=ch(r.maxHeight,t,"clientHeight")||uh,l=_F(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const p=Wr(r,"border","width"),m=Wr(r,"padding");c-=m.width+p.width,h-=m.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=Du(Math.min(c,o,l.maxWidth)),h=Du(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Du(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Du(Math.floor(h*i))),{width:c,height:h}}function X0(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const wF=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Gm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function J0(t,e){const n=pF(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Dr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function xF(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function EF(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Dr(t,r,n),a=Dr(r,s,n),l=Dr(s,e,n),c=Dr(o,a,n),h=Dr(a,l,n);return Dr(c,h,n)}const TF=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},SF=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qs(t,e,n){return t?TF(e,n):SF()}function gb(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function mb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function yb(t){return t==="angle"?{between:tb,compare:EL,normalize:jn}:{between:Fs,compare:(e,n)=>e-n,normalize:e=>e}}function Z0({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function bF(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=yb(i),l=e.length;let{start:c,end:h,loop:d}=t,p,m;if(d){for(c+=l,h+=l,p=0,m=l;p<m&&o(a(e[c%l][i]),r,s);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function _b(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=yb(i),{start:h,end:d,loop:p,style:m}=bF(t,e,n),y=[];let x=!1,T=null,w,v,I;const D=()=>l(r,I,w)&&a(r,I)!==0,O=()=>a(s,w)===0||l(s,I,w),L=()=>x||D(),S=()=>!x||O();for(let _=h,b=h;_<=d;++_)v=e[_%o],!v.skip&&(w=c(v[i]),w!==I&&(x=l(w,r,s),T===null&&L()&&(T=a(w,r)===0?_:b),T!==null&&S()&&(y.push(Z0({start:T,end:_,loop:p,count:o,style:m})),T=null),b=_,I=w));return T!==null&&y.push(Z0({start:T,end:d,loop:p,count:o,style:m})),y}function vb(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=_b(i[r],t.points,e);s.length&&n.push(...s)}return n}function IF(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function kF(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function AF(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=IF(n,r,s,i);if(i===!0)return ew(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return ew(t,kF(n,o,l,c),n,e)}function ew(t,e,n,i){return!i||!i.setContext||!n?e:CF(t,e,n,i)}function CF(t,e,n,i){const r=t._chart.getContext(),s=tw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,p=d;function m(y,x,T,w){const v=a?-1:1;if(y!==x){for(y+=l;n[y%l].skip;)y-=v;for(;n[x%l].skip;)x+=v;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:T,style:w}),h=w,d=x%l)}}for(const y of e){d=a?d:y.start;let x=n[d%l],T;for(p=d+1;p<=y.end;p++){const w=n[p%l];T=tw(i.setContext(ls(r,{type:"segment",p0:x,p1:w,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),PF(T,h)&&m(d,p-1,y.loop,h),x=w,h=T}d<p-1&&m(d,p-1,y.loop,h)}return c}function tw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function PF(t,e){if(!e)return!1;const n=[],i=function(r,s){return Hm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class RF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ib.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ii=new RF;const nw="transparent",NF={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=W0(t||nw),r=i.valid&&W0(e||nw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class DF{constructor(e,n,i,r){const s=n[i];r=Ru([e.to,r,s,e.from]);const o=Ru([e.from,s,r]);this._active=!0,this._fn=e.fn||NF[e.type||typeof o],this._easing=Oa[e.easing]||Oa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ru([e.to,n,r,e.from]),this._from=Ru([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class wb{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!xe(e))return;const n=Object.keys(Xe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!xe(s))return;const o={};for(const a of n)o[a]=s[a];(ot(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=MF(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&OF(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=i.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new DF(p,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return ii.add(this._chart,i),!0}}function OF(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function MF(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function iw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function VF(t,e,n){if(n===!1)return!1;const i=iw(t,n),r=iw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function LF(t){let e,n,i,r;return xe(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function xb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function rw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],Ot(c)&&(s||e===0||po(e)===po(c))&&(e+=c)}return!h&&!i.all?0:e}function FF(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function sf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function jF(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function UF(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function BF(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function sw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function ow(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=jF(s,o,i),d=e.length;let p;for(let m=0;m<d;++m){const y=e[m],{[l]:x,[c]:T}=y,w=y._stacks||(y._stacks={});p=w[c]=BF(r,h,x),p[a]=T,p._top=sw(p,o,!0,i.type),p._bottom=sw(p,o,!1,i.type);const v=p._visualValues||(p._visualValues={});v[a]=T}}function of(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function zF(t,e){return ls(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $F(t,e,n){return ls(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ta(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const af=t=>t==="reset"||t==="none",aw=(t,e)=>e?t:Object.assign({},t),HF=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:xb(n,!0),values:null};class La{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=sf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ta(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,p,m,y)=>d==="x"?p:d==="r"?y:m,s=n.xAxisID=_e(i.xAxisID,of(e,"x")),o=n.yAxisID=_e(i.yAxisID,of(e,"y")),a=n.rAxisID=_e(i.rAxisID,of(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&z0(this._data,this),e._stacked&&ta(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(xe(n)){const r=this._cachedMeta;this._data=FF(n,r)}else if(i!==n){if(i){z0(i,this);const r=this._cachedMeta;ta(r),r._parsed=[]}n&&Object.isExtensible(n)&&IL(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=sf(n.vScale,n),n.stack!==i.stack&&(r=!0,ta(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(ow(this,n._parsed),n._stacked=sf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,p;if(this._parsing===!1)i._parsed=r,i._sorted=!0,p=r;else{ot(r[e])?p=this.parseArrayData(i,r,e,n):xe(r[e])?p=this.parseObjectData(i,r,e,n):p=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=p[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&ow(this,p)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let p,m,y;for(p=0,m=r;p<m;++p)y=p+i,d[p]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,p,m;for(h=0,d=r;h<d;++h)p=h+i,m=n[p],c[h]={x:s.parse(ah(m,a),p),y:o.parse(ah(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:xb(r,!0),values:n._stacks[e.axis]._visualValues};return rw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=rw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=HF(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=UF(a);let p,m;function y(){m=r[p];const x=m[a.axis];return!Ot(m[e.axis])||h>x||d<x}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Ot(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=LF(_e(this.options.clip,VF(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=$F(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=zF(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&lh(i);if(a)return aw(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Xe.elements[e]),y=()=>this.getContext(i,r,n),x=c.resolveNamedOptions(p,m,y,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(aw(x,l))),x}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,i,n))}const c=new wb(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||af(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){af(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!af(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&ta(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(La,"defaults",{}),ce(La,"datasetElementType",null),ce(La,"dataElementType",null);class lc extends La{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=PL(n,r,o);this._drawStart=a,this._drawCount=l,RL(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),p=o.axis,m=a.axis,{spanGaps:y,segment:x}=this.options,T=gl(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none",v=n+i,I=e.length;let D=n>0&&this.getParsed(n-1);for(let O=0;O<I;++O){const L=e[O],S=w?L:{};if(O<n||O>=v){S.skip=!0;continue}const _=this.getParsed(O),b=Ke(_[m]),A=S[p]=o.getPixelForValue(_[p],O),R=S[m]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],O);S.skip=isNaN(A)||isNaN(R)||b,S.stop=O>0&&Math.abs(_[p]-D[p])>T,x&&(S.parsed=_,S.raw=c.data[O]),d&&(S.options=h||this.resolveDataElementOptions(O,L.active?"active":r)),w||this.updateElement(L,O,S,r),D=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ce(lc,"id","line"),ce(lc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ce(lc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ar(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ym{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(Ym.prototype,e)}init(){}formats(){return Ar()}parse(){return Ar()}format(){return Ar()}add(){return Ar()}diff(){return Ar()}startOf(){return Ar()}endOf(){return Ar()}}var WF={_date:Ym};function qF(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?SL:Ur;if(i){if(r._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=l(s,e,n-h),p=l(s,e,n+h);return{lo:d.lo,hi:p.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function jl(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=qF(s[a],e,o,r);for(let m=d;m<=p;++m){const y=h[m];y.skip||i(y,c,m)}}}function KF(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function lf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||jl(t,n,e,function(a,l,c){!r&&!ml(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function GF(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=xL(o,{x:e.x,y:e.y});tb(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return jl(t,n,e,s),r}function QF(t,e,n,i,r,s){let o=[];const a=KF(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const y=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(y))&&!m)return;const T=a(e,y);T<l?(o=[{element:h,datasetIndex:d,index:p}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:p})}return jl(t,n,e,c),o}function uf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?GF(t,e,n,r):QF(t,e,n,i,r,s)}function lw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return jl(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var YF={evaluateInteractionItems:jl,modes:{index(t,e,n,i){const r=Nr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?lf(t,r,s,i,o):uf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Nr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?lf(t,r,s,i,o):uf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Nr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return lf(t,r,s,i,o)},nearest(t,e,n,i){const r=Nr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return uf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Nr(e,t);return lw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Nr(e,t);return lw(t,r,"y",n.intersect,i)}}};const Eb=["left","top","right","bottom"];function na(t,e){return t.filter(n=>n.pos===e)}function uw(t,e){return t.filter(n=>Eb.indexOf(n.pos)===-1&&n.box.axis===e)}function ia(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function XF(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function JF(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Eb.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function ZF(t,e){const n=JF(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function e4(t){const e=XF(t),n=ia(e.filter(c=>c.box.fullSize),!0),i=ia(na(e,"left"),!0),r=ia(na(e,"right")),s=ia(na(e,"top"),!0),o=ia(na(e,"bottom")),a=uw(e,"x"),l=uw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:na(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function cw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Tb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function t4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!xe(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&Tb(o,s.getPadding());const a=Math.max(0,e.outerWidth-cw(o,t,"left","right")),l=Math.max(0,e.outerHeight-cw(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function n4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function i4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function pa(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,i4(a.horizontal,e));const{same:d,other:p}=t4(e,n,a,i);c|=d&&r.length,h=h||p,l.fullSize||r.push(a)}return c&&pa(r,e,n,i)||h}function Ou(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function hw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;lh(c.start)&&(o=c.start),l.fullSize?Ou(l,r.left,o,n.outerWidth-r.right-r.left,p):Ou(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;lh(c.start)&&(s=c.start),l.fullSize?Ou(l,s,r.top,p,n.outerHeight-r.bottom-r.top):Ou(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var gn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=wn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=e4(t.boxes),l=a.vertical,c=a.horizontal;Ae(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,T)=>T.box.options&&T.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},r);Tb(p,wn(i));const m=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),y=ZF(l.concat(c),d);pa(a.fullSize,m,d,y),pa(l,m,d,y),pa(c,m,d,y)&&pa(l,m,d,y),n4(m),hw(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,hw(a.rightAndBottom,m,d,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ae(a.chartArea,x=>{const T=x.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Sb{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class r4 extends Sb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const uc="$chartjs",s4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dw=t=>t===null||t==="";function o4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[uc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",dw(r)){const s=J0(t,"width");s!==void 0&&(t.width=s)}if(dw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=J0(t,"height");s!==void 0&&(t.height=s)}return t}const bb=wF?{passive:!0}:!1;function a4(t,e,n){t&&t.addEventListener(e,n,bb)}function l4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,bb)}function u4(t,e){const n=s4[t.type]||t.type,{x:i,y:r}=Nr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function hh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function c4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||hh(a.addedNodes,i),o=o&&!hh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function h4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||hh(a.removedNodes,i),o=o&&!hh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const _l=new Map;let fw=0;function Ib(){const t=window.devicePixelRatio;t!==fw&&(fw=t,_l.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function d4(t,e){_l.size||window.addEventListener("resize",Ib),_l.set(t,e)}function f4(t){_l.delete(t),_l.size||window.removeEventListener("resize",Ib)}function p4(t,e,n){const i=t.canvas,r=i&&Qm(i);if(!r)return;const s=rb((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),d4(t,s),o}function cf(t,e,n){n&&n.disconnect(),e==="resize"&&f4(t)}function g4(t,e,n){const i=t.canvas,r=rb(s=>{t.ctx!==null&&n(u4(s,t))},t);return a4(i,e,r),r}class m4 extends Sb{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(o4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[uc])return!1;const i=n[uc].initial;["height","width"].forEach(s=>{const o=i[s];Ke(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[uc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:c4,detach:h4,resize:p4}[n]||g4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:cf,detach:cf,resize:cf}[n]||l4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return vF(e,n,i,r)}isAttached(e){const n=e&&Qm(e);return!!(n&&n.isConnected)}}function y4(t){return!Gm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?r4:m4}class Si{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return gl(this.x)&&gl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ce(Si,"defaults",{}),ce(Si,"defaultRoutes");function _4(t,e){const n=t.options.ticks,i=v4(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?x4(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return E4(e,c,s,o/r),c;const h=w4(s,e,r);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Mu(e,c,h,Ke(m)?0:a-m,a),d=0,p=o-1;d<p;d++)Mu(e,c,h,s[d],s[d+1]);return Mu(e,c,h,l,Ke(m)?e.length:l+m),c}return Mu(e,c,h),c}function v4(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function w4(t,e,n){const i=T4(t),r=e.length/n;if(!i)return Math.max(r,1);const s=yL(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function x4(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function E4(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Mu(t,e,n,i,r){const s=_e(i,0),o=Math.min(_e(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function T4(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const S4=t=>t==="left"?"right":t==="right"?"left":t,pw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,gw=(t,e)=>Math.min(e||t,t);function mw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function b4(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function I4(t,e){Ae(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function ra(t){return t.drawTicks?t.tickLength:0}function yw(t,e){if(!t.display)return 0;const n=Rt(t.font,e),i=wn(t.padding);return(ot(t.text)?t.text.length:1)*n.lineHeight+i.height}function k4(t,e){return ls(t,{scale:e,type:"scale"})}function A4(t,e,n){return ls(t,{tick:n,index:e,type:"tick"})}function C4(t,e,n){let i=$m(t);return(n&&e!=="right"||!n&&e==="right")&&(i=S4(i)),i}function P4(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,m,y;const x=o-r,T=a-s;if(t.isHorizontal()){if(m=kt(i,s,a),xe(n)){const w=Object.keys(n)[0],v=n[w];y=h[w].getPixelForValue(v)+x-e}else n==="center"?y=(c.bottom+c.top)/2+x-e:y=pw(t,n,e);p=a-s}else{if(xe(n)){const w=Object.keys(n)[0],v=n[w];m=h[w].getPixelForValue(v)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=pw(t,n,e);y=kt(i,o,r),d=n==="left"?-An:An}return{titleX:m,titleY:y,maxWidth:p,rotation:d}}class ko extends Si{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Mn(e,Number.POSITIVE_INFINITY),n=Mn(n,Number.NEGATIVE_INFINITY),i=Mn(i,Number.POSITIVE_INFINITY),r=Mn(r,Number.NEGATIVE_INFINITY),{min:Mn(e,i),max:Mn(n,r),minDefined:Ot(e),maxDefined:Ot(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Mn(n,Mn(i,n)),max:Mn(i,Mn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ve(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XL(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?mw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ve(this.options.afterUpdate,[this])}beforeSetDimensions(){Ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ve(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ve(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ve(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=gw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=pn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-ra(e.grid)-n.padding-yw(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=wL(Math.min(Math.asin(pn((h.highest.height+6)/a,-1,1)),Math.asin(pn(l/c,-1,1))-Math.asin(pn(p/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ve(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=yw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ra(s)+l):(e.height=this.maxHeight,e.width=ra(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),m=i.padding*2,y=jr(this.labelRotation),x=Math.cos(y),T=Math.sin(y);if(a){const w=i.mirror?0:T*d.width+x*p.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=i.mirror?0:x*d.width+T*p.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,h,T,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=r*e.width,m=i*n.height):(p=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ve(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ke(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=mw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/gw(n,i));let c=0,h=0,d,p,m,y,x,T,w,v,I,D,O;for(d=0;d<n;d+=l){if(y=e[d].label,x=this._resolveTickFontOptions(d),r.font=T=x.string,w=s[T]=s[T]||{data:{},gc:[]},v=x.lineHeight,I=D=0,!Ke(y)&&!ot(y))I=K0(r,w.data,w.gc,I,y),D=v;else if(ot(y))for(p=0,m=y.length;p<m;++p)O=y[p],!Ke(O)&&!ot(O)&&(I=K0(r,w.data,w.gc,I,O),D+=v);o.push(I),a.push(D),c=Math.max(I,c),h=Math.max(D,h)}I4(s,n);const L=o.indexOf(c),S=a.indexOf(h),_=b=>({width:o[b]||0,height:a[b]||0});return{first:_(0),last:_(n-1),widest:_(L),highest:_(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return TL(this._alignToPixels?kr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=A4(this.getContext(),e,i))}return this.$context||(this.$context=k4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=jr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=ra(s),m=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,T=x/2,w=function(pe){return kr(i,pe,x)};let v,I,D,O,L,S,_,b,A,R,P,k;if(o==="top")v=w(this.bottom),S=this.bottom-p,b=v-T,R=w(e.top)+T,k=e.bottom;else if(o==="bottom")v=w(this.top),R=e.top,k=w(e.bottom)-T,S=v+T,b=this.top+p;else if(o==="left")v=w(this.right),L=this.right-p,_=v-T,A=w(e.left)+T,P=e.right;else if(o==="right")v=w(this.left),A=e.left,P=w(e.right)-T,L=v+T,_=this.left+p;else if(n==="x"){if(o==="center")v=w((e.top+e.bottom)/2+.5);else if(xe(o)){const pe=Object.keys(o)[0],ge=o[pe];v=w(this.chart.scales[pe].getPixelForValue(ge))}R=e.top,k=e.bottom,S=v+T,b=S+p}else if(n==="y"){if(o==="center")v=w((e.left+e.right)/2);else if(xe(o)){const pe=Object.keys(o)[0],ge=o[pe];v=w(this.chart.scales[pe].getPixelForValue(ge))}L=v-T,_=L-p,A=e.left,P=e.right}const le=_e(r.ticks.maxTicksLimit,d),ie=Math.max(1,Math.ceil(d/le));for(I=0;I<d;I+=ie){const pe=this.getContext(I),ge=s.setContext(pe),W=a.setContext(pe),J=ge.lineWidth,ee=ge.color,Ie=W.dash||[],he=W.dashOffset,ke=ge.tickWidth,Ze=ge.tickColor,ft=ge.tickBorderDash||[],Ge=ge.tickBorderDashOffset;D=b4(this,I,l),D!==void 0&&(O=kr(i,D,J),c?L=_=A=P=O:S=b=R=k=O,m.push({tx1:L,ty1:S,tx2:_,ty2:b,x1:A,y1:R,x2:P,y2:k,width:J,color:ee,borderDash:Ie,borderDashOffset:he,tickWidth:ke,tickColor:Ze,tickBorderDash:ft,tickBorderDashOffset:Ge}))}return this._ticksLength=d,this._borderValue=v,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=ra(i.grid),m=p+h,y=d?-h:m,x=-jr(this.labelRotation),T=[];let w,v,I,D,O,L,S,_,b,A,R,P,k="middle";if(r==="top")L=this.bottom-y,S=this._getXAxisLabelAlignment();else if(r==="bottom")L=this.top+y,S=this._getXAxisLabelAlignment();else if(r==="left"){const ie=this._getYAxisLabelAlignment(p);S=ie.textAlign,O=ie.x}else if(r==="right"){const ie=this._getYAxisLabelAlignment(p);S=ie.textAlign,O=ie.x}else if(n==="x"){if(r==="center")L=(e.top+e.bottom)/2+m;else if(xe(r)){const ie=Object.keys(r)[0],pe=r[ie];L=this.chart.scales[ie].getPixelForValue(pe)+m}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")O=(e.left+e.right)/2-m;else if(xe(r)){const ie=Object.keys(r)[0],pe=r[ie];O=this.chart.scales[ie].getPixelForValue(pe)}S=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const le=this._getLabelSizes();for(w=0,v=a.length;w<v;++w){I=a[w],D=I.label;const ie=s.setContext(this.getContext(w));_=this.getPixelForTick(w)+s.labelOffset,b=this._resolveTickFontOptions(w),A=b.lineHeight,R=ot(D)?D.length:1;const pe=R/2,ge=ie.color,W=ie.textStrokeColor,J=ie.textStrokeWidth;let ee=S;o?(O=_,S==="inner"&&(w===v-1?ee=this.options.reverse?"left":"right":w===0?ee=this.options.reverse?"right":"left":ee="center"),r==="top"?c==="near"||x!==0?P=-R*A+A/2:c==="center"?P=-le.highest.height/2-pe*A+A:P=-le.highest.height+A/2:c==="near"||x!==0?P=A/2:c==="center"?P=le.highest.height/2-pe*A:P=le.highest.height-R*A,d&&(P*=-1),x!==0&&!ie.showLabelBackdrop&&(O+=A/2*Math.sin(x))):(L=_,P=(1-R)*A/2);let Ie;if(ie.showLabelBackdrop){const he=wn(ie.backdropPadding),ke=le.heights[w],Ze=le.widths[w];let ft=P-he.top,Ge=0-he.left;switch(k){case"middle":ft-=ke/2;break;case"bottom":ft-=ke;break}switch(S){case"center":Ge-=Ze/2;break;case"right":Ge-=Ze;break;case"inner":w===v-1?Ge-=Ze:w>0&&(Ge-=Ze/2);break}Ie={left:Ge,top:ft,width:Ze+he.width,height:ke+he.height,color:ie.backdropColor}}T.push({label:D,font:b,textOffset:P,options:{rotation:x,color:ge,strokeColor:W,strokeWidth:J,textAlign:ee,textBaseline:k,translation:[O,L],backdrop:Ie}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-jr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=kr(e,this.left,o)-o/2,h=kr(e,this.right,a)+a/2,d=p=l):(d=kr(e,this.top,o)-o/2,p=kr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Wh(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;yl(i,c,0,h,l,a)}r&&qh(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Rt(i.font),o=wn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||xe(n)?(l+=o.bottom,ot(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=P4(this,l,n,a);yl(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:p,textAlign:C4(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=_e(e.grid&&e.grid.z,-1),r=_e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ko.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Rt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;D4(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,R4(e,o,i),this.override&&Xe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Xe[r]&&(delete Xe[r][i],this.override&&delete ns[i])}}function R4(t,e,n){const i=pl(Object.create(null),[n?Xe.get(n):{},Xe.get(e),t.defaults]);Xe.set(e,i),t.defaultRoutes&&N4(e,t.defaultRoutes),t.descriptors&&Xe.describe(e,t.descriptors)}function N4(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Xe.route(s,r,l,a)})}function D4(t){return"id"in t&&"defaults"in t}class O4{constructor(){this.controllers=new Vu(La,"datasets",!0),this.elements=new Vu(Si,"elements"),this.plugins=new Vu(Object,"plugins"),this.scales=new Vu(ko,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ae(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Bm(e);Ve(i["before"+r],[],i),n[e](i),Ve(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Fn=new O4;class M4{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ve(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=_e(i.options&&i.options.plugins,{}),s=V4(i);return r===!1&&!n?[]:F4(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function V4(t){const e={},n=[],i=Object.keys(Fn.plugins.items);for(let s=0;s<i.length;s++)n.push(Fn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function L4(t,e){return!e&&t===!1?null:t===!0?{}:t}function F4(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=L4(i[l],r);c!==null&&s.push({plugin:a,options:j4(t.config,{plugin:a,local:n[l]},c,o)})}return s}function j4(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jp(t,e){const n=Xe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function U4(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function B4(t,e){return t===e?"_index_":"_value_"}function _w(t){if(t==="x"||t==="y"||t==="r")return t}function z4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Up(t,...e){if(_w(t))return t;for(const n of e){const i=n.axis||z4(n.position)||t.length>1&&_w(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function $4(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return vw(t,"x",n[0])||vw(t,"y",n[0])}return{}}function H4(t,e){const n=ns[t.type]||{scales:{}},i=e.scales||{},r=jp(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!xe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Up(o,a,$4(o,t),Xe.scales[a.type]),c=B4(l,r),h=n.scales||{};s[o]=Na(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||jp(a,e),h=(ns[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=U4(d,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),Na(s[m],[{axis:p},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Na(a,[Xe.scales[a.type],Xe.scale])}),s}function kb(t){const e=t.options||(t.options={});e.plugins=_e(e.plugins,{}),e.scales=H4(t,e)}function Ab(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function W4(t){return t=t||{},t.data=Ab(t.data),kb(t),t}const ww=new Map,Cb=new Set;function Lu(t,e){let n=ww.get(t);return n||(n=e(),ww.set(t,n),Cb.add(n)),n}const sa=(t,e,n)=>{const i=ah(e,n);i!==void 0&&t.add(i)};class q4{constructor(e){this._config=W4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ab(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Lu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Lu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Lu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Lu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>sa(l,e,d))),h.forEach(d=>sa(l,r,d)),h.forEach(d=>sa(l,ns[s]||{},d)),h.forEach(d=>sa(l,Xe,d)),h.forEach(d=>sa(l,Vp,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Cb.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ns[n]||{},Xe.datasets[n]||{},{type:n},Xe,Vp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=xw(this._resolverCache,e,r);let l=o;if(G4(o,n)){s.$shared=!1,i=pr(i)?i():i;const c=this.createResolver(e,i,a);l=go(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=xw(this._resolverCache,e,i);return xe(n)?go(s,n,void 0,r):s}}function xw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Wm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const K4=t=>xe(t)&&Object.getOwnPropertyNames(t).some(e=>pr(t[e]));function G4(t,e){const{isScriptable:n,isIndexable:i}=cb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(pr(a)||K4(a))||o&&ot(a))return!0}return!1}var Q4="4.4.6";const Y4=["top","bottom","left","right","chartArea"];function Ew(t,e){return t==="top"||t==="bottom"||Y4.indexOf(t)===-1&&e==="x"}function Tw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Sw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ve(n&&n.onComplete,[t],e)}function X4(t){const e=t.chart,n=e.options.animation;Ve(n&&n.onProgress,[t],e)}function Pb(t){return Gm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const cc={},bw=t=>{const e=Pb(t);return Object.values(cc).filter(n=>n.canvas===e).pop()};function J4(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function Z4(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function Fu(t,e,n){return t.options.clip?t[n]:e[n]}function e5(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Fu(n,e,"left"),right:Fu(n,e,"right"),top:Fu(i,e,"top"),bottom:Fu(i,e,"bottom")}:e}var Ni;let Gh=(Ni=class{static register(...e){Fn.add(...e),Iw()}static unregister(...e){Fn.remove(...e),Iw()}constructor(e,n){const i=this.config=new q4(n),r=Pb(e),s=bw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||y4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=lL(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new M4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=AL(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],cc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ii.listen(this,"complete",Sw),ii.listen(this,"progress",X4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Ke(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():X0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return G0(this.canvas,this.ctx),this}stop(){return ii.stop(this),this}resize(e,n){ii.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,X0(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ve(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ae(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Up(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ae(s,o=>{const a=o.options,l=a.id,c=Up(l,a),h=_e(a.type,o.dtype);(a.position===void 0||Ew(a.position,c)!==Ew(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const p=Fn.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ae(r,(o,a)=>{o||delete i[a]}),Ae(i,o=>{gn.configure(this,o,o.options),gn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Tw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||jp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Fn.getController(a),{datasetElementType:c,dataElementType:h}=Xe.datasets[a];Object.assign(l,{dataElementType:Fn.getElement(h),datasetElementType:c&&Fn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ae(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ae(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Tw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ae(this.scales,e=>{gn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!F0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;J4(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!F0(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;gn.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ae(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,pr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ii.has(this)?this.attached&&!ii.running(this)&&ii.start(this):(this.draw(),Sw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=e5(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Wh(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&qh(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return ml(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=YF.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ls(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);lh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ii.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),G0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete cc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ae(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ae(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ae(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!sh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=pL(e),c=Z4(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ve(s.onHover,[e,a,this],this),l&&Ve(s.onClick,[e,a,this],this));const h=!sh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ce(Ni,"defaults",Xe),ce(Ni,"instances",cc),ce(Ni,"overrides",ns),ce(Ni,"registry",Fn),ce(Ni,"version",Q4),ce(Ni,"getChart",bw),Ni);function Iw(){return Ae(Gh.instances,t=>t._plugins.invalidate())}function Rb(t,e,n=e){t.lineCap=_e(n.borderCapStyle,e.borderCapStyle),t.setLineDash(_e(n.borderDash,e.borderDash)),t.lineDashOffset=_e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=_e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=_e(n.borderWidth,e.borderWidth),t.strokeStyle=_e(n.borderColor,e.borderColor)}function t5(t,e,n){t.lineTo(n.x,n.y)}function n5(t){return t.stepped?BL:t.tension||t.cubicInterpolationMode==="monotone"?zL:t5}function Nb(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function i5(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Nb(r,n,i),h=n5(s);let{move:d=!0,reverse:p}=i||{},m,y,x;for(m=0;m<=c;++m)y=r[(a+(p?c-m:m))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,x,y,p,s.stepped),x=y);return l&&(y=r[(a+(p?c:0))%o],h(t,x,y,p,s.stepped)),!!l}function r5(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Nb(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,p,m,y,x,T,w;const v=D=>(o+(c?a-D:D))%s,I=()=>{x!==T&&(t.lineTo(h,T),t.lineTo(h,x),t.lineTo(h,w))};for(l&&(m=r[v(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=r[v(p)],m.skip)continue;const D=m.x,O=m.y,L=D|0;L===y?(O<x?x=O:O>T&&(T=O),h=(d*h+D)/++d):(I(),t.lineTo(D,O),y=L,d=0,x=T=O),w=O}I()}function Bp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?r5:i5}function s5(t){return t.stepped?xF:t.tension||t.cubicInterpolationMode==="monotone"?EF:Dr}function o5(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Rb(t,e.options),t.stroke(r)}function a5(t,e,n,i){const{segments:r,options:s}=e,o=Bp(e);for(const a of r)Rb(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const l5=typeof Path2D=="function";function u5(t,e,n,i){l5&&!e.options.segment?o5(t,e,n,i):a5(t,e,n,i)}class Gi extends Si{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;fF(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AF(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=vb(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=s5(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:p}=o[c],m=s[d],y=s[p];if(m===y){a.push(m);continue}const x=Math.abs((r-m[n])/(y[n]-m[n])),T=l(m,y,x,i.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Bp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Bp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),u5(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(Gi,"id","line"),ce(Gi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(Gi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(Gi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function kw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class hc extends Si{constructor(n){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return kw(this,n,"x",i)}inYRange(n,i){return kw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!ml(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Lp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ce(hc,"id","point"),ce(hc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(hc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function c5(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Xm(l,c,r);const h=zp(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:r[l],end:r[c]});continue}const d=vb(e,h);for(const p of d){const m=zp(n,s[p.start],s[p.end],p.loop),y=_b(a,r,m);for(const x of y)o.push({source:x,target:p,start:{[n]:Aw(h,m,"start",Math.max)},end:{[n]:Aw(h,m,"end",Math.min)}})}}return o}function zp(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=jn(r),s=jn(s)),{property:t,start:r,end:s}}function h5(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Xm(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function Xm(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Aw(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Db(t,e){let n=[],i=!1;return ot(t)?(i=!0,n=t):n=h5(t,e),n.length?new Gi({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Cw(t){return t&&t.fill!==!1}function d5(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ot(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function f5(t,e,n){const i=y5(t);if(xe(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ot(r)&&Math.floor(r)===r?p5(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function p5(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function g5(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:xe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function m5(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:xe(t)?i=t.value:i=e.getBaseValue(),i}function y5(t){const e=t.options,n=e.fill;let i=_e(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function _5(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=v5(e,n);a.push(Db({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)w5(r,o[h],a)}return new Gi({points:r,options:{}})}function v5(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function w5(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=x5(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function x5(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],d=o[h.start][n],p=o[h.end][n];if(Fs(r,d,p)){a=r===d,l=r===p;break}}return{first:a,last:l,point:i}}class Ob{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:Rn},e.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function E5(t){const{chart:e,fill:n,line:i}=t;if(Ot(n))return T5(e,n);if(n==="stack")return _5(t);if(n==="shape")return!0;const r=S5(t);return r instanceof Ob?r:Db(r,i)}function T5(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function S5(t){return(t.scale||{}).getPointPositionForValue?I5(t):b5(t)}function b5(t){const{scale:e={},fill:n}=t,i=g5(n,e);if(Ot(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function I5(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=m5(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new Ob({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function hf(t,e,n){const i=E5(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:d=c}=l||{};i&&r.points.length&&(Wh(t,n),k5(t,{line:r,target:i,above:h,below:d,area:n,scale:s,axis:o}),qh(t))}function k5(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==r&&(Pw(t,i,o.top),Rw(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),Pw(t,i,o.bottom)),Rw(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}function Pw(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,h=r[l],d=r[Xm(l,c,r)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Rw(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=c5(n,i,r);for(const{source:l,target:c,start:h,end:d}of a){const{style:{backgroundColor:p=s}={}}=l,m=i!==!0;t.save(),t.fillStyle=p,A5(t,o,m&&zp(r,h,d)),t.beginPath();const y=!!n.pathSegment(t,l);let x;if(m){y?t.closePath():Nw(t,i,d,r);const T=!!i.pathSegment(t,c,{move:y,reverse:!0});x=y&&T,x||Nw(t,i,h,r)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function A5(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function Nw(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var C5={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Gi&&(l={visible:t.isDatasetVisible(o),index:o,fill:f5(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=d5(r,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&hf(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;Cw(s)&&hf(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!Cw(i)||n.drawTime!=="beforeDatasetDraw"||hf(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Dw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},P5=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ow extends Si{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ve(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Rt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Dw(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((y,x)=>{const T=i+n/2+s.measureText(y.text).width;(x===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(x>0?0:1)]=0,m+=h,p++),l[x]={left:0,top:m,row:p,width:T,height:r},c[c.length-1]+=T+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,p=0,m=0,y=0,x=0;return this.legendItems.forEach((T,w)=>{const{itemWidth:v,itemHeight:I}=R5(i,n,s,T,r);w>0&&m+I+2*a>h&&(d+=p+a,c.push({width:p,height:m}),y+=p+a,x++,p=m=0),l[w]={left:y,top:m,col:x,width:v,height:I},p=Math.max(p,v),m+=I+a}),d+=p,c.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Qs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=kt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=kt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=kt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=kt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Wh(e,this),this._draw(),qh(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Xe.color,l=Qs(e.rtl,this.left,this.width),c=Rt(o.font),{padding:h}=o,d=c.size,p=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:T}=Dw(o,d),w=function(L,S,_){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;r.save();const b=_e(_.lineWidth,1);if(r.fillStyle=_e(_.fillStyle,a),r.lineCap=_e(_.lineCap,"butt"),r.lineDashOffset=_e(_.lineDashOffset,0),r.lineJoin=_e(_.lineJoin,"miter"),r.lineWidth=b,r.strokeStyle=_e(_.strokeStyle,a),r.setLineDash(_e(_.lineDash,[])),o.usePointStyle){const A={radius:x*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:b},R=l.xPlus(L,y/2),P=S+p;lb(r,A,R,P,o.pointStyleWidth&&y)}else{const A=S+Math.max((d-x)/2,0),R=l.leftForLtr(L,y),P=Va(_.borderRadius);r.beginPath(),Object.values(P).some(k=>k!==0)?Fp(r,{x:R,y:A,w:y,h:x,radius:P}):r.rect(R,A,y,x),r.fill(),b!==0&&r.stroke()}r.restore()},v=function(L,S,_){yl(r,_.text,L,S+T/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},I=this.isHorizontal(),D=this._computeTitleHeight();I?m={x:kt(s,this.left+h,this.right-i[0]),y:this.top+h+D,line:0}:m={x:this.left+h,y:kt(s,this.top+D+h,this.bottom-n[0].height),line:0},gb(this.ctx,e.textDirection);const O=T+h;this.legendItems.forEach((L,S)=>{r.strokeStyle=L.fontColor,r.fillStyle=L.fontColor;const _=r.measureText(L.text).width,b=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),A=y+p+_;let R=m.x,P=m.y;l.setWidth(this.width),I?S>0&&R+A+h>this.right&&(P=m.y+=O,m.line++,R=m.x=kt(s,this.left+h,this.right-i[m.line])):S>0&&P+O>this.bottom&&(R=m.x=R+n[m.line].width+h,m.line++,P=m.y=kt(s,this.top+D+h,this.bottom-n[m.line].height));const k=l.x(R);if(w(k,P,L),R=CL(b,R+y+p,I?R+A:this.right,e.rtl),v(l.x(R),P,L),I)m.x+=A+h;else if(typeof L.text!="string"){const le=c.lineHeight;m.y+=Mb(L,le)+h}else m.y+=O}),mb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Rt(n.font),r=wn(n.padding);if(!n.display)return;const s=Qs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,d=kt(e.align,d,this.right-p);else{const y=this.columnSizes.reduce((x,T)=>Math.max(x,T.height),0);h=c+kt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=kt(a,d,d+p);o.textAlign=s.textAlign($m(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,yl(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Rt(e.font),i=wn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Fs(e,this.left,this.right)&&Fs(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Fs(e,r.left,r.left+r.width)&&Fs(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!O5(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=P5(r,i);r&&!s&&Ve(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ve(n.onHover,[e,i,this],this)}else i&&Ve(n.onClick,[e,i,this],this)}}function R5(t,e,n,i,r){const s=N5(i,t,e,n),o=D5(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function N5(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function D5(t,e,n){let i=t;return typeof e.text!="string"&&(i=Mb(e,n)),i}function Mb(t,e){const n=t.text?t.text.length:0;return e*n}function O5(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var M5={id:"legend",_element:Ow,start(t,e,n){const i=t.legend=new Ow({ctx:t.ctx,options:n,chart:t});gn.configure(t,i,n),gn.addBox(t,i)},stop(t){gn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;gn.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=wn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Vb extends Si{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=ot(i.text)?i.text.length:1;this._padding=wn(i.padding);const s=r*Rt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=kt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=kt(a,r,n),l=dt*-.5):(h=s-e,d=kt(a,n,r),l=dt*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Rt(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);yl(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:$m(n.align),textBaseline:"middle",translation:[o,a]})}}function V5(t,e){const n=new Vb({ctx:t.ctx,options:e,chart:t});gn.configure(t,n,e),gn.addBox(t,n),t.titleBlock=n}var L5={id:"title",_element:Vb,start(t,e,n){V5(t,n)},stop(t){const e=t.titleBlock;gn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;gn.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ga={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Mp(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Vn(t,e){return e&&(ot(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ri(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function F5(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Mw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Rt(e.bodyFont),c=Rt(e.titleFont),h=Rt(e.footerFont),d=s.length,p=r.length,m=i.length,y=wn(e.padding);let x=y.height,T=0,w=i.reduce((D,O)=>D+O.before.length+O.lines.length+O.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const D=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=m*D+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}p&&(x+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let v=0;const I=function(D){T=Math.max(T,n.measureText(D).width+v)};return n.save(),n.font=c.string,Ae(t.title,I),n.font=l.string,Ae(t.beforeBody.concat(t.afterBody),I),v=e.displayColors?o+2+e.boxPadding:0,Ae(i,D=>{Ae(D.before,I),Ae(D.lines,I),Ae(D.after,I)}),v=0,n.font=h.string,Ae(t.footer,I),n.restore(),T+=y.width,{width:T,height:x}}function j5(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function U5(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function B5(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),U5(c,t,e,n)&&(c="center"),c}function Vw(t,e,n){const i=n.yAlign||e.yAlign||j5(t,n);return{xAlign:n.xAlign||e.xAlign||B5(t,e,n,i),yAlign:i}}function z5(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function $5(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Lw(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=Va(o);let y=z5(e,a);const x=$5(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,p)+r:a==="right"&&(y+=Math.max(d,m)+r),{x:pn(y,0,i.width-e.width),y:pn(x,0,i.height-e.height)}}function ju(t,e,n){const i=wn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Fw(t){return Vn([],ri(t))}function H5(t,e,n){return ls(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function jw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Lb={beforeTitle:ni,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ni,beforeBody:ni,beforeLabel:ni,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ke(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ni,afterBody:ni,beforeFooter:ni,footer:ni,afterFooter:ni};function zt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Lb[e].call(n,i):r}class $p extends Si{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new wb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=H5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=zt(i,"beforeTitle",this,e),s=zt(i,"title",this,e),o=zt(i,"afterTitle",this,e);let a=[];return a=Vn(a,ri(r)),a=Vn(a,ri(s)),a=Vn(a,ri(o)),a}getBeforeBody(e,n){return Fw(zt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ae(e,s=>{const o={before:[],lines:[],after:[]},a=jw(i,s);Vn(o.before,ri(zt(a,"beforeLabel",this,s))),Vn(o.lines,zt(a,"label",this,s)),Vn(o.after,ri(zt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Fw(zt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=zt(i,"beforeFooter",this,e),s=zt(i,"footer",this,e),o=zt(i,"afterFooter",this,e);let a=[];return a=Vn(a,ri(r)),a=Vn(a,ri(s)),a=Vn(a,ri(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(F5(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),Ae(a,h=>{const d=jw(e.callbacks,h);r.push(zt(d,"labelColor",this,h)),s.push(zt(d,"labelPointStyle",this,h)),o.push(zt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=ga[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Mw(this,i),c=Object.assign({},a,l),h=Vw(this.chart,i,c),d=Lw(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Va(a),{x:p,y:m}=e,{width:y,height:x}=n;let T,w,v,I,D,O;return s==="center"?(D=m+x/2,r==="left"?(T=p,w=T-o,I=D+o,O=D-o):(T=p+y,w=T+o,I=D-o,O=D+o),v=T):(r==="left"?w=p+Math.max(l,h)+o:r==="right"?w=p+y-Math.max(c,d)-o:w=this.caretX,s==="top"?(I=m,D=I-o,T=w-o,v=w+o):(I=m+x,D=I+o,T=w+o,v=w-o),O=I),{x1:T,x2:w,x3:v,y1:I,y2:D,y3:O}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Qs(i.rtl,this.x,this.width);for(e.x=ju(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Rt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Rt(s.bodyFont),d=ju(this,"left",s),p=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=r.leftForLtr(p,c)+c/2,w=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Lp(e,x,T,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Lp(e,x,T,w)}else{e.lineWidth=xe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(p,c),T=r.leftForLtr(r.xPlus(p,1),c-2),w=Va(o.borderRadius);Object.values(w).some(v=>v!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Fp(e,{x,y,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Fp(e,{x:T,y:y+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Rt(i.bodyFont);let p=d.lineHeight,m=0;const y=Qs(i.rtl,this.x,this.width),x=function(_){n.fillText(_,y.x(e.x+m),e.y+p/2),e.y+=p+s},T=y.textAlign(o);let w,v,I,D,O,L,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=ju(this,T,i),n.fillStyle=i.bodyColor,Ae(this.beforeBody,x),m=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,D=0,L=r.length;D<L;++D){for(w=r[D],v=this.labelTextColors[D],n.fillStyle=v,Ae(w.before,x),I=w.lines,a&&I.length&&(this._drawColorBox(n,e,D,y,i),p=Math.max(d.lineHeight,l)),O=0,S=I.length;O<S;++O)x(I[O]),p=d.lineHeight;Ae(w.after,x)}m=0,p=d.lineHeight,Ae(this.afterBody,x),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Qs(i.rtl,this.x,this.width);for(e.x=ju(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Rt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:y}=Va(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=ga[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Mw(this,e),l=Object.assign({},o,this._size),c=Vw(n,e,l),h=Lw(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=wn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),gb(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),mb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!sh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!sh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=ga[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ce($p,"positioners",ga);var W5={id:"tooltip",_element:$p,positioners:ga,afterInit(t,e,n){n&&(t.tooltip=new $p({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const q5=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function K5(t,e,n,i){const r=t.indexOf(e);if(r===-1)return q5(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const G5=(t,e)=>t===null?null:pn(Math.round(t),0,e);function Uw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Hp extends ko{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ke(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:K5(i,e,_e(n,e),this._addedLabels),G5(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Uw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ce(Hp,"id","category"),ce(Hp,"defaults",{ticks:{callback:Uw}});function Q5(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,m=s||1,y=h-1,{min:x,max:T}=e,w=!Ke(o),v=!Ke(a),I=!Ke(c),D=(T-x)/(d+1);let O=U0((T-x)/y/m)*m,L,S,_,b;if(O<1e-14&&!w&&!v)return[{value:x},{value:T}];b=Math.ceil(T/O)-Math.floor(x/O),b>y&&(O=U0(b*O/y/m)*m),Ke(l)||(L=Math.pow(10,l),O=Math.ceil(O*L)/L),r==="ticks"?(S=Math.floor(x/O)*O,_=Math.ceil(T/O)*O):(S=x,_=T),w&&v&&s&&_L((a-o)/s,O/1e3)?(b=Math.round(Math.min((a-o)/O,h)),O=(a-o)/b,S=o,_=a):I?(S=w?o:S,_=v?a:_,b=c-1,O=(_-S)/b):(b=(_-S)/O,Da(b,Math.round(b),O/1e3)?b=Math.round(b):b=Math.ceil(b));const A=Math.max(B0(O),B0(S));L=Math.pow(10,Ke(l)?A:l),S=Math.round(S*L)/L,_=Math.round(_*L)/L;let R=0;for(w&&(p&&S!==o?(n.push({value:o}),S<o&&R++,Da(Math.round((S+R*O)*L)/L,o,Bw(o,D,t))&&R++):S<o&&R++);R<b;++R){const P=Math.round((S+R*O)*L)/L;if(v&&P>a)break;n.push({value:P})}return v&&p&&_!==a?n.length&&Da(n[n.length-1].value,a,Bw(a,D,t))?n[n.length-1].value=a:n.push({value:a}):(!v||_===a)&&n.push({value:_}),n}function Bw(t,e,{horizontal:n,minRotation:i}){const r=jr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Y5 extends ko{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ke(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=po(r),c=po(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Q5(r,s);return e.bounds==="ticks"&&vL(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return sb(e,this.chart.options.locale,this.options.ticks.format)}}class Wp extends Y5{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ot(e)?e:0,this.max=Ot(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=jr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ce(Wp,"id","linear"),ce(Wp,"defaults",{ticks:{callback:ab.formatters.numeric}});const Qh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qt=Object.keys(Qh);function zw(t,e){return t-e}function $w(t,e){if(Ke(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ot(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(gl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Hw(t,e,n,i){const r=qt.length;for(let s=qt.indexOf(t);s<r-1;++s){const o=Qh[qt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return qt[s]}return qt[r-1]}function X5(t,e,n,i,r){for(let s=qt.length-1;s>=qt.indexOf(n);s--){const o=qt[s];if(Qh[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return qt[n?qt.indexOf(n):0]}function J5(t){for(let e=qt.indexOf(t)+1,n=qt.length;e<n;++e)if(Qh[qt[e]].common)return qt[e]}function Ww(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=zm(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function Z5(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function qw(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:Z5(t,i,r,n)}class dh extends ko{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new WF._date(e.adapters.date);r.init(n),Na(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:$w(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ot(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Ot(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=bL(r,s,o);return this._unit=n.unit||(i.autoSkip?Hw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):X5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:J5(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),qw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=pn(n,0,o),i=pn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Hw(s.minUnit,n,i,this._getLabelCapacity(n)),a=_e(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=gl(l)||l===!0,h={};let d=n,p,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<i;p=+e.add(p,a,o),m++)Ww(h,p,y);return(p===i||r.bounds==="ticks"||m===1)&&Ww(h,p,y),Object.keys(h).sort(zw).map(x=>+x)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ve(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=i[n],m=c&&d&&p&&p.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=jr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,qw(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push($w(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return kL(e.sort(zw))}}ce(dh,"id","time"),ce(dh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Uu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Ur(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Ur(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Kw extends dh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Uu(n,this.min),this._tableRange=Uu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Uu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Uu(this._table,i*this._tableRange+this._minPos,!0)}}ce(Kw,"id","timeseries"),ce(Kw,"defaults",dh.defaults);const Fb="label";function Gw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function ej(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function jb(t,e){t.labels=e}function Ub(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fb;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function tj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fb;const n={labels:[],datasets:[]};return jb(n,t.labels),Ub(n,t.datasets,e),n}function nj(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...p}=t,m=B.useRef(null),y=B.useRef(),x=()=>{m.current&&(y.current=new Gh(m.current,{type:o,data:tj(a,s),options:l&&{...l},plugins:c}),Gw(e,y.current))},T=()=>{Gw(e,null),y.current&&(y.current.destroy(),y.current=null)};return B.useEffect(()=>{!r&&y.current&&l&&ej(y.current,l)},[r,l]),B.useEffect(()=>{!r&&y.current&&jb(y.current.config.data,a.labels)},[r,a.labels]),B.useEffect(()=>{!r&&y.current&&a.datasets&&Ub(y.current.config.data,a.datasets,s)},[r,a.datasets]),B.useEffect(()=>{y.current&&(r?(T(),setTimeout(x)):y.current.update(d))},[r,l,a.labels,a.datasets,d]),B.useEffect(()=>{y.current&&(T(),setTimeout(x))},[o]),B.useEffect(()=>(x(),()=>T()),[]),be.createElement("canvas",Object.assign({ref:m,role:"img",height:n,width:i},p),h)}const ij=B.forwardRef(nj);function rj(t,e){return Gh.register(e),B.forwardRef((n,i)=>be.createElement(ij,Object.assign({},n,{ref:i,type:t})))}const sj=rj("line",lc);Gh.register(Hp,Wp,hc,Gi,L5,W5,M5,C5);function oj({results:t,formData:e,onRecalculate:n,showEmbed:i=!1}){const r={labels:t.keepQualified.yearByYear.map(o=>o.year.toString()),datasets:[{label:"Keep Qualified Account",data:t.keepQualified.yearByYear.map(o=>o.iraValue+o.taxableAccount),borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",fill:!0,tension:.4},{label:"Re-allocate using S.M.A.R.T. Strategy",data:t.convertToRoth.yearByYear.map(o=>o.rothValue),borderColor:"#16a34a",backgroundColor:"rgba(22, 163, 74, 0.1)",fill:!0,tension:.4}]},s={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Account Balance Comparison"}},scales:{y:{beginAtZero:!0,ticks:{callback:o=>Vt(o)}}}};return C.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 p-6",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Your Retirement Tax Bill"}),C.jsx("p",{className:"mt-2 text-gray-600",children:"Compare the tax implications of your retirement strategy"})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-xl shadow-sm",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-blue-900",children:"Keep Qualified Account"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("p",{className:"flex justify-between",children:[C.jsx("span",{children:"Taxes on RMDs:"}),C.jsx("span",{className:"font-medium",children:Vt(t.keepQualified.rmdTaxes)})]}),C.jsxs("p",{className:"flex justify-between",children:[C.jsx("span",{children:"Taxes on Reinvested RMDs:"}),C.jsx("span",{className:"font-medium",children:Vt(t.keepQualified.reinvestedRmdTaxes)})]}),C.jsxs("p",{className:"flex justify-between",children:[C.jsx("span",{children:"Taxes on Remaining Balance:"}),C.jsx("span",{className:"font-medium",children:Vt(t.keepQualified.remainingBalanceTaxes)})]}),C.jsx("div",{className:"pt-3 mt-3 border-t border-blue-200",children:C.jsxs("p",{className:"flex justify-between text-xl font-bold text-red-600",children:[C.jsx("span",{children:"Current Retirement Tax Bill:"}),C.jsx("span",{children:Vt(t.keepQualified.currentRetirementTaxBill)})]})})]})]}),C.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-xl shadow-sm",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-green-900",children:"Re-allocate using S.M.A.R.T. Strategy"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("p",{className:"flex justify-between",children:[C.jsx("span",{children:"Taxes on Re-allocation:"}),C.jsx("span",{className:"font-medium",children:Vt(t.convertToRoth.conversionTaxes)})]}),C.jsxs("p",{className:"flex justify-between",children:[C.jsx("span",{children:"Future Growth Taxes:"}),C.jsx("span",{className:"font-medium",children:Vt(t.convertToRoth.futureGrowthTaxes)})]}),C.jsxs("p",{className:"flex justify-between",children:[C.jsx("span",{children:"Taxes on Remaining Balance:"}),C.jsx("span",{className:"font-medium",children:Vt(t.convertToRoth.remainingBalanceTaxes)})]}),C.jsx("div",{className:"pt-3 mt-3 border-t border-green-200",children:C.jsxs("p",{className:"flex justify-between text-xl font-bold text-green-600",children:[C.jsx("span",{children:"Total Tax Savings:"}),C.jsx("span",{children:Vt(t.convertToRoth.totalTaxSavings)})]})})]})]})]}),C.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:C.jsx("div",{className:"h-96",children:C.jsx(sj,{options:s,data:r})})}),C.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Year-by-Year Projections"}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[C.jsx("thead",{className:"bg-gray-50",children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RMD Factor"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RMD Amount"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"After-Tax RMD"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IRA Value"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxable Account"}),C.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roth Value"})]})}),C.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.keepQualified.yearByYear.map((o,a)=>C.jsxs("tr",{className:a%2===0?"bg-gray-50":"",children:[C.jsx("td",{className:"px-4 py-3",children:o.year}),C.jsx("td",{className:"px-4 py-3",children:o.age}),C.jsx("td",{className:"px-4 py-3",children:o.rmdFactor.toFixed(1)}),C.jsx("td",{className:"px-4 py-3",children:Vt(o.rmdAmount)}),C.jsx("td",{className:"px-4 py-3",children:Vt(o.afterTaxRmd)}),C.jsx("td",{className:"px-4 py-3",children:Vt(o.iraValue)}),C.jsx("td",{className:"px-4 py-3",children:Vt(o.taxableAccount)}),C.jsx("td",{className:"px-4 py-3",children:Vt(t.convertToRoth.yearByYear[a].rothValue)})]},o.year))})]})})]}),C.jsx("div",{className:"flex justify-end",children:C.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Recalculate"})})]})}function aj(t){return t>=1960?75:t>=1951?73:72}function Qw(t){return{72:27.4,73:26.5,74:25.5,75:24.6,76:23.7,77:22.9,78:22,79:21.1,80:20.2,81:19.4,82:18.5,83:17.7,84:16.8,85:16,86:15.2,87:14.4,88:13.7,89:12.9,90:12.2,91:11.5,92:10.8,93:10.1,94:9.5,95:8.9,96:8.4,97:7.8,98:7.3,99:6.8,100:6.4}[t]||6.4}function lj(t,e,n,i,r){const s=r/100,o=n/100,a=90-t,l=aj(i),c=new Date().getFullYear(),h=[];let d=e,p=0,m=0,y=0;const x=[],T=e*o;let w=e-T;for(let D=0;D<=a;D++){const O=t+D,L=c+D;let S=0,_=0,b=0;if(d*=1+s,p*=1+s,w*=1+s,O>=l){const P=Qw(O);S=d/P,_=S*o,b=S-_,d-=S,p+=b,m+=_}const R=p*s*(o/2);y+=R,h.push({year:L,age:O,rmdFactor:O>=l?Qw(O):0,rmdAmount:S,afterTaxRmd:b,iraValue:d,taxableAccount:p,reinvestedRmds:p,taxes:_+R}),x.push({year:L,age:O,rothValue:w,taxes:D===0?T:0})}const v=d*o,I=p*(o/2);return{keepQualified:{rmdTaxes:m,reinvestedRmdTaxes:y,remainingBalanceTaxes:v+I,currentRetirementTaxBill:m+y+v+I,yearByYear:h},convertToRoth:{conversionTaxes:T,futureGrowthTaxes:0,remainingBalanceTaxes:0,totalTaxSavings:m+y+v+I-T,yearByYear:x}}}const uj=z1(t=>({loading:!1,error:null,saveEntry:async e=>(console.log("Calculator entry:",e),Promise.resolve())}));function cj(){const[t,e]=B.useState(!1),[n,i]=B.useState(null),[r,s]=B.useState(null),{saveEntry:o,loading:a}=uj(),l=async c=>{try{console.log("Form Data:",c);const h=lj(Number(c.age),Number(c.qualifiedAccountValue),Number(c.taxBracket),Number(c.birthYear),Number(c.growthRate));i(h),s(c);try{await o({...c,calculatorId:"retirement-tax-calculator"})}catch(d){console.error("Error saving entry (non-critical):",d)}e(!0)}catch(h){console.error("Error calculating results:",h),alert("There was an error calculating the results. Please try again.")}};return C.jsx("div",{className:"min-h-screen bg-gray-50",children:t?n&&r?C.jsx(oj,{results:n,formData:r,onRecalculate:()=>e(!1)}):C.jsx("div",{className:"flex items-center justify-center h-screen",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),C.jsx("p",{className:"mt-4 text-gray-600",children:"Calculating results..."})]})}):C.jsx(jV,{onSubmit:l,loading:a})})}function hj(){return C.jsx(zC,{children:C.jsx(MC,{children:C.jsxs(xs,{element:C.jsx(JC,{}),children:[C.jsx(xs,{index:!0,element:C.jsx(uv,{})}),C.jsx(xs,{path:"dashboard",element:C.jsx(uv,{})}),C.jsx(xs,{path:"branding",element:C.jsx(MV,{})}),C.jsx(xs,{path:"calculator/retirement-tax",element:C.jsx(cj,{})})]})})})}df.createRoot(document.getElementById("root")).render(C.jsx(be.StrictMode,{children:C.jsx(hj,{})}));
//# sourceMappingURL=index-eVFtBr5_.js.map
